(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ka(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const It={},Tr=[],Me=()=>{},Dh=()=>!1,oo=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Wa=e=>e.startsWith("onUpdate:"),ce=Object.assign,Ga=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},am=Object.prototype.hasOwnProperty,_t=(e,t)=>am.call(e,t),nt=Array.isArray,Ir=e=>Ls(e)==="[object Map]",xh=e=>Ls(e)==="[object Set]",Uc=e=>Ls(e)==="[object Date]",at=e=>typeof e=="function",Ut=e=>typeof e=="string",Pe=e=>typeof e=="symbol",At=e=>e!==null&&typeof e=="object",Nh=e=>(At(e)||at(e))&&at(e.then)&&at(e.catch),Oh=Object.prototype.toString,Ls=e=>Oh.call(e),lm=e=>Ls(e).slice(8,-1),kh=e=>Ls(e)==="[object Object]",Qa=e=>Ut(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,fs=Ka(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ao=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},cm=/-\w/g,bn=ao(e=>e.replace(cm,t=>t.slice(1).toUpperCase())),um=/\B([A-Z])/g,tr=ao(e=>e.replace(um,"-$1").toLowerCase()),Mh=ao(e=>e.charAt(0).toUpperCase()+e.slice(1)),Go=ao(e=>e?`on${Mh(e)}`:""),vn=(e,t)=>!Object.is(e,t),Ii=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Fh=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},Xa=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Bc;const lo=()=>Bc||(Bc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Mr(e){if(nt(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=Ut(r)?pm(r):Mr(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(Ut(e)||At(e))return e}const hm=/;(?![^(]*\))/g,fm=/:([^]+)/,dm=/\/\*[^]*?\*\//g;function pm(e){const t={};return e.replace(dm,"").split(hm).forEach(n=>{if(n){const r=n.split(fm);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Ja(e){let t="";if(Ut(e))t=e;else if(nt(e))for(let n=0;n<e.length;n++){const r=Ja(e[n]);r&&(t+=r+" ")}else if(At(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const mm="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",gm=Ka(mm);function Lh(e){return!!e||e===""}function _m(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=Ni(e[r],t[r]);return n}function Ni(e,t){if(e===t)return!0;let n=Uc(e),r=Uc(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=Pe(e),r=Pe(t),n||r)return e===t;if(n=nt(e),r=nt(t),n||r)return n&&r?_m(e,t):!1;if(n=At(e),r=At(t),n||r){if(!n||!r)return!1;const s=Object.keys(e).length,i=Object.keys(t).length;if(s!==i)return!1;for(const a in e){const l=e.hasOwnProperty(a),u=t.hasOwnProperty(a);if(l&&!u||!l&&u||!Ni(e[a],t[a]))return!1}}return String(e)===String(t)}const Uh=e=>!!(e&&e.__v_isRef===!0),pr=e=>Ut(e)?e:e==null?"":nt(e)||At(e)&&(e.toString===Oh||!at(e.toString))?Uh(e)?pr(e.value):JSON.stringify(e,Bh,2):String(e),Bh=(e,t)=>Uh(t)?Bh(e,t.value):Ir(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],i)=>(n[Qo(r,i)+" =>"]=s,n),{})}:xh(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Qo(n))}:Pe(t)?Qo(t):At(t)&&!nt(t)&&!kh(t)?String(t):t,Qo=(e,t="")=>{var n;return Pe(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let se;class jh{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=se,!t&&se&&(this.index=(se.scopes||(se.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=se;try{return se=this,t()}finally{se=n}}}on(){++this._on===1&&(this.prevScope=se,se=this)}off(){this._on>0&&--this._on===0&&(se=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function $h(e){return new jh(e)}function qh(){return se}function ym(e,t=!1){se&&se.cleanups.push(e)}let wt;const Xo=new WeakSet;class Hh{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,se&&se.active&&se.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Xo.has(this)&&(Xo.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Kh(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,jc(this),Wh(this);const t=wt,n=Ce;wt=this,Ce=!0;try{return this.fn()}finally{Gh(this),wt=t,Ce=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)tl(t);this.deps=this.depsTail=void 0,jc(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Xo.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){da(this)&&this.run()}get dirty(){return da(this)}}let zh=0,ds,ps;function Kh(e,t=!1){if(e.flags|=8,t){e.next=ps,ps=e;return}e.next=ds,ds=e}function Ya(){zh++}function Za(){if(--zh>0)return;if(ps){let t=ps;for(ps=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;ds;){let t=ds;for(ds=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function Wh(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Gh(e){let t,n=e.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),tl(r),vm(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}e.deps=t,e.depsTail=n}function da(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Qh(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Qh(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===bs)||(e.globalVersion=bs,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!da(e))))return;e.flags|=2;const t=e.dep,n=wt,r=Ce;wt=e,Ce=!0;try{Wh(e);const s=e.fn(e._value);(t.version===0||vn(s,e._value))&&(e.flags|=128,e._value=s,t.version++)}catch(s){throw t.version++,s}finally{wt=n,Ce=r,Gh(e),e.flags&=-3}}function tl(e,t=!1){const{dep:n,prevSub:r,nextSub:s}=e;if(r&&(r.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)tl(i,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function vm(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Ce=!0;const Xh=[];function en(){Xh.push(Ce),Ce=!1}function nn(){const e=Xh.pop();Ce=e===void 0?!0:e}function jc(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=wt;wt=void 0;try{t()}finally{wt=n}}}let bs=0;class Em{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class el{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!wt||!Ce||wt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==wt)n=this.activeLink=new Em(wt,this),wt.deps?(n.prevDep=wt.depsTail,wt.depsTail.nextDep=n,wt.depsTail=n):wt.deps=wt.depsTail=n,Jh(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=wt.depsTail,n.nextDep=void 0,wt.depsTail.nextDep=n,wt.depsTail=n,wt.deps===n&&(wt.deps=r)}return n}trigger(t){this.version++,bs++,this.notify(t)}notify(t){Ya();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Za()}}}function Jh(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)Jh(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Oi=new WeakMap,Gn=Symbol(""),pa=Symbol(""),Ss=Symbol("");function oe(e,t,n){if(Ce&&wt){let r=Oi.get(e);r||Oi.set(e,r=new Map);let s=r.get(n);s||(r.set(n,s=new el),s.map=r,s.key=n),s.track()}}function Xe(e,t,n,r,s,i){const a=Oi.get(e);if(!a){bs++;return}const l=u=>{u&&u.trigger()};if(Ya(),t==="clear")a.forEach(l);else{const u=nt(e),f=u&&Qa(n);if(u&&n==="length"){const d=Number(r);a.forEach((m,y)=>{(y==="length"||y===Ss||!Pe(y)&&y>=d)&&l(m)})}else switch((n!==void 0||a.has(void 0))&&l(a.get(n)),f&&l(a.get(Ss)),t){case"add":u?f&&l(a.get("length")):(l(a.get(Gn)),Ir(e)&&l(a.get(pa)));break;case"delete":u||(l(a.get(Gn)),Ir(e)&&l(a.get(pa)));break;case"set":Ir(e)&&l(a.get(Gn));break}}Za()}function Tm(e,t){const n=Oi.get(e);return n&&n.get(t)}function hr(e){const t=gt(e);return t===e?t:(oe(t,"iterate",Ss),Ae(e)?t:t.map(Jt))}function co(e){return oe(e=gt(e),"iterate",Ss),e}const Im={__proto__:null,[Symbol.iterator](){return Jo(this,Symbol.iterator,Jt)},concat(...e){return hr(this).concat(...e.map(t=>nt(t)?hr(t):t))},entries(){return Jo(this,"entries",e=>(e[1]=Jt(e[1]),e))},every(e,t){return Ge(this,"every",e,t,void 0,arguments)},filter(e,t){return Ge(this,"filter",e,t,n=>n.map(Jt),arguments)},find(e,t){return Ge(this,"find",e,t,Jt,arguments)},findIndex(e,t){return Ge(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Ge(this,"findLast",e,t,Jt,arguments)},findLastIndex(e,t){return Ge(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Ge(this,"forEach",e,t,void 0,arguments)},includes(...e){return Yo(this,"includes",e)},indexOf(...e){return Yo(this,"indexOf",e)},join(e){return hr(this).join(e)},lastIndexOf(...e){return Yo(this,"lastIndexOf",e)},map(e,t){return Ge(this,"map",e,t,void 0,arguments)},pop(){return rs(this,"pop")},push(...e){return rs(this,"push",e)},reduce(e,...t){return $c(this,"reduce",e,t)},reduceRight(e,...t){return $c(this,"reduceRight",e,t)},shift(){return rs(this,"shift")},some(e,t){return Ge(this,"some",e,t,void 0,arguments)},splice(...e){return rs(this,"splice",e)},toReversed(){return hr(this).toReversed()},toSorted(e){return hr(this).toSorted(e)},toSpliced(...e){return hr(this).toSpliced(...e)},unshift(...e){return rs(this,"unshift",e)},values(){return Jo(this,"values",Jt)}};function Jo(e,t,n){const r=co(e),s=r[t]();return r!==e&&!Ae(e)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const wm=Array.prototype;function Ge(e,t,n,r,s,i){const a=co(e),l=a!==e&&!Ae(e),u=a[t];if(u!==wm[t]){const m=u.apply(e,i);return l?Jt(m):m}let f=n;a!==e&&(l?f=function(m,y){return n.call(this,Jt(m),y,e)}:n.length>2&&(f=function(m,y){return n.call(this,m,y,e)}));const d=u.call(a,f,r);return l&&s?s(d):d}function $c(e,t,n,r){const s=co(e);let i=n;return s!==e&&(Ae(e)?n.length>3&&(i=function(a,l,u){return n.call(this,a,l,u,e)}):i=function(a,l,u){return n.call(this,a,Jt(l),u,e)}),s[t](i,...r)}function Yo(e,t,n){const r=gt(e);oe(r,"iterate",Ss);const s=r[t](...n);return(s===-1||s===!1)&&sl(n[0])?(n[0]=gt(n[0]),r[t](...n)):s}function rs(e,t,n=[]){en(),Ya();const r=gt(e)[t].apply(e,n);return Za(),nn(),r}const Am=Ka("__proto__,__v_isRef,__isVue"),Yh=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Pe));function bm(e){Pe(e)||(e=String(e));const t=gt(this);return oe(t,"has",e),t.hasOwnProperty(e)}class Zh{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?km:rf:i?nf:ef).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const a=nt(t);if(!s){let u;if(a&&(u=Im[n]))return u;if(n==="hasOwnProperty")return bm}const l=Reflect.get(t,n,Mt(t)?t:r);if((Pe(n)?Yh.has(n):Am(n))||(s||oe(t,"get",n),i))return l;if(Mt(l)){const u=a&&Qa(n)?l:l.value;return s&&At(u)?ga(u):u}return At(l)?s?ga(l):uo(l):l}}class tf extends Zh{constructor(t=!1){super(!1,t)}set(t,n,r,s){let i=t[n];if(!this._isShallow){const u=Sn(i);if(!Ae(r)&&!Sn(r)&&(i=gt(i),r=gt(r)),!nt(t)&&Mt(i)&&!Mt(r))return u||(i.value=r),!0}const a=nt(t)&&Qa(n)?Number(n)<t.length:_t(t,n),l=Reflect.set(t,n,r,Mt(t)?t:s);return t===gt(s)&&(a?vn(r,i)&&Xe(t,"set",n,r):Xe(t,"add",n,r)),l}deleteProperty(t,n){const r=_t(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&Xe(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!Pe(n)||!Yh.has(n))&&oe(t,"has",n),r}ownKeys(t){return oe(t,"iterate",nt(t)?"length":Gn),Reflect.ownKeys(t)}}class Sm extends Zh{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Rm=new tf,Cm=new Sm,Pm=new tf(!0);const ma=e=>e,fi=e=>Reflect.getPrototypeOf(e);function Vm(e,t,n){return function(...r){const s=this.__v_raw,i=gt(s),a=Ir(i),l=e==="entries"||e===Symbol.iterator&&a,u=e==="keys"&&a,f=s[e](...r),d=n?ma:t?ki:Jt;return!t&&oe(i,"iterate",u?pa:Gn),{next(){const{value:m,done:y}=f.next();return y?{value:m,done:y}:{value:l?[d(m[0]),d(m[1])]:d(m),done:y}},[Symbol.iterator](){return this}}}}function di(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Dm(e,t){const n={get(s){const i=this.__v_raw,a=gt(i),l=gt(s);e||(vn(s,l)&&oe(a,"get",s),oe(a,"get",l));const{has:u}=fi(a),f=t?ma:e?ki:Jt;if(u.call(a,s))return f(i.get(s));if(u.call(a,l))return f(i.get(l));i!==a&&i.get(s)},get size(){const s=this.__v_raw;return!e&&oe(gt(s),"iterate",Gn),s.size},has(s){const i=this.__v_raw,a=gt(i),l=gt(s);return e||(vn(s,l)&&oe(a,"has",s),oe(a,"has",l)),s===l?i.has(s):i.has(s)||i.has(l)},forEach(s,i){const a=this,l=a.__v_raw,u=gt(l),f=t?ma:e?ki:Jt;return!e&&oe(u,"iterate",Gn),l.forEach((d,m)=>s.call(i,f(d),f(m),a))}};return ce(n,e?{add:di("add"),set:di("set"),delete:di("delete"),clear:di("clear")}:{add(s){!t&&!Ae(s)&&!Sn(s)&&(s=gt(s));const i=gt(this);return fi(i).has.call(i,s)||(i.add(s),Xe(i,"add",s,s)),this},set(s,i){!t&&!Ae(i)&&!Sn(i)&&(i=gt(i));const a=gt(this),{has:l,get:u}=fi(a);let f=l.call(a,s);f||(s=gt(s),f=l.call(a,s));const d=u.call(a,s);return a.set(s,i),f?vn(i,d)&&Xe(a,"set",s,i):Xe(a,"add",s,i),this},delete(s){const i=gt(this),{has:a,get:l}=fi(i);let u=a.call(i,s);u||(s=gt(s),u=a.call(i,s)),l&&l.call(i,s);const f=i.delete(s);return u&&Xe(i,"delete",s,void 0),f},clear(){const s=gt(this),i=s.size!==0,a=s.clear();return i&&Xe(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=Vm(s,e,t)}),n}function nl(e,t){const n=Dm(e,t);return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(_t(n,s)&&s in r?n:r,s,i)}const xm={get:nl(!1,!1)},Nm={get:nl(!1,!0)},Om={get:nl(!0,!1)};const ef=new WeakMap,nf=new WeakMap,rf=new WeakMap,km=new WeakMap;function Mm(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Fm(e){return e.__v_skip||!Object.isExtensible(e)?0:Mm(lm(e))}function uo(e){return Sn(e)?e:rl(e,!1,Rm,xm,ef)}function Lm(e){return rl(e,!1,Pm,Nm,nf)}function ga(e){return rl(e,!0,Cm,Om,rf)}function rl(e,t,n,r,s){if(!At(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=Fm(e);if(i===0)return e;const a=s.get(e);if(a)return a;const l=new Proxy(e,i===2?r:n);return s.set(e,l),l}function En(e){return Sn(e)?En(e.__v_raw):!!(e&&e.__v_isReactive)}function Sn(e){return!!(e&&e.__v_isReadonly)}function Ae(e){return!!(e&&e.__v_isShallow)}function sl(e){return e?!!e.__v_raw:!1}function gt(e){const t=e&&e.__v_raw;return t?gt(t):e}function il(e){return!_t(e,"__v_skip")&&Object.isExtensible(e)&&Fh(e,"__v_skip",!0),e}const Jt=e=>At(e)?uo(e):e,ki=e=>At(e)?ga(e):e;function Mt(e){return e?e.__v_isRef===!0:!1}function sf(e){return Um(e,!1)}function Um(e,t){return Mt(e)?e:new Bm(e,t)}class Bm{constructor(t,n){this.dep=new el,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:gt(t),this._value=n?t:Jt(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||Ae(t)||Sn(t);t=r?t:gt(t),vn(t,n)&&(this._rawValue=t,this._value=r?t:Jt(t),this.dep.trigger())}}function Ct(e){return Mt(e)?e.value:e}const jm={get:(e,t,n)=>t==="__v_raw"?e:Ct(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return Mt(s)&&!Mt(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function of(e){return En(e)?e:new Proxy(e,jm)}function $m(e){const t=nt(e)?new Array(e.length):{};for(const n in e)t[n]=Hm(e,n);return t}class qm{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Tm(gt(this._object),this._key)}}function Hm(e,t,n){const r=e[t];return Mt(r)?r:new qm(e,t,n)}class zm{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new el(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=bs-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&wt!==this)return Kh(this,!0),!0}get value(){const t=this.dep.track();return Qh(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Km(e,t,n=!1){let r,s;return at(e)?r=e:(r=e.get,s=e.set),new zm(r,s,n)}const pi={},Mi=new WeakMap;let Hn;function Wm(e,t=!1,n=Hn){if(n){let r=Mi.get(n);r||Mi.set(n,r=[]),r.push(e)}}function Gm(e,t,n=It){const{immediate:r,deep:s,once:i,scheduler:a,augmentJob:l,call:u}=n,f=z=>s?z:Ae(z)||s===!1||s===0?Je(z,1):Je(z);let d,m,y,b,V=!1,F=!1;if(Mt(e)?(m=()=>e.value,V=Ae(e)):En(e)?(m=()=>f(e),V=!0):nt(e)?(F=!0,V=e.some(z=>En(z)||Ae(z)),m=()=>e.map(z=>{if(Mt(z))return z.value;if(En(z))return f(z);if(at(z))return u?u(z,2):z()})):at(e)?t?m=u?()=>u(e,2):e:m=()=>{if(y){en();try{y()}finally{nn()}}const z=Hn;Hn=d;try{return u?u(e,3,[b]):e(b)}finally{Hn=z}}:m=Me,t&&s){const z=m,lt=s===!0?1/0:s;m=()=>Je(z(),lt)}const L=qh(),K=()=>{d.stop(),L&&L.active&&Ga(L.effects,d)};if(i&&t){const z=t;t=(...lt)=>{z(...lt),K()}}let W=F?new Array(e.length).fill(pi):pi;const Q=z=>{if(!(!(d.flags&1)||!d.dirty&&!z))if(t){const lt=d.run();if(s||V||(F?lt.some((Et,I)=>vn(Et,W[I])):vn(lt,W))){y&&y();const Et=Hn;Hn=d;try{const I=[lt,W===pi?void 0:F&&W[0]===pi?[]:W,b];W=lt,u?u(t,3,I):t(...I)}finally{Hn=Et}}}else d.run()};return l&&l(Q),d=new Hh(m),d.scheduler=a?()=>a(Q,!1):Q,b=z=>Wm(z,!1,d),y=d.onStop=()=>{const z=Mi.get(d);if(z){if(u)u(z,4);else for(const lt of z)lt();Mi.delete(d)}},t?r?Q(!0):W=d.run():a?a(Q.bind(null,!0),!0):d.run(),K.pause=d.pause.bind(d),K.resume=d.resume.bind(d),K.stop=K,K}function Je(e,t=1/0,n){if(t<=0||!At(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,Mt(e))Je(e.value,t,n);else if(nt(e))for(let r=0;r<e.length;r++)Je(e[r],t,n);else if(xh(e)||Ir(e))e.forEach(r=>{Je(r,t,n)});else if(kh(e)){for(const r in e)Je(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Je(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Us(e,t,n,r){try{return r?e(...r):e()}catch(s){ho(s,t,n)}}function je(e,t,n,r){if(at(e)){const s=Us(e,t,n,r);return s&&Nh(s)&&s.catch(i=>{ho(i,t,n)}),s}if(nt(e)){const s=[];for(let i=0;i<e.length;i++)s.push(je(e[i],t,n,r));return s}}function ho(e,t,n,r=!0){const s=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||It;if(t){let l=t.parent;const u=t.proxy,f=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const d=l.ec;if(d){for(let m=0;m<d.length;m++)if(d[m](e,u,f)===!1)return}l=l.parent}if(i){en(),Us(i,null,10,[e,u,f]),nn();return}}Qm(e,n,s,r,a)}function Qm(e,t,n,r=!0,s=!1){if(s)throw e;console.error(e)}const de=[];let Ne=-1;const wr=[];let pn=null,mr=0;const af=Promise.resolve();let Fi=null;function lf(e){const t=Fi||af;return e?t.then(this?e.bind(this):e):t}function Xm(e){let t=Ne+1,n=de.length;for(;t<n;){const r=t+n>>>1,s=de[r],i=Rs(s);i<e||i===e&&s.flags&2?t=r+1:n=r}return t}function ol(e){if(!(e.flags&1)){const t=Rs(e),n=de[de.length-1];!n||!(e.flags&2)&&t>=Rs(n)?de.push(e):de.splice(Xm(t),0,e),e.flags|=1,cf()}}function cf(){Fi||(Fi=af.then(hf))}function Jm(e){nt(e)?wr.push(...e):pn&&e.id===-1?pn.splice(mr+1,0,e):e.flags&1||(wr.push(e),e.flags|=1),cf()}function qc(e,t,n=Ne+1){for(;n<de.length;n++){const r=de[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;de.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function uf(e){if(wr.length){const t=[...new Set(wr)].sort((n,r)=>Rs(n)-Rs(r));if(wr.length=0,pn){pn.push(...t);return}for(pn=t,mr=0;mr<pn.length;mr++){const n=pn[mr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}pn=null,mr=0}}const Rs=e=>e.id==null?e.flags&2?-1:1/0:e.id;function hf(e){try{for(Ne=0;Ne<de.length;Ne++){const t=de[Ne];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Us(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Ne<de.length;Ne++){const t=de[Ne];t&&(t.flags&=-2)}Ne=-1,de.length=0,uf(),Fi=null,(de.length||wr.length)&&hf()}}let le=null,ff=null;function Li(e){const t=le;return le=e,ff=e&&e.type.__scopeId||null,t}function os(e,t=le,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&Zc(-1);const i=Li(t);let a;try{a=e(...s)}finally{Li(i),r._d&&Zc(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function ss(e,t){if(le===null)return e;const n=go(le),r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[i,a,l,u=It]=t[s];i&&(at(i)&&(i={mounted:i,updated:i}),i.deep&&Je(a),r.push({dir:i,instance:n,value:a,oldValue:void 0,arg:l,modifiers:u}))}return e}function jn(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let a=0;a<s.length;a++){const l=s[a];i&&(l.oldValue=i[a].value);let u=l.dir[r];u&&(en(),je(u,n,8,[e.el,l,e,t]),nn())}}const Ym=Symbol("_vte"),Zm=e=>e.__isTeleport,tg=Symbol("_leaveCb");function al(e,t){e.shapeFlag&6&&e.component?(e.transition=t,al(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Bs(e,t){return at(e)?ce({name:e.name},t,{setup:e}):e}function df(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const Ui=new WeakMap;function ms(e,t,n,r,s=!1){if(nt(e)){e.forEach((V,F)=>ms(V,t&&(nt(t)?t[F]:t),n,r,s));return}if(Ar(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&ms(e,t,n,r.component.subTree);return}const i=r.shapeFlag&4?go(r.component):r.el,a=s?null:i,{i:l,r:u}=e,f=t&&t.r,d=l.refs===It?l.refs={}:l.refs,m=l.setupState,y=gt(m),b=m===It?Dh:V=>_t(y,V);if(f!=null&&f!==u){if(Hc(t),Ut(f))d[f]=null,b(f)&&(m[f]=null);else if(Mt(f)){f.value=null;const V=t;V.k&&(d[V.k]=null)}}if(at(u))Us(u,l,12,[a,d]);else{const V=Ut(u),F=Mt(u);if(V||F){const L=()=>{if(e.f){const K=V?b(u)?m[u]:d[u]:u.value;if(s)nt(K)&&Ga(K,i);else if(nt(K))K.includes(i)||K.push(i);else if(V)d[u]=[i],b(u)&&(m[u]=d[u]);else{const W=[i];u.value=W,e.k&&(d[e.k]=W)}}else V?(d[u]=a,b(u)&&(m[u]=a)):F&&(u.value=a,e.k&&(d[e.k]=a))};if(a){const K=()=>{L(),Ui.delete(e)};K.id=-1,Ui.set(e,K),_e(K,n)}else Hc(e),L()}}}function Hc(e){const t=Ui.get(e);t&&(t.flags|=8,Ui.delete(e))}lo().requestIdleCallback;lo().cancelIdleCallback;const Ar=e=>!!e.type.__asyncLoader,pf=e=>e.type.__isKeepAlive;function eg(e,t){mf(e,"a",t)}function ng(e,t){mf(e,"da",t)}function mf(e,t,n=pe){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(fo(t,r,n),n){let s=n.parent;for(;s&&s.parent;)pf(s.parent.vnode)&&rg(r,t,n,s),s=s.parent}}function rg(e,t,n,r){const s=fo(t,e,r,!0);_f(()=>{Ga(r[t],s)},n)}function fo(e,t,n=pe,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...a)=>{en();const l=js(n),u=je(t,n,e,a);return l(),nn(),u});return r?s.unshift(i):s.push(i),i}}const ln=e=>(t,n=pe)=>{(!Ps||e==="sp")&&fo(e,(...r)=>t(...r),n)},sg=ln("bm"),gf=ln("m"),ig=ln("bu"),og=ln("u"),ag=ln("bum"),_f=ln("um"),lg=ln("sp"),cg=ln("rtg"),ug=ln("rtc");function hg(e,t=pe){fo("ec",e,t)}const fg=Symbol.for("v-ndc");function gn(e,t,n,r){let s;const i=n,a=nt(e);if(a||Ut(e)){const l=a&&En(e);let u=!1,f=!1;l&&(u=!Ae(e),f=Sn(e),e=co(e)),s=new Array(e.length);for(let d=0,m=e.length;d<m;d++)s[d]=t(u?f?ki(Jt(e[d])):Jt(e[d]):e[d],d,void 0,i)}else if(typeof e=="number"){s=new Array(e);for(let l=0;l<e;l++)s[l]=t(l+1,l,void 0,i)}else if(At(e))if(e[Symbol.iterator])s=Array.from(e,(l,u)=>t(l,u,void 0,i));else{const l=Object.keys(e);s=new Array(l.length);for(let u=0,f=l.length;u<f;u++){const d=l[u];s[u]=t(e[d],d,u,i)}}else s=[];return s}function wi(e,t,n={},r,s){if(le.ce||le.parent&&Ar(le.parent)&&le.parent.ce){const f=Object.keys(n).length>0;return t!=="default"&&(n.name=t),vt(),_n(kt,null,[ve("slot",n,r)],f?-2:64)}let i=e[t];i&&i._c&&(i._d=!1),vt();const a=i&&yf(i(n)),l=n.key||a&&a.key,u=_n(kt,{key:(l&&!Pe(l)?l:`_${t}`)+(!a&&r?"_fb":"")},a||[],a&&e._===1?64:-2);return!s&&u.scopeId&&(u.slotScopeIds=[u.scopeId+"-s"]),i&&i._c&&(i._d=!0),u}function yf(e){return e.some(t=>ul(t)?!(t.type===rn||t.type===kt&&!yf(t.children)):!0)?e:null}const _a=e=>e?Uf(e)?go(e):_a(e.parent):null,gs=ce(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>_a(e.parent),$root:e=>_a(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Ef(e),$forceUpdate:e=>e.f||(e.f=()=>{ol(e.update)}),$nextTick:e=>e.n||(e.n=lf.bind(e.proxy)),$watch:e=>kg.bind(e)}),Zo=(e,t)=>e!==It&&!e.__isScriptSetup&&_t(e,t),dg={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:a,type:l,appContext:u}=e;let f;if(t[0]!=="$"){const b=a[t];if(b!==void 0)switch(b){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(Zo(r,t))return a[t]=1,r[t];if(s!==It&&_t(s,t))return a[t]=2,s[t];if((f=e.propsOptions[0])&&_t(f,t))return a[t]=3,i[t];if(n!==It&&_t(n,t))return a[t]=4,n[t];ya&&(a[t]=0)}}const d=gs[t];let m,y;if(d)return t==="$attrs"&&oe(e.attrs,"get",""),d(e);if((m=l.__cssModules)&&(m=m[t]))return m;if(n!==It&&_t(n,t))return a[t]=4,n[t];if(y=u.config.globalProperties,_t(y,t))return y[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return Zo(s,t)?(s[t]=n,!0):r!==It&&_t(r,t)?(r[t]=n,!0):_t(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i,type:a}},l){let u,f;return!!(n[l]||e!==It&&l[0]!=="$"&&_t(e,l)||Zo(t,l)||(u=i[0])&&_t(u,l)||_t(r,l)||_t(gs,l)||_t(s.config.globalProperties,l)||(f=a.__cssModules)&&f[l])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:_t(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function zc(e){return nt(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let ya=!0;function pg(e){const t=Ef(e),n=e.proxy,r=e.ctx;ya=!1,t.beforeCreate&&Kc(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:a,watch:l,provide:u,inject:f,created:d,beforeMount:m,mounted:y,beforeUpdate:b,updated:V,activated:F,deactivated:L,beforeDestroy:K,beforeUnmount:W,destroyed:Q,unmounted:z,render:lt,renderTracked:Et,renderTriggered:I,errorCaptured:g,serverPrefetch:_,expose:T,inheritAttrs:w,components:S,directives:E,filters:ue}=t;if(f&&mg(f,r,null),a)for(const it in a){const pt=a[it];at(pt)&&(r[it]=pt.bind(n))}if(s){const it=s.call(n,n);At(it)&&(e.data=uo(it))}if(ya=!0,i)for(const it in i){const pt=i[it],be=at(pt)?pt.bind(n,n):at(pt.get)?pt.get.bind(n,n):Me,On=!at(pt)&&at(pt.set)?pt.set.bind(n):Me,He=jf({get:be,set:On});Object.defineProperty(r,it,{enumerable:!0,configurable:!0,get:()=>He.value,set:Bt=>He.value=Bt})}if(l)for(const it in l)vf(l[it],r,n,it);if(u){const it=at(u)?u.call(n):u;Reflect.ownKeys(it).forEach(pt=>{Tg(pt,it[pt])})}d&&Kc(d,e,"c");function Pt(it,pt){nt(pt)?pt.forEach(be=>it(be.bind(n))):pt&&it(pt.bind(n))}if(Pt(sg,m),Pt(gf,y),Pt(ig,b),Pt(og,V),Pt(eg,F),Pt(ng,L),Pt(hg,g),Pt(ug,Et),Pt(cg,I),Pt(ag,W),Pt(_f,z),Pt(lg,_),nt(T))if(T.length){const it=e.exposed||(e.exposed={});T.forEach(pt=>{Object.defineProperty(it,pt,{get:()=>n[pt],set:be=>n[pt]=be,enumerable:!0})})}else e.exposed||(e.exposed={});lt&&e.render===Me&&(e.render=lt),w!=null&&(e.inheritAttrs=w),S&&(e.components=S),E&&(e.directives=E),_&&df(e)}function mg(e,t,n=Me){nt(e)&&(e=va(e));for(const r in e){const s=e[r];let i;At(s)?"default"in s?i=_s(s.from||r,s.default,!0):i=_s(s.from||r):i=_s(s),Mt(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):t[r]=i}}function Kc(e,t,n){je(nt(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function vf(e,t,n,r){let s=r.includes(".")?Nf(n,r):()=>n[r];if(Ut(e)){const i=t[e];at(i)&&Ai(s,i)}else if(at(e))Ai(s,e.bind(n));else if(At(e))if(nt(e))e.forEach(i=>vf(i,t,n,r));else{const i=at(e.handler)?e.handler.bind(n):t[e.handler];at(i)&&Ai(s,i,e)}}function Ef(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=e.appContext,l=i.get(t);let u;return l?u=l:!s.length&&!n&&!r?u=t:(u={},s.length&&s.forEach(f=>Bi(u,f,a,!0)),Bi(u,t,a)),At(t)&&i.set(t,u),u}function Bi(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&Bi(e,i,n,!0),s&&s.forEach(a=>Bi(e,a,n,!0));for(const a in t)if(!(r&&a==="expose")){const l=gg[a]||n&&n[a];e[a]=l?l(e[a],t[a]):t[a]}return e}const gg={data:Wc,props:Gc,emits:Gc,methods:as,computed:as,beforeCreate:fe,created:fe,beforeMount:fe,mounted:fe,beforeUpdate:fe,updated:fe,beforeDestroy:fe,beforeUnmount:fe,destroyed:fe,unmounted:fe,activated:fe,deactivated:fe,errorCaptured:fe,serverPrefetch:fe,components:as,directives:as,watch:yg,provide:Wc,inject:_g};function Wc(e,t){return t?e?function(){return ce(at(e)?e.call(this,this):e,at(t)?t.call(this,this):t)}:t:e}function _g(e,t){return as(va(e),va(t))}function va(e){if(nt(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function fe(e,t){return e?[...new Set([].concat(e,t))]:t}function as(e,t){return e?ce(Object.create(null),e,t):t}function Gc(e,t){return e?nt(e)&&nt(t)?[...new Set([...e,...t])]:ce(Object.create(null),zc(e),zc(t??{})):t}function yg(e,t){if(!e)return t;if(!t)return e;const n=ce(Object.create(null),e);for(const r in t)n[r]=fe(e[r],t[r]);return n}function Tf(){return{app:null,config:{isNativeTag:Dh,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let vg=0;function Eg(e,t){return function(r,s=null){at(r)||(r=ce({},r)),s!=null&&!At(s)&&(s=null);const i=Tf(),a=new WeakSet,l=[];let u=!1;const f=i.app={_uid:vg++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:n_,get config(){return i.config},set config(d){},use(d,...m){return a.has(d)||(d&&at(d.install)?(a.add(d),d.install(f,...m)):at(d)&&(a.add(d),d(f,...m))),f},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),f},component(d,m){return m?(i.components[d]=m,f):i.components[d]},directive(d,m){return m?(i.directives[d]=m,f):i.directives[d]},mount(d,m,y){if(!u){const b=f._ceVNode||ve(r,s);return b.appContext=i,y===!0?y="svg":y===!1&&(y=void 0),e(b,d,y),u=!0,f._container=d,d.__vue_app__=f,go(b.component)}},onUnmount(d){l.push(d)},unmount(){u&&(je(l,f._instance,16),e(null,f._container),delete f._container.__vue_app__)},provide(d,m){return i.provides[d]=m,f},runWithContext(d){const m=Qn;Qn=f;try{return d()}finally{Qn=m}}};return f}}let Qn=null;function Tg(e,t){if(pe){let n=pe.provides;const r=pe.parent&&pe.parent.provides;r===n&&(n=pe.provides=Object.create(r)),n[e]=t}}function _s(e,t,n=!1){const r=Lf();if(r||Qn){let s=Qn?Qn._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&at(t)?t.call(r&&r.proxy):t}}function Ig(){return!!(Lf()||Qn)}const If={},wf=()=>Object.create(If),Af=e=>Object.getPrototypeOf(e)===If;function wg(e,t,n,r=!1){const s={},i=wf();e.propsDefaults=Object.create(null),bf(e,t,s,i);for(const a in e.propsOptions[0])a in s||(s[a]=void 0);n?e.props=r?s:Lm(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function Ag(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:a}}=e,l=gt(s),[u]=e.propsOptions;let f=!1;if((r||a>0)&&!(a&16)){if(a&8){const d=e.vnode.dynamicProps;for(let m=0;m<d.length;m++){let y=d[m];if(po(e.emitsOptions,y))continue;const b=t[y];if(u)if(_t(i,y))b!==i[y]&&(i[y]=b,f=!0);else{const V=bn(y);s[V]=Ea(u,l,V,b,e,!1)}else b!==i[y]&&(i[y]=b,f=!0)}}}else{bf(e,t,s,i)&&(f=!0);let d;for(const m in l)(!t||!_t(t,m)&&((d=tr(m))===m||!_t(t,d)))&&(u?n&&(n[m]!==void 0||n[d]!==void 0)&&(s[m]=Ea(u,l,m,void 0,e,!0)):delete s[m]);if(i!==l)for(const m in i)(!t||!_t(t,m))&&(delete i[m],f=!0)}f&&Xe(e.attrs,"set","")}function bf(e,t,n,r){const[s,i]=e.propsOptions;let a=!1,l;if(t)for(let u in t){if(fs(u))continue;const f=t[u];let d;s&&_t(s,d=bn(u))?!i||!i.includes(d)?n[d]=f:(l||(l={}))[d]=f:po(e.emitsOptions,u)||(!(u in r)||f!==r[u])&&(r[u]=f,a=!0)}if(i){const u=gt(n),f=l||It;for(let d=0;d<i.length;d++){const m=i[d];n[m]=Ea(s,u,m,f[m],e,!_t(f,m))}}return a}function Ea(e,t,n,r,s,i){const a=e[n];if(a!=null){const l=_t(a,"default");if(l&&r===void 0){const u=a.default;if(a.type!==Function&&!a.skipFactory&&at(u)){const{propsDefaults:f}=s;if(n in f)r=f[n];else{const d=js(s);r=f[n]=u.call(null,t),d()}}else r=u;s.ce&&s.ce._setProp(n,r)}a[0]&&(i&&!l?r=!1:a[1]&&(r===""||r===tr(n))&&(r=!0))}return r}const bg=new WeakMap;function Sf(e,t,n=!1){const r=n?bg:t.propsCache,s=r.get(e);if(s)return s;const i=e.props,a={},l=[];let u=!1;if(!at(e)){const d=m=>{u=!0;const[y,b]=Sf(m,t,!0);ce(a,y),b&&l.push(...b)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!i&&!u)return At(e)&&r.set(e,Tr),Tr;if(nt(i))for(let d=0;d<i.length;d++){const m=bn(i[d]);Qc(m)&&(a[m]=It)}else if(i)for(const d in i){const m=bn(d);if(Qc(m)){const y=i[d],b=a[m]=nt(y)||at(y)?{type:y}:ce({},y),V=b.type;let F=!1,L=!0;if(nt(V))for(let K=0;K<V.length;++K){const W=V[K],Q=at(W)&&W.name;if(Q==="Boolean"){F=!0;break}else Q==="String"&&(L=!1)}else F=at(V)&&V.name==="Boolean";b[0]=F,b[1]=L,(F||_t(b,"default"))&&l.push(m)}}const f=[a,l];return At(e)&&r.set(e,f),f}function Qc(e){return e[0]!=="$"&&!fs(e)}const ll=e=>e==="_"||e==="_ctx"||e==="$stable",cl=e=>nt(e)?e.map(ke):[ke(e)],Sg=(e,t,n)=>{if(t._n)return t;const r=os((...s)=>cl(t(...s)),n);return r._c=!1,r},Rf=(e,t,n)=>{const r=e._ctx;for(const s in e){if(ll(s))continue;const i=e[s];if(at(i))t[s]=Sg(s,i,r);else if(i!=null){const a=cl(i);t[s]=()=>a}}},Cf=(e,t)=>{const n=cl(t);e.slots.default=()=>n},Pf=(e,t,n)=>{for(const r in t)(n||!ll(r))&&(e[r]=t[r])},Rg=(e,t,n)=>{const r=e.slots=wf();if(e.vnode.shapeFlag&32){const s=t._;s?(Pf(r,t,n),n&&Fh(r,"_",s,!0)):Rf(t,r)}else t&&Cf(e,t)},Cg=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,a=It;if(r.shapeFlag&32){const l=t._;l?n&&l===1?i=!1:Pf(s,t,n):(i=!t.$stable,Rf(t,s)),a=t}else t&&(Cf(e,t),a={default:1});if(i)for(const l in s)!ll(l)&&a[l]==null&&delete s[l]},_e=qg;function Pg(e){return Vg(e)}function Vg(e,t){const n=lo();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:a,createText:l,createComment:u,setText:f,setElementText:d,parentNode:m,nextSibling:y,setScopeId:b=Me,insertStaticContent:V}=e,F=(v,A,P,M=null,N=null,O=null,$=void 0,B=null,U=!!A.dynamicChildren)=>{if(v===A)return;v&&!is(v,A)&&(M=ze(v),Bt(v,N,O,!0),v=null),A.patchFlag===-2&&(U=!1,A.dynamicChildren=null);const{type:k,ref:Y,shapeFlag:q}=A;switch(k){case mo:L(v,A,P,M);break;case rn:K(v,A,P,M);break;case ea:v==null&&W(A,P,M,$);break;case kt:S(v,A,P,M,N,O,$,B,U);break;default:q&1?lt(v,A,P,M,N,O,$,B,U):q&6?E(v,A,P,M,N,O,$,B,U):(q&64||q&128)&&k.process(v,A,P,M,N,O,$,B,U,De)}Y!=null&&N?ms(Y,v&&v.ref,O,A||v,!A):Y==null&&v&&v.ref!=null&&ms(v.ref,null,O,v,!0)},L=(v,A,P,M)=>{if(v==null)r(A.el=l(A.children),P,M);else{const N=A.el=v.el;A.children!==v.children&&f(N,A.children)}},K=(v,A,P,M)=>{v==null?r(A.el=u(A.children||""),P,M):A.el=v.el},W=(v,A,P,M)=>{[v.el,v.anchor]=V(v.children,A,P,M,v.el,v.anchor)},Q=({el:v,anchor:A},P,M)=>{let N;for(;v&&v!==A;)N=y(v),r(v,P,M),v=N;r(A,P,M)},z=({el:v,anchor:A})=>{let P;for(;v&&v!==A;)P=y(v),s(v),v=P;s(A)},lt=(v,A,P,M,N,O,$,B,U)=>{if(A.type==="svg"?$="svg":A.type==="math"&&($="mathml"),v==null)Et(A,P,M,N,O,$,B,U);else{const k=v.el&&v.el._isVueCE?v.el:null;try{k&&k._beginPatch(),_(v,A,N,O,$,B,U)}finally{k&&k._endPatch()}}},Et=(v,A,P,M,N,O,$,B)=>{let U,k;const{props:Y,shapeFlag:q,transition:X,dirs:et}=v;if(U=v.el=a(v.type,O,Y&&Y.is,Y),q&8?d(U,v.children):q&16&&g(v.children,U,null,M,N,ta(v,O),$,B),et&&jn(v,null,M,"created"),I(U,v,v.scopeId,$,M),Y){for(const ot in Y)ot!=="value"&&!fs(ot)&&i(U,ot,null,Y[ot],O,M);"value"in Y&&i(U,"value",null,Y.value,O),(k=Y.onVnodeBeforeMount)&&xe(k,M,v)}et&&jn(v,null,M,"beforeMount");const Z=Dg(N,X);Z&&X.beforeEnter(U),r(U,A,P),((k=Y&&Y.onVnodeMounted)||Z||et)&&_e(()=>{k&&xe(k,M,v),Z&&X.enter(U),et&&jn(v,null,M,"mounted")},N)},I=(v,A,P,M,N)=>{if(P&&b(v,P),M)for(let O=0;O<M.length;O++)b(v,M[O]);if(N){let O=N.subTree;if(A===O||kf(O.type)&&(O.ssContent===A||O.ssFallback===A)){const $=N.vnode;I(v,$,$.scopeId,$.slotScopeIds,N.parent)}}},g=(v,A,P,M,N,O,$,B,U=0)=>{for(let k=U;k<v.length;k++){const Y=v[k]=B?mn(v[k]):ke(v[k]);F(null,Y,A,P,M,N,O,$,B)}},_=(v,A,P,M,N,O,$)=>{const B=A.el=v.el;let{patchFlag:U,dynamicChildren:k,dirs:Y}=A;U|=v.patchFlag&16;const q=v.props||It,X=A.props||It;let et;if(P&&$n(P,!1),(et=X.onVnodeBeforeUpdate)&&xe(et,P,A,v),Y&&jn(A,v,P,"beforeUpdate"),P&&$n(P,!0),(q.innerHTML&&X.innerHTML==null||q.textContent&&X.textContent==null)&&d(B,""),k?T(v.dynamicChildren,k,B,P,M,ta(A,N),O):$||pt(v,A,B,null,P,M,ta(A,N),O,!1),U>0){if(U&16)w(B,q,X,P,N);else if(U&2&&q.class!==X.class&&i(B,"class",null,X.class,N),U&4&&i(B,"style",q.style,X.style,N),U&8){const Z=A.dynamicProps;for(let ot=0;ot<Z.length;ot++){const ht=Z[ot],Kt=q[ht],Wt=X[ht];(Wt!==Kt||ht==="value")&&i(B,ht,Kt,Wt,N,P)}}U&1&&v.children!==A.children&&d(B,A.children)}else!$&&k==null&&w(B,q,X,P,N);((et=X.onVnodeUpdated)||Y)&&_e(()=>{et&&xe(et,P,A,v),Y&&jn(A,v,P,"updated")},M)},T=(v,A,P,M,N,O,$)=>{for(let B=0;B<A.length;B++){const U=v[B],k=A[B],Y=U.el&&(U.type===kt||!is(U,k)||U.shapeFlag&198)?m(U.el):P;F(U,k,Y,null,M,N,O,$,!0)}},w=(v,A,P,M,N)=>{if(A!==P){if(A!==It)for(const O in A)!fs(O)&&!(O in P)&&i(v,O,A[O],null,N,M);for(const O in P){if(fs(O))continue;const $=P[O],B=A[O];$!==B&&O!=="value"&&i(v,O,B,$,N,M)}"value"in P&&i(v,"value",A.value,P.value,N)}},S=(v,A,P,M,N,O,$,B,U)=>{const k=A.el=v?v.el:l(""),Y=A.anchor=v?v.anchor:l("");let{patchFlag:q,dynamicChildren:X,slotScopeIds:et}=A;et&&(B=B?B.concat(et):et),v==null?(r(k,P,M),r(Y,P,M),g(A.children||[],P,Y,N,O,$,B,U)):q>0&&q&64&&X&&v.dynamicChildren?(T(v.dynamicChildren,X,P,N,O,$,B),(A.key!=null||N&&A===N.subTree)&&Vf(v,A,!0)):pt(v,A,P,Y,N,O,$,B,U)},E=(v,A,P,M,N,O,$,B,U)=>{A.slotScopeIds=B,v==null?A.shapeFlag&512?N.ctx.activate(A,P,M,$,U):ue(A,P,M,N,O,$,U):Ve(v,A,U)},ue=(v,A,P,M,N,O,$)=>{const B=v.component=Xg(v,M,N);if(pf(v)&&(B.ctx.renderer=De),Jg(B,!1,$),B.asyncDep){if(N&&N.registerDep(B,Pt,$),!v.el){const U=B.subTree=ve(rn);K(null,U,A,P),v.placeholder=U.el}}else Pt(B,v,A,P,N,O,$)},Ve=(v,A,P)=>{const M=A.component=v.component;if(jg(v,A,P))if(M.asyncDep&&!M.asyncResolved){it(M,A,P);return}else M.next=A,M.update();else A.el=v.el,M.vnode=A},Pt=(v,A,P,M,N,O,$)=>{const B=()=>{if(v.isMounted){let{next:q,bu:X,u:et,parent:Z,vnode:ot}=v;{const te=Df(v);if(te){q&&(q.el=ot.el,it(v,q,$)),te.asyncDep.then(()=>{v.isUnmounted||B()});return}}let ht=q,Kt;$n(v,!1),q?(q.el=ot.el,it(v,q,$)):q=ot,X&&Ii(X),(Kt=q.props&&q.props.onVnodeBeforeUpdate)&&xe(Kt,Z,q,ot),$n(v,!0);const Wt=Jc(v),Ee=v.subTree;v.subTree=Wt,F(Ee,Wt,m(Ee.el),ze(Ee),v,N,O),q.el=Wt.el,ht===null&&$g(v,Wt.el),et&&_e(et,N),(Kt=q.props&&q.props.onVnodeUpdated)&&_e(()=>xe(Kt,Z,q,ot),N)}else{let q;const{el:X,props:et}=A,{bm:Z,m:ot,parent:ht,root:Kt,type:Wt}=v,Ee=Ar(A);$n(v,!1),Z&&Ii(Z),!Ee&&(q=et&&et.onVnodeBeforeMount)&&xe(q,ht,A),$n(v,!0);{Kt.ce&&Kt.ce._def.shadowRoot!==!1&&Kt.ce._injectChildStyle(Wt);const te=v.subTree=Jc(v);F(null,te,P,M,v,N,O),A.el=te.el}if(ot&&_e(ot,N),!Ee&&(q=et&&et.onVnodeMounted)){const te=A;_e(()=>xe(q,ht,te),N)}(A.shapeFlag&256||ht&&Ar(ht.vnode)&&ht.vnode.shapeFlag&256)&&v.a&&_e(v.a,N),v.isMounted=!0,A=P=M=null}};v.scope.on();const U=v.effect=new Hh(B);v.scope.off();const k=v.update=U.run.bind(U),Y=v.job=U.runIfDirty.bind(U);Y.i=v,Y.id=v.uid,U.scheduler=()=>ol(Y),$n(v,!0),k()},it=(v,A,P)=>{A.component=v;const M=v.vnode.props;v.vnode=A,v.next=null,Ag(v,A.props,M,P),Cg(v,A.children,P),en(),qc(v),nn()},pt=(v,A,P,M,N,O,$,B,U=!1)=>{const k=v&&v.children,Y=v?v.shapeFlag:0,q=A.children,{patchFlag:X,shapeFlag:et}=A;if(X>0){if(X&128){On(k,q,P,M,N,O,$,B,U);return}else if(X&256){be(k,q,P,M,N,O,$,B,U);return}}et&8?(Y&16&&Mn(k,N,O),q!==k&&d(P,q)):Y&16?et&16?On(k,q,P,M,N,O,$,B,U):Mn(k,N,O,!0):(Y&8&&d(P,""),et&16&&g(q,P,M,N,O,$,B,U))},be=(v,A,P,M,N,O,$,B,U)=>{v=v||Tr,A=A||Tr;const k=v.length,Y=A.length,q=Math.min(k,Y);let X;for(X=0;X<q;X++){const et=A[X]=U?mn(A[X]):ke(A[X]);F(v[X],et,P,null,N,O,$,B,U)}k>Y?Mn(v,N,O,!0,!1,q):g(A,P,M,N,O,$,B,U,q)},On=(v,A,P,M,N,O,$,B,U)=>{let k=0;const Y=A.length;let q=v.length-1,X=Y-1;for(;k<=q&&k<=X;){const et=v[k],Z=A[k]=U?mn(A[k]):ke(A[k]);if(is(et,Z))F(et,Z,P,null,N,O,$,B,U);else break;k++}for(;k<=q&&k<=X;){const et=v[q],Z=A[X]=U?mn(A[X]):ke(A[X]);if(is(et,Z))F(et,Z,P,null,N,O,$,B,U);else break;q--,X--}if(k>q){if(k<=X){const et=X+1,Z=et<Y?A[et].el:M;for(;k<=X;)F(null,A[k]=U?mn(A[k]):ke(A[k]),P,Z,N,O,$,B,U),k++}}else if(k>X)for(;k<=q;)Bt(v[k],N,O,!0),k++;else{const et=k,Z=k,ot=new Map;for(k=Z;k<=X;k++){const Gt=A[k]=U?mn(A[k]):ke(A[k]);Gt.key!=null&&ot.set(Gt.key,k)}let ht,Kt=0;const Wt=X-Z+1;let Ee=!1,te=0;const cn=new Array(Wt);for(k=0;k<Wt;k++)cn[k]=0;for(k=et;k<=q;k++){const Gt=v[k];if(Kt>=Wt){Bt(Gt,N,O,!0);continue}let Te;if(Gt.key!=null)Te=ot.get(Gt.key);else for(ht=Z;ht<=X;ht++)if(cn[ht-Z]===0&&is(Gt,A[ht])){Te=ht;break}Te===void 0?Bt(Gt,N,O,!0):(cn[Te-Z]=k+1,Te>=te?te=Te:Ee=!0,F(Gt,A[Te],P,null,N,O,$,B,U),Kt++)}const Hr=Ee?xg(cn):Tr;for(ht=Hr.length-1,k=Wt-1;k>=0;k--){const Gt=Z+k,Te=A[Gt],Xs=A[Gt+1],or=Gt+1<Y?Xs.el||Xs.placeholder:M;cn[k]===0?F(null,Te,P,or,N,O,$,B,U):Ee&&(ht<0||k!==Hr[ht]?He(Te,P,or,2):ht--)}}},He=(v,A,P,M,N=null)=>{const{el:O,type:$,transition:B,children:U,shapeFlag:k}=v;if(k&6){He(v.component.subTree,A,P,M);return}if(k&128){v.suspense.move(A,P,M);return}if(k&64){$.move(v,A,P,De);return}if($===kt){r(O,A,P);for(let q=0;q<U.length;q++)He(U[q],A,P,M);r(v.anchor,A,P);return}if($===ea){Q(v,A,P);return}if(M!==2&&k&1&&B)if(M===0)B.beforeEnter(O),r(O,A,P),_e(()=>B.enter(O),N);else{const{leave:q,delayLeave:X,afterLeave:et}=B,Z=()=>{v.ctx.isUnmounted?s(O):r(O,A,P)},ot=()=>{O._isLeaving&&O[tg](!0),q(O,()=>{Z(),et&&et()})};X?X(O,Z,ot):ot()}else r(O,A,P)},Bt=(v,A,P,M=!1,N=!1)=>{const{type:O,props:$,ref:B,children:U,dynamicChildren:k,shapeFlag:Y,patchFlag:q,dirs:X,cacheIndex:et}=v;if(q===-2&&(N=!1),B!=null&&(en(),ms(B,null,P,v,!0),nn()),et!=null&&(A.renderCache[et]=void 0),Y&256){A.ctx.deactivate(v);return}const Z=Y&1&&X,ot=!Ar(v);let ht;if(ot&&(ht=$&&$.onVnodeBeforeUnmount)&&xe(ht,A,v),Y&6)kn(v.component,P,M);else{if(Y&128){v.suspense.unmount(P,M);return}Z&&jn(v,null,A,"beforeUnmount"),Y&64?v.type.remove(v,A,P,De,M):k&&!k.hasOnce&&(O!==kt||q>0&&q&64)?Mn(k,A,P,!1,!0):(O===kt&&q&384||!N&&Y&16)&&Mn(U,A,P),M&&jt(v)}(ot&&(ht=$&&$.onVnodeUnmounted)||Z)&&_e(()=>{ht&&xe(ht,A,v),Z&&jn(v,null,A,"unmounted")},P)},jt=v=>{const{type:A,el:P,anchor:M,transition:N}=v;if(A===kt){No(P,M);return}if(A===ea){z(v);return}const O=()=>{s(P),N&&!N.persisted&&N.afterLeave&&N.afterLeave()};if(v.shapeFlag&1&&N&&!N.persisted){const{leave:$,delayLeave:B}=N,U=()=>$(P,O);B?B(v.el,O,U):U()}else O()},No=(v,A)=>{let P;for(;v!==A;)P=y(v),s(v),v=P;s(A)},kn=(v,A,P)=>{const{bum:M,scope:N,job:O,subTree:$,um:B,m:U,a:k}=v;Xc(U),Xc(k),M&&Ii(M),N.stop(),O&&(O.flags|=8,Bt($,v,A,P)),B&&_e(B,A),_e(()=>{v.isUnmounted=!0},A)},Mn=(v,A,P,M=!1,N=!1,O=0)=>{for(let $=O;$<v.length;$++)Bt(v[$],A,P,M,N)},ze=v=>{if(v.shapeFlag&6)return ze(v.component.subTree);if(v.shapeFlag&128)return v.suspense.next();const A=y(v.anchor||v.el),P=A&&A[Ym];return P?y(P):A};let $r=!1;const Qs=(v,A,P)=>{v==null?A._vnode&&Bt(A._vnode,null,null,!0):F(A._vnode||null,v,A,null,null,null,P),A._vnode=v,$r||($r=!0,qc(),uf(),$r=!1)},De={p:F,um:Bt,m:He,r:jt,mt:ue,mc:g,pc:pt,pbc:T,n:ze,o:e};return{render:Qs,hydrate:void 0,createApp:Eg(Qs)}}function ta({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function $n({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Dg(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Vf(e,t,n=!1){const r=e.children,s=t.children;if(nt(r)&&nt(s))for(let i=0;i<r.length;i++){const a=r[i];let l=s[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[i]=mn(s[i]),l.el=a.el),!n&&l.patchFlag!==-2&&Vf(a,l)),l.type===mo&&l.patchFlag!==-1&&(l.el=a.el),l.type===rn&&!l.el&&(l.el=a.el)}}function xg(e){const t=e.slice(),n=[0];let r,s,i,a,l;const u=e.length;for(r=0;r<u;r++){const f=e[r];if(f!==0){if(s=n[n.length-1],e[s]<f){t[r]=s,n.push(r);continue}for(i=0,a=n.length-1;i<a;)l=i+a>>1,e[n[l]]<f?i=l+1:a=l;f<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,a=n[i-1];i-- >0;)n[i]=a,a=t[a];return n}function Df(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Df(t)}function Xc(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Ng=Symbol.for("v-scx"),Og=()=>_s(Ng);function Ai(e,t,n){return xf(e,t,n)}function xf(e,t,n=It){const{immediate:r,deep:s,flush:i,once:a}=n,l=ce({},n),u=t&&r||!t&&i!=="post";let f;if(Ps){if(i==="sync"){const b=Og();f=b.__watcherHandles||(b.__watcherHandles=[])}else if(!u){const b=()=>{};return b.stop=Me,b.resume=Me,b.pause=Me,b}}const d=pe;l.call=(b,V,F)=>je(b,d,V,F);let m=!1;i==="post"?l.scheduler=b=>{_e(b,d&&d.suspense)}:i!=="sync"&&(m=!0,l.scheduler=(b,V)=>{V?b():ol(b)}),l.augmentJob=b=>{t&&(b.flags|=4),m&&(b.flags|=2,d&&(b.id=d.uid,b.i=d))};const y=Gm(e,t,l);return Ps&&(f?f.push(y):u&&y()),y}function kg(e,t,n){const r=this.proxy,s=Ut(e)?e.includes(".")?Nf(r,e):()=>r[e]:e.bind(r,r);let i;at(t)?i=t:(i=t.handler,n=t);const a=js(this),l=xf(s,i.bind(r),n);return a(),l}function Nf(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const Mg=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${bn(t)}Modifiers`]||e[`${tr(t)}Modifiers`];function Fg(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||It;let s=n;const i=t.startsWith("update:"),a=i&&Mg(r,t.slice(7));a&&(a.trim&&(s=n.map(d=>Ut(d)?d.trim():d)),a.number&&(s=n.map(Xa)));let l,u=r[l=Go(t)]||r[l=Go(bn(t))];!u&&i&&(u=r[l=Go(tr(t))]),u&&je(u,e,6,s);const f=r[l+"Once"];if(f){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,je(f,e,6,s)}}const Lg=new WeakMap;function Of(e,t,n=!1){const r=n?Lg:t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let a={},l=!1;if(!at(e)){const u=f=>{const d=Of(f,t,!0);d&&(l=!0,ce(a,d))};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!i&&!l?(At(e)&&r.set(e,null),null):(nt(i)?i.forEach(u=>a[u]=null):ce(a,i),At(e)&&r.set(e,a),a)}function po(e,t){return!e||!oo(t)?!1:(t=t.slice(2).replace(/Once$/,""),_t(e,t[0].toLowerCase()+t.slice(1))||_t(e,tr(t))||_t(e,t))}function Jc(e){const{type:t,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:a,attrs:l,emit:u,render:f,renderCache:d,props:m,data:y,setupState:b,ctx:V,inheritAttrs:F}=e,L=Li(e);let K,W;try{if(n.shapeFlag&4){const z=s||r,lt=z;K=ke(f.call(lt,z,d,m,b,y,V)),W=l}else{const z=t;K=ke(z.length>1?z(m,{attrs:l,slots:a,emit:u}):z(m,null)),W=t.props?l:Ug(l)}}catch(z){ys.length=0,ho(z,e,1),K=ve(rn)}let Q=K;if(W&&F!==!1){const z=Object.keys(W),{shapeFlag:lt}=Q;z.length&&lt&7&&(i&&z.some(Wa)&&(W=Bg(W,i)),Q=Cr(Q,W,!1,!0))}return n.dirs&&(Q=Cr(Q,null,!1,!0),Q.dirs=Q.dirs?Q.dirs.concat(n.dirs):n.dirs),n.transition&&al(Q,n.transition),K=Q,Li(L),K}const Ug=e=>{let t;for(const n in e)(n==="class"||n==="style"||oo(n))&&((t||(t={}))[n]=e[n]);return t},Bg=(e,t)=>{const n={};for(const r in e)(!Wa(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function jg(e,t,n){const{props:r,children:s,component:i}=e,{props:a,children:l,patchFlag:u}=t,f=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return r?Yc(r,a,f):!!a;if(u&8){const d=t.dynamicProps;for(let m=0;m<d.length;m++){const y=d[m];if(a[y]!==r[y]&&!po(f,y))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:r===a?!1:r?a?Yc(r,a,f):!0:!!a;return!1}function Yc(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!po(n,i))return!0}return!1}function $g({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const kf=e=>e.__isSuspense;function qg(e,t){t&&t.pendingBranch?nt(e)?t.effects.push(...e):t.effects.push(e):Jm(e)}const kt=Symbol.for("v-fgt"),mo=Symbol.for("v-txt"),rn=Symbol.for("v-cmt"),ea=Symbol.for("v-stc"),ys=[];let ye=null;function vt(e=!1){ys.push(ye=e?null:[])}function Hg(){ys.pop(),ye=ys[ys.length-1]||null}let Cs=1;function Zc(e,t=!1){Cs+=e,e<0&&ye&&t&&(ye.hasOnce=!0)}function Mf(e){return e.dynamicChildren=Cs>0?ye||Tr:null,Hg(),Cs>0&&ye&&ye.push(e),e}function Nt(e,t,n,r,s,i){return Mf(xt(e,t,n,r,s,i,!0))}function _n(e,t,n,r,s){return Mf(ve(e,t,n,r,s,!0))}function ul(e){return e?e.__v_isVNode===!0:!1}function is(e,t){return e.type===t.type&&e.key===t.key}const Ff=({key:e})=>e??null,bi=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Ut(e)||Mt(e)||at(e)?{i:le,r:e,k:t,f:!!n}:e:null);function xt(e,t=null,n=null,r=0,s=null,i=e===kt?0:1,a=!1,l=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Ff(t),ref:t&&bi(t),scopeId:ff,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:le};return l?(hl(u,n),i&128&&e.normalize(u)):n&&(u.shapeFlag|=Ut(n)?8:16),Cs>0&&!a&&ye&&(u.patchFlag>0||i&6)&&u.patchFlag!==32&&ye.push(u),u}const ve=zg;function zg(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===fg)&&(e=rn),ul(e)){const l=Cr(e,t,!0);return n&&hl(l,n),Cs>0&&!i&&ye&&(l.shapeFlag&6?ye[ye.indexOf(e)]=l:ye.push(l)),l.patchFlag=-2,l}if(e_(e)&&(e=e.__vccOpts),t){t=Kg(t);let{class:l,style:u}=t;l&&!Ut(l)&&(t.class=Ja(l)),At(u)&&(sl(u)&&!nt(u)&&(u=ce({},u)),t.style=Mr(u))}const a=Ut(e)?1:kf(e)?128:Zm(e)?64:At(e)?4:at(e)?2:0;return xt(e,t,n,r,s,a,i,!0)}function Kg(e){return e?sl(e)||Af(e)?ce({},e):e:null}function Cr(e,t,n=!1,r=!1){const{props:s,ref:i,patchFlag:a,children:l,transition:u}=e,f=t?Wg(s||{},t):s,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:f,key:f&&Ff(f),ref:t&&t.ref?n&&i?nt(i)?i.concat(bi(t)):[i,bi(t)]:bi(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==kt?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:u,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Cr(e.ssContent),ssFallback:e.ssFallback&&Cr(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return u&&r&&al(d,u.clone(d)),d}function gr(e=" ",t=0){return ve(mo,null,e,t)}function tu(e="",t=!1){return t?(vt(),_n(rn,null,e)):ve(rn,null,e)}function ke(e){return e==null||typeof e=="boolean"?ve(rn):nt(e)?ve(kt,null,e.slice()):ul(e)?mn(e):ve(mo,null,String(e))}function mn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Cr(e)}function hl(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(nt(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),hl(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!Af(t)?t._ctx=le:s===3&&le&&(le.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else at(t)?(t={default:t,_ctx:le},n=32):(t=String(t),r&64?(n=16,t=[gr(t)]):n=8);e.children=t,e.shapeFlag|=n}function Wg(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=Ja([t.class,r.class]));else if(s==="style")t.style=Mr([t.style,r.style]);else if(oo(s)){const i=t[s],a=r[s];a&&i!==a&&!(nt(i)&&i.includes(a))&&(t[s]=i?[].concat(i,a):a)}else s!==""&&(t[s]=r[s])}return t}function xe(e,t,n,r=null){je(e,t,7,[n,r])}const Gg=Tf();let Qg=0;function Xg(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||Gg,i={uid:Qg++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new jh(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Sf(r,s),emitsOptions:Of(r,s),emit:null,emitted:null,propsDefaults:It,inheritAttrs:r.inheritAttrs,ctx:It,data:It,props:It,attrs:It,slots:It,refs:It,setupState:It,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Fg.bind(null,i),e.ce&&e.ce(i),i}let pe=null;const Lf=()=>pe||le;let ji,Ta;{const e=lo(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),i=>{s.length>1?s.forEach(a=>a(i)):s[0](i)}};ji=t("__VUE_INSTANCE_SETTERS__",n=>pe=n),Ta=t("__VUE_SSR_SETTERS__",n=>Ps=n)}const js=e=>{const t=pe;return ji(e),e.scope.on(),()=>{e.scope.off(),ji(t)}},eu=()=>{pe&&pe.scope.off(),ji(null)};function Uf(e){return e.vnode.shapeFlag&4}let Ps=!1;function Jg(e,t=!1,n=!1){t&&Ta(t);const{props:r,children:s}=e.vnode,i=Uf(e);wg(e,r,i,t),Rg(e,s,n||t);const a=i?Yg(e,t):void 0;return t&&Ta(!1),a}function Yg(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,dg);const{setup:r}=n;if(r){en();const s=e.setupContext=r.length>1?t_(e):null,i=js(e),a=Us(r,e,0,[e.props,s]),l=Nh(a);if(nn(),i(),(l||e.sp)&&!Ar(e)&&df(e),l){if(a.then(eu,eu),t)return a.then(u=>{nu(e,u)}).catch(u=>{ho(u,e,0)});e.asyncDep=a}else nu(e,a)}else Bf(e)}function nu(e,t,n){at(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:At(t)&&(e.setupState=of(t)),Bf(e)}function Bf(e,t,n){const r=e.type;e.render||(e.render=r.render||Me);{const s=js(e);en();try{pg(e)}finally{nn(),s()}}}const Zg={get(e,t){return oe(e,"get",""),e[t]}};function t_(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Zg),slots:e.slots,emit:e.emit,expose:t}}function go(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(of(il(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in gs)return gs[n](e)},has(t,n){return n in t||n in gs}})):e.proxy}function e_(e){return at(e)&&"__vccOpts"in e}const jf=(e,t)=>Km(e,t,Ps),n_="3.5.24";/**
* @vue/runtime-dom v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ia;const ru=typeof window<"u"&&window.trustedTypes;if(ru)try{Ia=ru.createPolicy("vue",{createHTML:e=>e})}catch{}const $f=Ia?e=>Ia.createHTML(e):e=>e,r_="http://www.w3.org/2000/svg",s_="http://www.w3.org/1998/Math/MathML",Qe=typeof document<"u"?document:null,su=Qe&&Qe.createElement("template"),i_={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?Qe.createElementNS(r_,e):t==="mathml"?Qe.createElementNS(s_,e):n?Qe.createElement(e,{is:n}):Qe.createElement(e);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>Qe.createTextNode(e),createComment:e=>Qe.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Qe.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const a=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{su.innerHTML=$f(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const l=su.content;if(r==="svg"||r==="mathml"){const u=l.firstChild;for(;u.firstChild;)l.appendChild(u.firstChild);l.removeChild(u)}t.insertBefore(l,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},o_=Symbol("_vtc");function a_(e,t,n){const r=e[o_];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const iu=Symbol("_vod"),l_=Symbol("_vsh"),c_=Symbol(""),u_=/(?:^|;)\s*display\s*:/;function h_(e,t,n){const r=e.style,s=Ut(n);let i=!1;if(n&&!s){if(t)if(Ut(t))for(const a of t.split(";")){const l=a.slice(0,a.indexOf(":")).trim();n[l]==null&&Si(r,l,"")}else for(const a in t)n[a]==null&&Si(r,a,"");for(const a in n)a==="display"&&(i=!0),Si(r,a,n[a])}else if(s){if(t!==n){const a=r[c_];a&&(n+=";"+a),r.cssText=n,i=u_.test(n)}}else t&&e.removeAttribute("style");iu in e&&(e[iu]=i?r.display:"",e[l_]&&(r.display="none"))}const ou=/\s*!important$/;function Si(e,t,n){if(nt(n))n.forEach(r=>Si(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=f_(e,t);ou.test(n)?e.setProperty(tr(r),n.replace(ou,""),"important"):e[r]=n}}const au=["Webkit","Moz","ms"],na={};function f_(e,t){const n=na[t];if(n)return n;let r=bn(t);if(r!=="filter"&&r in e)return na[t]=r;r=Mh(r);for(let s=0;s<au.length;s++){const i=au[s]+r;if(i in e)return na[t]=i}return t}const lu="http://www.w3.org/1999/xlink";function cu(e,t,n,r,s,i=gm(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(lu,t.slice(6,t.length)):e.setAttributeNS(lu,t,n):n==null||i&&!Lh(n)?e.removeAttribute(t):e.setAttribute(t,i?"":Pe(n)?String(n):n)}function uu(e,t,n,r,s){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?$f(n):n);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?e.getAttribute("value")||"":e.value,u=n==null?e.type==="checkbox"?"on":"":String(n);(l!==u||!("_value"in e))&&(e.value=u),n==null&&e.removeAttribute(t),e._value=n;return}let a=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=Lh(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{e[t]=n}catch{}a&&e.removeAttribute(s||t)}function Kn(e,t,n,r){e.addEventListener(t,n,r)}function d_(e,t,n,r){e.removeEventListener(t,n,r)}const hu=Symbol("_vei");function p_(e,t,n,r,s=null){const i=e[hu]||(e[hu]={}),a=i[t];if(r&&a)a.value=r;else{const[l,u]=m_(t);if(r){const f=i[t]=y_(r,s);Kn(e,l,f,u)}else a&&(d_(e,l,a,u),i[t]=void 0)}}const fu=/(?:Once|Passive|Capture)$/;function m_(e){let t;if(fu.test(e)){t={};let r;for(;r=e.match(fu);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):tr(e.slice(2)),t]}let ra=0;const g_=Promise.resolve(),__=()=>ra||(g_.then(()=>ra=0),ra=Date.now());function y_(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;je(v_(r,n.value),t,5,[r])};return n.value=e,n.attached=__(),n}function v_(e,t){if(nt(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const du=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,E_=(e,t,n,r,s,i)=>{const a=s==="svg";t==="class"?a_(e,r,a):t==="style"?h_(e,n,r):oo(t)?Wa(t)||p_(e,t,n,r,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):T_(e,t,r,a))?(uu(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&cu(e,t,r,a,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ut(r))?uu(e,bn(t),r,i,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),cu(e,t,r,a))};function T_(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&du(t)&&at(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return du(t)&&Ut(n)?!1:t in e}const $i=e=>{const t=e.props["onUpdate:modelValue"]||!1;return nt(t)?n=>Ii(t,n):t};function I_(e){e.target.composing=!0}function pu(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const br=Symbol("_assign");function mu(e,t,n){return t&&(e=e.trim()),n&&(e=Xa(e)),e}const w_={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e[br]=$i(s);const i=r||s.props&&s.props.type==="number";Kn(e,t?"change":"input",a=>{a.target.composing||e[br](mu(e.value,n,i))}),(n||i)&&Kn(e,"change",()=>{e.value=mu(e.value,n,i)}),t||(Kn(e,"compositionstart",I_),Kn(e,"compositionend",pu),Kn(e,"change",pu))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},a){if(e[br]=$i(a),e.composing)return;const l=(i||e.type==="number")&&!/^0\d/.test(e.value)?Xa(e.value):e.value,u=t??"";l!==u&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||s&&e.value.trim()===u)||(e.value=u))}},mi={created(e,{value:t},n){e.checked=Ni(t,n.props.value),e[br]=$i(n),Kn(e,"change",()=>{e[br](A_(e))})},beforeUpdate(e,{value:t,oldValue:n},r){e[br]=$i(r),t!==n&&(e.checked=Ni(t,r.props.value))}};function A_(e){return"_value"in e?e._value:e.value}const b_=ce({patchProp:E_},i_);let gu;function S_(){return gu||(gu=Pg(b_))}const R_=((...e)=>{const t=S_().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=P_(r);if(!s)return;const i=t._component;!at(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=n(s,!1,C_(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},t});function C_(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function P_(e){return Ut(e)?document.querySelector(e):e}/*!
 * pinia v3.0.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let qf;const _o=e=>qf=e,Hf=Symbol();function wa(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var vs;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(vs||(vs={}));function V_(){const e=$h(!0),t=e.run(()=>sf({}));let n=[],r=[];const s=il({install(i){_o(s),s._a=i,i.provide(Hf,s),i.config.globalProperties.$pinia=s,r.forEach(a=>n.push(a)),r=[]},use(i){return this._a?n.push(i):r.push(i),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return s}const zf=()=>{};function _u(e,t,n,r=zf){e.add(t);const s=()=>{e.delete(t)&&r()};return!n&&qh()&&ym(s),s}function fr(e,...t){e.forEach(n=>{n(...t)})}const D_=e=>e(),yu=Symbol(),sa=Symbol();function Aa(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,r)=>e.set(r,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],s=e[n];wa(s)&&wa(r)&&e.hasOwnProperty(n)&&!Mt(r)&&!En(r)?e[n]=Aa(s,r):e[n]=r}return e}const x_=Symbol();function N_(e){return!wa(e)||!Object.prototype.hasOwnProperty.call(e,x_)}const{assign:dn}=Object;function O_(e){return!!(Mt(e)&&e.effect)}function k_(e,t,n,r){const{state:s,actions:i,getters:a}=t,l=n.state.value[e];let u;function f(){l||(n.state.value[e]=s?s():{});const d=$m(n.state.value[e]);return dn(d,i,Object.keys(a||{}).reduce((m,y)=>(m[y]=il(jf(()=>{_o(n);const b=n._s.get(e);return a[y].call(b,b)})),m),{}))}return u=Kf(e,f,t,n,r,!0),u}function Kf(e,t,n={},r,s,i){let a;const l=dn({actions:{}},n),u={deep:!0};let f,d,m=new Set,y=new Set,b;const V=r.state.value[e];!i&&!V&&(r.state.value[e]={}),sf({});let F;function L(g){let _;f=d=!1,typeof g=="function"?(g(r.state.value[e]),_={type:vs.patchFunction,storeId:e,events:b}):(Aa(r.state.value[e],g),_={type:vs.patchObject,payload:g,storeId:e,events:b});const T=F=Symbol();lf().then(()=>{F===T&&(f=!0)}),d=!0,fr(m,_,r.state.value[e])}const K=i?function(){const{state:_}=n,T=_?_():{};this.$patch(w=>{dn(w,T)})}:zf;function W(){a.stop(),m.clear(),y.clear(),r._s.delete(e)}const Q=(g,_="")=>{if(yu in g)return g[sa]=_,g;const T=function(){_o(r);const w=Array.from(arguments),S=new Set,E=new Set;function ue(it){S.add(it)}function Ve(it){E.add(it)}fr(y,{args:w,name:T[sa],store:lt,after:ue,onError:Ve});let Pt;try{Pt=g.apply(this&&this.$id===e?this:lt,w)}catch(it){throw fr(E,it),it}return Pt instanceof Promise?Pt.then(it=>(fr(S,it),it)).catch(it=>(fr(E,it),Promise.reject(it))):(fr(S,Pt),Pt)};return T[yu]=!0,T[sa]=_,T},z={_p:r,$id:e,$onAction:_u.bind(null,y),$patch:L,$reset:K,$subscribe(g,_={}){const T=_u(m,g,_.detached,()=>w()),w=a.run(()=>Ai(()=>r.state.value[e],S=>{(_.flush==="sync"?d:f)&&g({storeId:e,type:vs.direct,events:b},S)},dn({},u,_)));return T},$dispose:W},lt=uo(z);r._s.set(e,lt);const I=(r._a&&r._a.runWithContext||D_)(()=>r._e.run(()=>(a=$h()).run(()=>t({action:Q}))));for(const g in I){const _=I[g];if(Mt(_)&&!O_(_)||En(_))i||(V&&N_(_)&&(Mt(_)?_.value=V[g]:Aa(_,V[g])),r.state.value[e][g]=_);else if(typeof _=="function"){const T=Q(_,g);I[g]=T,l.actions[g]=_}}return dn(lt,I),dn(gt(lt),I),Object.defineProperty(lt,"$state",{get:()=>r.state.value[e],set:g=>{L(_=>{dn(_,g)})}}),r._p.forEach(g=>{dn(lt,a.run(()=>g({store:lt,app:r._a,pinia:r,options:l})))}),V&&i&&n.hydrate&&n.hydrate(lt.$state,V),f=!0,d=!0,lt}/*! #__NO_SIDE_EFFECTS__ */function M_(e,t,n){let r;const s=typeof t=="function";r=s?n:t;function i(a,l){const u=Ig();return a=a||(u?_s(Hf,null):null),a&&_o(a),a=qf,a._s.has(e)||(s?Kf(e,t,r,a):k_(e,r,a)),a._s.get(e)}return i.$id=e,i}function F_(e,t){if(e==null)return;let n=e;for(let r=0;r<t.length;r++){if(n===void 0||n[t[r]]===void 0)return;if(n===null||n[t[r]]===null)return null;n=n[t[r]]}return n}function fl(e,t,n){if(n.length===0)return t;const r=n[0];return n.length>1&&(t=fl(typeof e!="object"||e===null||!Object.prototype.hasOwnProperty.call(e,r)?Number.isInteger(Number(n[1]))?[]:{}:e[r],t,Array.prototype.slice.call(n,1))),Number.isInteger(Number(r))&&Array.isArray(e)?e.slice()[r]:Object.assign({},e,{[r]:t})}function Wf(e,t){if(e==null||t.length===0)return e;if(t.length===1){if(e==null)return e;if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.slice.call(e,0).splice(t[0],1);const n={};for(const r in e)n[r]=e[r];return delete n[t[0]],n}if(e[t[0]]==null){if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.concat.call([],e);const n={};for(const r in e)n[r]=e[r];return n}return fl(e,Wf(e[t[0]],Array.prototype.slice.call(t,1)),[t[0]])}function Gf(e,t){return t.map(n=>n.split(".")).map(n=>[n,F_(e,n)]).filter(n=>n[1]!==void 0).reduce((n,r)=>fl(n,r[1],r[0]),{})}function Qf(e,t){return t.map(n=>n.split(".")).reduce((n,r)=>Wf(n,r),e)}function vu(e,{storage:t,serializer:n,key:r,debug:s,pick:i,omit:a,beforeHydrate:l,afterHydrate:u},f,d=!0){try{d&&(l==null||l(f));const m=t.getItem(r);if(m){const y=n.deserialize(m),b=i?Gf(y,i):y,V=a?Qf(b,a):b;e.$patch(V)}d&&(u==null||u(f))}catch(m){s&&console.error("[pinia-plugin-persistedstate]",m)}}function Eu(e,{storage:t,serializer:n,key:r,debug:s,pick:i,omit:a}){try{const l=i?Gf(e,i):e,u=a?Qf(l,a):l,f=n.serialize(u);t.setItem(r,f)}catch(l){s&&console.error("[pinia-plugin-persistedstate]",l)}}function L_(e,t){return typeof e=="function"?e(t):typeof e=="string"?e:t}function U_(e,t,n){const{pinia:r,store:s,options:{persist:i=n}}=e;if(!i)return;// v8 ignore if -- @preserve
if(!(s.$id in r.state.value)){const l=r._s.get(s.$id.replace("__hot:",""));l&&Promise.resolve().then(()=>l.$persist());return}const a=(Array.isArray(i)?i:i===!0?[{}]:[i]).map(t);s.$hydrate=({runHooks:l=!0}={})=>{a.forEach(u=>{vu(s,u,e,l)})},s.$persist=()=>{a.forEach(l=>{Eu(s.$state,l)})},a.forEach(l=>{vu(s,l,e),s.$subscribe((u,f)=>Eu(f,l),{detached:!0})})}function B_(e={}){return function(t){U_(t,n=>{const r=L_(n.key,t.store.$id);return{key:(e.key?e.key:s=>s)(r),debug:n.debug??e.debug??!1,serializer:n.serializer??e.serializer??{serialize:s=>JSON.stringify(s),deserialize:s=>JSON.parse(s)},storage:n.storage??e.storage??window.localStorage,beforeHydrate:n.beforeHydrate??e.beforeHydrate,afterHydrate:n.afterHydrate??e.afterHydrate,pick:n.pick,omit:n.omit}},e.auto??!1)}}var j_=B_();const er=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},$_={},q_={class:"carafe"};function H_(e,t){return vt(),Nt("div",q_,[wi(e.$slots,"top",{},void 0,!0),wi(e.$slots,"mid",{},void 0,!0),wi(e.$slots,"bottom",{},void 0,!0)])}const z_=er($_,[["render",H_],["__scopeId","data-v-43d2bfc5"]]),K_={},W_={class:"mug"};function G_(e,t){return vt(),Nt("div",W_,[wi(e.$slots,"default")])}const Q_=er(K_,[["render",G_]]),Tu=["Hot","Cold"],X_=()=>{};var Iu={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xf=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},J_=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=e[n++],a=e[n++],l=e[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return t.join("")},Jf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const i=e[s],a=s+1<e.length,l=a?e[s+1]:0,u=s+2<e.length,f=u?e[s+2]:0,d=i>>2,m=(i&3)<<4|l>>4;let y=(l&15)<<2|f>>6,b=f&63;u||(b=64,a||(y=64)),r.push(n[d],n[m],n[y],n[b])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Xf(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):J_(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const i=n[e.charAt(s++)],l=s<e.length?n[e.charAt(s)]:0;++s;const f=s<e.length?n[e.charAt(s)]:64;++s;const m=s<e.length?n[e.charAt(s)]:64;if(++s,i==null||l==null||f==null||m==null)throw new Y_;const y=i<<2|l>>4;if(r.push(y),f!==64){const b=l<<4&240|f>>2;if(r.push(b),m!==64){const V=f<<6&192|m;r.push(V)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Y_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Z_=function(e){const t=Xf(e);return Jf.encodeByteArray(t,!0)},qi=function(e){return Z_(e).replace(/\./g,"")},ty=function(e){try{return Jf.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny=()=>ey().__FIREBASE_DEFAULTS__,ry=()=>{if(typeof process>"u"||typeof Iu>"u")return;const e=Iu.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},sy=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&ty(e[1]);return t&&JSON.parse(t)},dl=()=>{try{return X_()||ny()||ry()||sy()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},iy=e=>{var t,n;return(n=(t=dl())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},oy=e=>{const t=iy(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Yf=()=>{var e;return(e=dl())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pl(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ly(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",s=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[qi(JSON.stringify(n)),qi(JSON.stringify(a)),""].join(".")}const Es={};function uy(){const e={prod:[],emulator:[]};for(const t of Object.keys(Es))Es[t]?e.emulator.push(t):e.prod.push(t);return e}function hy(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let wu=!1;function fy(e,t){if(typeof window>"u"||typeof document>"u"||!pl(window.location.host)||Es[e]===t||Es[e]||wu)return;Es[e]=t;function n(y){return`__firebase__banner__${y}`}const r="__firebase__banner",i=uy().prod.length>0;function a(){const y=document.getElementById(r);y&&y.remove()}function l(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function u(y,b){y.setAttribute("width","24"),y.setAttribute("id",b),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function f(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{wu=!0,a()},y}function d(y,b){y.setAttribute("id",b),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function m(){const y=hy(r),b=n("text"),V=document.getElementById(b)||document.createElement("span"),F=n("learnmore"),L=document.getElementById(F)||document.createElement("a"),K=n("preprendIcon"),W=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const Q=y.element;l(Q),d(L,F);const z=f();u(W,K),Q.append(W,V,L,z),document.body.appendChild(Q)}i?(V.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function py(){var e;const t=(e=dl())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function my(){return!py()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gy(){try{return typeof indexedDB=="object"}catch{return!1}}function _y(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;t(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy="FirebaseError";class Fr extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=yy,Object.setPrototypeOf(this,Fr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zf.prototype.create)}}class Zf{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},s=`${this.service}/${t}`,i=this.errors[t],a=i?vy(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Fr(s,l,r)}}function vy(e,t){return e.replace(Ey,(n,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const Ey=/\{\$([^}]+)}/g;function Hi(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const i=e[s],a=t[s];if(Au(i)&&Au(a)){if(!Hi(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Au(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pr(e){return e&&e._delegate?e._delegate:e}class Vs{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new ay;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(wy(t))try{this.getOrInitializeService({instanceIdentifier:zn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(t=zn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=zn){return this.instances.has(t)}getOptions(t=zn){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(t,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(t),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&t(a,s),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Iy(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=zn){return this.component?this.component.multipleInstances?t:zn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Iy(e){return e===zn?void 0:e}function wy(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Ty(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(dt||(dt={}));const by={debug:dt.DEBUG,verbose:dt.VERBOSE,info:dt.INFO,warn:dt.WARN,error:dt.ERROR,silent:dt.SILENT},Sy=dt.INFO,Ry={[dt.DEBUG]:"log",[dt.VERBOSE]:"log",[dt.INFO]:"info",[dt.WARN]:"warn",[dt.ERROR]:"error"},Cy=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),s=Ry[t];if(s)console[s](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class td{constructor(t){this.name=t,this._logLevel=Sy,this._logHandler=Cy,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in dt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?by[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,dt.DEBUG,...t),this._logHandler(this,dt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,dt.VERBOSE,...t),this._logHandler(this,dt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,dt.INFO,...t),this._logHandler(this,dt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,dt.WARN,...t),this._logHandler(this,dt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,dt.ERROR,...t),this._logHandler(this,dt.ERROR,...t)}}const Py=(e,t)=>t.some(n=>e instanceof n);let bu,Su;function Vy(){return bu||(bu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Dy(){return Su||(Su=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ed=new WeakMap,ba=new WeakMap,nd=new WeakMap,ia=new WeakMap,ml=new WeakMap;function xy(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{n(Tn(e.result)),s()},a=()=>{r(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&ed.set(n,e)}).catch(()=>{}),ml.set(t,e),t}function Ny(e){if(ba.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});ba.set(e,t)}let Sa={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return ba.get(e);if(t==="objectStoreNames")return e.objectStoreNames||nd.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Tn(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Oy(e){Sa=e(Sa)}function ky(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(oa(this),t,...n);return nd.set(r,t.sort?t.sort():[t]),Tn(r)}:Dy().includes(e)?function(...t){return e.apply(oa(this),t),Tn(ed.get(this))}:function(...t){return Tn(e.apply(oa(this),t))}}function My(e){return typeof e=="function"?ky(e):(e instanceof IDBTransaction&&Ny(e),Py(e,Vy())?new Proxy(e,Sa):e)}function Tn(e){if(e instanceof IDBRequest)return xy(e);if(ia.has(e))return ia.get(e);const t=My(e);return t!==e&&(ia.set(e,t),ml.set(t,e)),t}const oa=e=>ml.get(e);function Fy(e,t,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(e,t),l=Tn(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Tn(a.result),u.oldVersion,u.newVersion,Tn(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const Ly=["get","getKey","getAll","getAllKeys","count"],Uy=["put","add","delete","clear"],aa=new Map;function Ru(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(aa.get(t))return aa.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=Uy.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Ly.includes(n)))return;const i=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let f=u.store;return r&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),s&&u.done]))[0]};return aa.set(t,i),i}Oy(e=>({...e,get:(t,n,r)=>Ru(t,n)||e.get(t,n,r),has:(t,n)=>!!Ru(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(jy(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function jy(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Ra="@firebase/app",Cu="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn=new td("@firebase/app"),$y="@firebase/app-compat",qy="@firebase/analytics-compat",Hy="@firebase/analytics",zy="@firebase/app-check-compat",Ky="@firebase/app-check",Wy="@firebase/auth",Gy="@firebase/auth-compat",Qy="@firebase/database",Xy="@firebase/data-connect",Jy="@firebase/database-compat",Yy="@firebase/functions",Zy="@firebase/functions-compat",tv="@firebase/installations",ev="@firebase/installations-compat",nv="@firebase/messaging",rv="@firebase/messaging-compat",sv="@firebase/performance",iv="@firebase/performance-compat",ov="@firebase/remote-config",av="@firebase/remote-config-compat",lv="@firebase/storage",cv="@firebase/storage-compat",uv="@firebase/firestore",hv="@firebase/ai",fv="@firebase/firestore-compat",dv="firebase",pv="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca="[DEFAULT]",mv={[Ra]:"fire-core",[$y]:"fire-core-compat",[Hy]:"fire-analytics",[qy]:"fire-analytics-compat",[Ky]:"fire-app-check",[zy]:"fire-app-check-compat",[Wy]:"fire-auth",[Gy]:"fire-auth-compat",[Qy]:"fire-rtdb",[Xy]:"fire-data-connect",[Jy]:"fire-rtdb-compat",[Yy]:"fire-fn",[Zy]:"fire-fn-compat",[tv]:"fire-iid",[ev]:"fire-iid-compat",[nv]:"fire-fcm",[rv]:"fire-fcm-compat",[sv]:"fire-perf",[iv]:"fire-perf-compat",[ov]:"fire-rc",[av]:"fire-rc-compat",[lv]:"fire-gcs",[cv]:"fire-gcs-compat",[uv]:"fire-fst",[fv]:"fire-fst-compat",[hv]:"fire-vertex","fire-js":"fire-js",[dv]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi=new Map,gv=new Map,Pa=new Map;function Pu(e,t){try{e.container.addComponent(t)}catch(n){sn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Ki(e){const t=e.name;if(Pa.has(t))return sn.debug(`There were multiple attempts to register component ${t}.`),!1;Pa.set(t,e);for(const n of zi.values())Pu(n,e);for(const n of gv.values())Pu(n,e);return!0}function _v(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function yv(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},In=new Zf("app","Firebase",vv);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Vs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw In.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv=pv;function rd(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:Ca,automaticDataCollectionEnabled:!0},t),s=r.name;if(typeof s!="string"||!s)throw In.create("bad-app-name",{appName:String(s)});if(n||(n=Yf()),!n)throw In.create("no-options");const i=zi.get(s);if(i){if(Hi(n,i.options)&&Hi(r,i.config))return i;throw In.create("duplicate-app",{appName:s})}const a=new Ay(s);for(const u of Pa.values())a.addComponent(u);const l=new Ev(n,r,a);return zi.set(s,l),l}function Iv(e=Ca){const t=zi.get(e);if(!t&&e===Ca&&Yf())return rd();if(!t)throw In.create("no-app",{appName:e});return t}function Sr(e,t,n){var r;let s=(r=mv[e])!==null&&r!==void 0?r:e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const l=[`Unable to register library "${s}" with version "${t}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),sn.warn(l.join(" "));return}Ki(new Vs(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv="firebase-heartbeat-database",Av=1,Ds="firebase-heartbeat-store";let la=null;function sd(){return la||(la=Fy(wv,Av,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Ds)}catch(n){console.warn(n)}}}}).catch(e=>{throw In.create("idb-open",{originalErrorMessage:e.message})})),la}async function bv(e){try{const n=(await sd()).transaction(Ds),r=await n.objectStore(Ds).get(id(e));return await n.done,r}catch(t){if(t instanceof Fr)sn.warn(t.message);else{const n=In.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});sn.warn(n.message)}}}async function Vu(e,t){try{const r=(await sd()).transaction(Ds,"readwrite");await r.objectStore(Ds).put(t,id(e)),await r.done}catch(n){if(n instanceof Fr)sn.warn(n.message);else{const r=In.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});sn.warn(r.message)}}}function id(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv=1024,Rv=30;class Cv{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Vv(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Du();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>Rv){const a=Dv(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){sn.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Du(),{heartbeatsToSend:r,unsentEntries:s}=Pv(this._heartbeatsCache.heartbeats),i=qi(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return sn.warn(n),""}}}function Du(){return new Date().toISOString().substring(0,10)}function Pv(e,t=Sv){const n=[];let r=e.slice();for(const s of e){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),xu(n)>t){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),xu(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Vv{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gy()?_y().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await bv(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Vu(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Vu(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function xu(e){return qi(JSON.stringify({version:2,heartbeats:e})).length}function Dv(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(e){Ki(new Vs("platform-logger",t=>new By(t),"PRIVATE")),Ki(new Vs("heartbeat",t=>new Cv(t),"PRIVATE")),Sr(Ra,Cu,e),Sr(Ra,Cu,"esm2017"),Sr("fire-js","")}xv("");var Nu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wn,od;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(I,g){function _(){}_.prototype=g.prototype,I.D=g.prototype,I.prototype=new _,I.prototype.constructor=I,I.C=function(T,w,S){for(var E=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)E[ue-2]=arguments[ue];return g.prototype[w].apply(T,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,g,_){_||(_=0);var T=Array(16);if(typeof g=="string")for(var w=0;16>w;++w)T[w]=g.charCodeAt(_++)|g.charCodeAt(_++)<<8|g.charCodeAt(_++)<<16|g.charCodeAt(_++)<<24;else for(w=0;16>w;++w)T[w]=g[_++]|g[_++]<<8|g[_++]<<16|g[_++]<<24;g=I.g[0],_=I.g[1],w=I.g[2];var S=I.g[3],E=g+(S^_&(w^S))+T[0]+3614090360&4294967295;g=_+(E<<7&4294967295|E>>>25),E=S+(w^g&(_^w))+T[1]+3905402710&4294967295,S=g+(E<<12&4294967295|E>>>20),E=w+(_^S&(g^_))+T[2]+606105819&4294967295,w=S+(E<<17&4294967295|E>>>15),E=_+(g^w&(S^g))+T[3]+3250441966&4294967295,_=w+(E<<22&4294967295|E>>>10),E=g+(S^_&(w^S))+T[4]+4118548399&4294967295,g=_+(E<<7&4294967295|E>>>25),E=S+(w^g&(_^w))+T[5]+1200080426&4294967295,S=g+(E<<12&4294967295|E>>>20),E=w+(_^S&(g^_))+T[6]+2821735955&4294967295,w=S+(E<<17&4294967295|E>>>15),E=_+(g^w&(S^g))+T[7]+4249261313&4294967295,_=w+(E<<22&4294967295|E>>>10),E=g+(S^_&(w^S))+T[8]+1770035416&4294967295,g=_+(E<<7&4294967295|E>>>25),E=S+(w^g&(_^w))+T[9]+2336552879&4294967295,S=g+(E<<12&4294967295|E>>>20),E=w+(_^S&(g^_))+T[10]+4294925233&4294967295,w=S+(E<<17&4294967295|E>>>15),E=_+(g^w&(S^g))+T[11]+2304563134&4294967295,_=w+(E<<22&4294967295|E>>>10),E=g+(S^_&(w^S))+T[12]+1804603682&4294967295,g=_+(E<<7&4294967295|E>>>25),E=S+(w^g&(_^w))+T[13]+4254626195&4294967295,S=g+(E<<12&4294967295|E>>>20),E=w+(_^S&(g^_))+T[14]+2792965006&4294967295,w=S+(E<<17&4294967295|E>>>15),E=_+(g^w&(S^g))+T[15]+1236535329&4294967295,_=w+(E<<22&4294967295|E>>>10),E=g+(w^S&(_^w))+T[1]+4129170786&4294967295,g=_+(E<<5&4294967295|E>>>27),E=S+(_^w&(g^_))+T[6]+3225465664&4294967295,S=g+(E<<9&4294967295|E>>>23),E=w+(g^_&(S^g))+T[11]+643717713&4294967295,w=S+(E<<14&4294967295|E>>>18),E=_+(S^g&(w^S))+T[0]+3921069994&4294967295,_=w+(E<<20&4294967295|E>>>12),E=g+(w^S&(_^w))+T[5]+3593408605&4294967295,g=_+(E<<5&4294967295|E>>>27),E=S+(_^w&(g^_))+T[10]+38016083&4294967295,S=g+(E<<9&4294967295|E>>>23),E=w+(g^_&(S^g))+T[15]+3634488961&4294967295,w=S+(E<<14&4294967295|E>>>18),E=_+(S^g&(w^S))+T[4]+3889429448&4294967295,_=w+(E<<20&4294967295|E>>>12),E=g+(w^S&(_^w))+T[9]+568446438&4294967295,g=_+(E<<5&4294967295|E>>>27),E=S+(_^w&(g^_))+T[14]+3275163606&4294967295,S=g+(E<<9&4294967295|E>>>23),E=w+(g^_&(S^g))+T[3]+4107603335&4294967295,w=S+(E<<14&4294967295|E>>>18),E=_+(S^g&(w^S))+T[8]+1163531501&4294967295,_=w+(E<<20&4294967295|E>>>12),E=g+(w^S&(_^w))+T[13]+2850285829&4294967295,g=_+(E<<5&4294967295|E>>>27),E=S+(_^w&(g^_))+T[2]+4243563512&4294967295,S=g+(E<<9&4294967295|E>>>23),E=w+(g^_&(S^g))+T[7]+1735328473&4294967295,w=S+(E<<14&4294967295|E>>>18),E=_+(S^g&(w^S))+T[12]+2368359562&4294967295,_=w+(E<<20&4294967295|E>>>12),E=g+(_^w^S)+T[5]+4294588738&4294967295,g=_+(E<<4&4294967295|E>>>28),E=S+(g^_^w)+T[8]+2272392833&4294967295,S=g+(E<<11&4294967295|E>>>21),E=w+(S^g^_)+T[11]+1839030562&4294967295,w=S+(E<<16&4294967295|E>>>16),E=_+(w^S^g)+T[14]+4259657740&4294967295,_=w+(E<<23&4294967295|E>>>9),E=g+(_^w^S)+T[1]+2763975236&4294967295,g=_+(E<<4&4294967295|E>>>28),E=S+(g^_^w)+T[4]+1272893353&4294967295,S=g+(E<<11&4294967295|E>>>21),E=w+(S^g^_)+T[7]+4139469664&4294967295,w=S+(E<<16&4294967295|E>>>16),E=_+(w^S^g)+T[10]+3200236656&4294967295,_=w+(E<<23&4294967295|E>>>9),E=g+(_^w^S)+T[13]+681279174&4294967295,g=_+(E<<4&4294967295|E>>>28),E=S+(g^_^w)+T[0]+3936430074&4294967295,S=g+(E<<11&4294967295|E>>>21),E=w+(S^g^_)+T[3]+3572445317&4294967295,w=S+(E<<16&4294967295|E>>>16),E=_+(w^S^g)+T[6]+76029189&4294967295,_=w+(E<<23&4294967295|E>>>9),E=g+(_^w^S)+T[9]+3654602809&4294967295,g=_+(E<<4&4294967295|E>>>28),E=S+(g^_^w)+T[12]+3873151461&4294967295,S=g+(E<<11&4294967295|E>>>21),E=w+(S^g^_)+T[15]+530742520&4294967295,w=S+(E<<16&4294967295|E>>>16),E=_+(w^S^g)+T[2]+3299628645&4294967295,_=w+(E<<23&4294967295|E>>>9),E=g+(w^(_|~S))+T[0]+4096336452&4294967295,g=_+(E<<6&4294967295|E>>>26),E=S+(_^(g|~w))+T[7]+1126891415&4294967295,S=g+(E<<10&4294967295|E>>>22),E=w+(g^(S|~_))+T[14]+2878612391&4294967295,w=S+(E<<15&4294967295|E>>>17),E=_+(S^(w|~g))+T[5]+4237533241&4294967295,_=w+(E<<21&4294967295|E>>>11),E=g+(w^(_|~S))+T[12]+1700485571&4294967295,g=_+(E<<6&4294967295|E>>>26),E=S+(_^(g|~w))+T[3]+2399980690&4294967295,S=g+(E<<10&4294967295|E>>>22),E=w+(g^(S|~_))+T[10]+4293915773&4294967295,w=S+(E<<15&4294967295|E>>>17),E=_+(S^(w|~g))+T[1]+2240044497&4294967295,_=w+(E<<21&4294967295|E>>>11),E=g+(w^(_|~S))+T[8]+1873313359&4294967295,g=_+(E<<6&4294967295|E>>>26),E=S+(_^(g|~w))+T[15]+4264355552&4294967295,S=g+(E<<10&4294967295|E>>>22),E=w+(g^(S|~_))+T[6]+2734768916&4294967295,w=S+(E<<15&4294967295|E>>>17),E=_+(S^(w|~g))+T[13]+1309151649&4294967295,_=w+(E<<21&4294967295|E>>>11),E=g+(w^(_|~S))+T[4]+4149444226&4294967295,g=_+(E<<6&4294967295|E>>>26),E=S+(_^(g|~w))+T[11]+3174756917&4294967295,S=g+(E<<10&4294967295|E>>>22),E=w+(g^(S|~_))+T[2]+718787259&4294967295,w=S+(E<<15&4294967295|E>>>17),E=_+(S^(w|~g))+T[9]+3951481745&4294967295,I.g[0]=I.g[0]+g&4294967295,I.g[1]=I.g[1]+(w+(E<<21&4294967295|E>>>11))&4294967295,I.g[2]=I.g[2]+w&4294967295,I.g[3]=I.g[3]+S&4294967295}r.prototype.u=function(I,g){g===void 0&&(g=I.length);for(var _=g-this.blockSize,T=this.B,w=this.h,S=0;S<g;){if(w==0)for(;S<=_;)s(this,I,S),S+=this.blockSize;if(typeof I=="string"){for(;S<g;)if(T[w++]=I.charCodeAt(S++),w==this.blockSize){s(this,T),w=0;break}}else for(;S<g;)if(T[w++]=I[S++],w==this.blockSize){s(this,T),w=0;break}}this.h=w,this.o+=g},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var g=1;g<I.length-8;++g)I[g]=0;var _=8*this.o;for(g=I.length-8;g<I.length;++g)I[g]=_&255,_/=256;for(this.u(I),I=Array(16),g=_=0;4>g;++g)for(var T=0;32>T;T+=8)I[_++]=this.g[g]>>>T&255;return I};function i(I,g){var _=l;return Object.prototype.hasOwnProperty.call(_,I)?_[I]:_[I]=g(I)}function a(I,g){this.h=g;for(var _=[],T=!0,w=I.length-1;0<=w;w--){var S=I[w]|0;T&&S==g||(_[w]=S,T=!1)}this.g=_}var l={};function u(I){return-128<=I&&128>I?i(I,function(g){return new a([g|0],0>g?-1:0)}):new a([I|0],0>I?-1:0)}function f(I){if(isNaN(I)||!isFinite(I))return m;if(0>I)return L(f(-I));for(var g=[],_=1,T=0;I>=_;T++)g[T]=I/_|0,_*=4294967296;return new a(g,0)}function d(I,g){if(I.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(I.charAt(0)=="-")return L(d(I.substring(1),g));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=f(Math.pow(g,8)),T=m,w=0;w<I.length;w+=8){var S=Math.min(8,I.length-w),E=parseInt(I.substring(w,w+S),g);8>S?(S=f(Math.pow(g,S)),T=T.j(S).add(f(E))):(T=T.j(_),T=T.add(f(E)))}return T}var m=u(0),y=u(1),b=u(16777216);e=a.prototype,e.m=function(){if(F(this))return-L(this).m();for(var I=0,g=1,_=0;_<this.g.length;_++){var T=this.i(_);I+=(0<=T?T:4294967296+T)*g,g*=4294967296}return I},e.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(V(this))return"0";if(F(this))return"-"+L(this).toString(I);for(var g=f(Math.pow(I,6)),_=this,T="";;){var w=z(_,g).g;_=K(_,w.j(g));var S=((0<_.g.length?_.g[0]:_.h)>>>0).toString(I);if(_=w,V(_))return S+T;for(;6>S.length;)S="0"+S;T=S+T}},e.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function V(I){if(I.h!=0)return!1;for(var g=0;g<I.g.length;g++)if(I.g[g]!=0)return!1;return!0}function F(I){return I.h==-1}e.l=function(I){return I=K(this,I),F(I)?-1:V(I)?0:1};function L(I){for(var g=I.g.length,_=[],T=0;T<g;T++)_[T]=~I.g[T];return new a(_,~I.h).add(y)}e.abs=function(){return F(this)?L(this):this},e.add=function(I){for(var g=Math.max(this.g.length,I.g.length),_=[],T=0,w=0;w<=g;w++){var S=T+(this.i(w)&65535)+(I.i(w)&65535),E=(S>>>16)+(this.i(w)>>>16)+(I.i(w)>>>16);T=E>>>16,S&=65535,E&=65535,_[w]=E<<16|S}return new a(_,_[_.length-1]&-2147483648?-1:0)};function K(I,g){return I.add(L(g))}e.j=function(I){if(V(this)||V(I))return m;if(F(this))return F(I)?L(this).j(L(I)):L(L(this).j(I));if(F(I))return L(this.j(L(I)));if(0>this.l(b)&&0>I.l(b))return f(this.m()*I.m());for(var g=this.g.length+I.g.length,_=[],T=0;T<2*g;T++)_[T]=0;for(T=0;T<this.g.length;T++)for(var w=0;w<I.g.length;w++){var S=this.i(T)>>>16,E=this.i(T)&65535,ue=I.i(w)>>>16,Ve=I.i(w)&65535;_[2*T+2*w]+=E*Ve,W(_,2*T+2*w),_[2*T+2*w+1]+=S*Ve,W(_,2*T+2*w+1),_[2*T+2*w+1]+=E*ue,W(_,2*T+2*w+1),_[2*T+2*w+2]+=S*ue,W(_,2*T+2*w+2)}for(T=0;T<g;T++)_[T]=_[2*T+1]<<16|_[2*T];for(T=g;T<2*g;T++)_[T]=0;return new a(_,0)};function W(I,g){for(;(I[g]&65535)!=I[g];)I[g+1]+=I[g]>>>16,I[g]&=65535,g++}function Q(I,g){this.g=I,this.h=g}function z(I,g){if(V(g))throw Error("division by zero");if(V(I))return new Q(m,m);if(F(I))return g=z(L(I),g),new Q(L(g.g),L(g.h));if(F(g))return g=z(I,L(g)),new Q(L(g.g),g.h);if(30<I.g.length){if(F(I)||F(g))throw Error("slowDivide_ only works with positive integers.");for(var _=y,T=g;0>=T.l(I);)_=lt(_),T=lt(T);var w=Et(_,1),S=Et(T,1);for(T=Et(T,2),_=Et(_,2);!V(T);){var E=S.add(T);0>=E.l(I)&&(w=w.add(_),S=E),T=Et(T,1),_=Et(_,1)}return g=K(I,w.j(g)),new Q(w,g)}for(w=m;0<=I.l(g);){for(_=Math.max(1,Math.floor(I.m()/g.m())),T=Math.ceil(Math.log(_)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),S=f(_),E=S.j(g);F(E)||0<E.l(I);)_-=T,S=f(_),E=S.j(g);V(S)&&(S=y),w=w.add(S),I=K(I,E)}return new Q(w,I)}e.A=function(I){return z(this,I).h},e.and=function(I){for(var g=Math.max(this.g.length,I.g.length),_=[],T=0;T<g;T++)_[T]=this.i(T)&I.i(T);return new a(_,this.h&I.h)},e.or=function(I){for(var g=Math.max(this.g.length,I.g.length),_=[],T=0;T<g;T++)_[T]=this.i(T)|I.i(T);return new a(_,this.h|I.h)},e.xor=function(I){for(var g=Math.max(this.g.length,I.g.length),_=[],T=0;T<g;T++)_[T]=this.i(T)^I.i(T);return new a(_,this.h^I.h)};function lt(I){for(var g=I.g.length+1,_=[],T=0;T<g;T++)_[T]=I.i(T)<<1|I.i(T-1)>>>31;return new a(_,I.h)}function Et(I,g){var _=g>>5;g%=32;for(var T=I.g.length-_,w=[],S=0;S<T;S++)w[S]=0<g?I.i(S+_)>>>g|I.i(S+_+1)<<32-g:I.i(S+_);return new a(w,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,od=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=d,wn=a}).apply(typeof Nu<"u"?Nu:typeof self<"u"?self:typeof window<"u"?window:{});var gi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ad,ls,ld,Ri,Va,cd,ud,hd;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,h){return o==Array.prototype||o==Object.prototype||(o[c]=h.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof gi=="object"&&gi];for(var c=0;c<o.length;++c){var h=o[c];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function s(o,c){if(c)t:{var h=r;o=o.split(".");for(var p=0;p<o.length-1;p++){var R=o[p];if(!(R in h))break t;h=h[R]}o=o[o.length-1],p=h[o],c=c(p),c!=p&&c!=null&&t(h,o,{configurable:!0,writable:!0,value:c})}}function i(o,c){o instanceof String&&(o+="");var h=0,p=!1,R={next:function(){if(!p&&h<o.length){var C=h++;return{value:c(C,o[C]),done:!1}}return p=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R}s("Array.prototype.values",function(o){return o||function(){return i(this,function(c,h){return h})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function f(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function d(o,c,h){return o.call.apply(o.bind,arguments)}function m(o,c,h){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var R=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(R,p),o.apply(c,R)}}return function(){return o.apply(c,arguments)}}function y(o,c,h){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:m,y.apply(null,arguments)}function b(o,c){var h=Array.prototype.slice.call(arguments,1);return function(){var p=h.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function V(o,c){function h(){}h.prototype=c.prototype,o.aa=c.prototype,o.prototype=new h,o.prototype.constructor=o,o.Qb=function(p,R,C){for(var j=Array(arguments.length-2),Tt=2;Tt<arguments.length;Tt++)j[Tt-2]=arguments[Tt];return c.prototype[R].apply(p,j)}}function F(o){const c=o.length;if(0<c){const h=Array(c);for(let p=0;p<c;p++)h[p]=o[p];return h}return[]}function L(o,c){for(let h=1;h<arguments.length;h++){const p=arguments[h];if(u(p)){const R=o.length||0,C=p.length||0;o.length=R+C;for(let j=0;j<C;j++)o[R+j]=p[j]}else o.push(p)}}class K{constructor(c,h){this.i=c,this.j=h,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function W(o){return/^[\s\xa0]*$/.test(o)}function Q(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function z(o){return z[" "](o),o}z[" "]=function(){};var lt=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function Et(o,c,h){for(const p in o)c.call(h,o[p],p,o)}function I(o,c){for(const h in o)c.call(void 0,o[h],h,o)}function g(o){const c={};for(const h in o)c[h]=o[h];return c}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(o,c){let h,p;for(let R=1;R<arguments.length;R++){p=arguments[R];for(h in p)o[h]=p[h];for(let C=0;C<_.length;C++)h=_[C],Object.prototype.hasOwnProperty.call(p,h)&&(o[h]=p[h])}}function w(o){var c=1;o=o.split(":");const h=[];for(;0<c&&o.length;)h.push(o.shift()),c--;return o.length&&h.push(o.join(":")),h}function S(o){l.setTimeout(()=>{throw o},0)}function E(){var o=be;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class ue{constructor(){this.h=this.g=null}add(c,h){const p=Ve.get();p.set(c,h),this.h?this.h.next=p:this.g=p,this.h=p}}var Ve=new K(()=>new Pt,o=>o.reset());class Pt{constructor(){this.next=this.g=this.h=null}set(c,h){this.h=c,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let it,pt=!1,be=new ue,On=()=>{const o=l.Promise.resolve(void 0);it=()=>{o.then(He)}};var He=()=>{for(var o;o=E();){try{o.h.call(o.g)}catch(h){S(h)}var c=Ve;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}pt=!1};function Bt(){this.s=this.s,this.C=this.C}Bt.prototype.s=!1,Bt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Bt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function jt(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}jt.prototype.h=function(){this.defaultPrevented=!0};var No=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const h=()=>{};l.addEventListener("test",h,c),l.removeEventListener("test",h,c)}catch{}return o})();function kn(o,c){if(jt.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var h=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(lt){t:{try{z(c.nodeName);var R=!0;break t}catch{}R=!1}R||(c=null)}}else h=="mouseover"?c=o.fromElement:h=="mouseout"&&(c=o.toElement);this.relatedTarget=c,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Mn[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&kn.aa.h.call(this)}}V(kn,jt);var Mn={2:"touch",3:"pen",4:"mouse"};kn.prototype.h=function(){kn.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var ze="closure_listenable_"+(1e6*Math.random()|0),$r=0;function Qs(o,c,h,p,R){this.listener=o,this.proxy=null,this.src=c,this.type=h,this.capture=!!p,this.ha=R,this.key=++$r,this.da=this.fa=!1}function De(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function qr(o){this.src=o,this.g={},this.h=0}qr.prototype.add=function(o,c,h,p,R){var C=o.toString();o=this.g[C],o||(o=this.g[C]=[],this.h++);var j=A(o,c,p,R);return-1<j?(c=o[j],h||(c.fa=!1)):(c=new Qs(c,this.src,C,!!p,R),c.fa=h,o.push(c)),c};function v(o,c){var h=c.type;if(h in o.g){var p=o.g[h],R=Array.prototype.indexOf.call(p,c,void 0),C;(C=0<=R)&&Array.prototype.splice.call(p,R,1),C&&(De(c),o.g[h].length==0&&(delete o.g[h],o.h--))}}function A(o,c,h,p){for(var R=0;R<o.length;++R){var C=o[R];if(!C.da&&C.listener==c&&C.capture==!!h&&C.ha==p)return R}return-1}var P="closure_lm_"+(1e6*Math.random()|0),M={};function N(o,c,h,p,R){if(Array.isArray(c)){for(var C=0;C<c.length;C++)N(o,c[C],h,p,R);return null}return h=et(h),o&&o[ze]?o.K(c,h,f(p)?!!p.capture:!1,R):O(o,c,h,!1,p,R)}function O(o,c,h,p,R,C){if(!c)throw Error("Invalid event type");var j=f(R)?!!R.capture:!!R,Tt=q(o);if(Tt||(o[P]=Tt=new qr(o)),h=Tt.add(c,h,p,j,C),h.proxy)return h;if(p=$(),h.proxy=p,p.src=o,p.listener=h,o.addEventListener)No||(R=j),R===void 0&&(R=!1),o.addEventListener(c.toString(),p,R);else if(o.attachEvent)o.attachEvent(k(c.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return h}function $(){function o(h){return c.call(o.src,o.listener,h)}const c=Y;return o}function B(o,c,h,p,R){if(Array.isArray(c))for(var C=0;C<c.length;C++)B(o,c[C],h,p,R);else p=f(p)?!!p.capture:!!p,h=et(h),o&&o[ze]?(o=o.i,c=String(c).toString(),c in o.g&&(C=o.g[c],h=A(C,h,p,R),-1<h&&(De(C[h]),Array.prototype.splice.call(C,h,1),C.length==0&&(delete o.g[c],o.h--)))):o&&(o=q(o))&&(c=o.g[c.toString()],o=-1,c&&(o=A(c,h,p,R)),(h=-1<o?c[o]:null)&&U(h))}function U(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[ze])v(c.i,o);else{var h=o.type,p=o.proxy;c.removeEventListener?c.removeEventListener(h,p,o.capture):c.detachEvent?c.detachEvent(k(h),p):c.addListener&&c.removeListener&&c.removeListener(p),(h=q(c))?(v(h,o),h.h==0&&(h.src=null,c[P]=null)):De(o)}}}function k(o){return o in M?M[o]:M[o]="on"+o}function Y(o,c){if(o.da)o=!0;else{c=new kn(c,this);var h=o.listener,p=o.ha||o.src;o.fa&&U(o),o=h.call(p,c)}return o}function q(o){return o=o[P],o instanceof qr?o:null}var X="__closure_events_fn_"+(1e9*Math.random()>>>0);function et(o){return typeof o=="function"?o:(o[X]||(o[X]=function(c){return o.handleEvent(c)}),o[X])}function Z(){Bt.call(this),this.i=new qr(this),this.M=this,this.F=null}V(Z,Bt),Z.prototype[ze]=!0,Z.prototype.removeEventListener=function(o,c,h,p){B(this,o,c,h,p)};function ot(o,c){var h,p=o.F;if(p)for(h=[];p;p=p.F)h.push(p);if(o=o.M,p=c.type||c,typeof c=="string")c=new jt(c,o);else if(c instanceof jt)c.target=c.target||o;else{var R=c;c=new jt(p,o),T(c,R)}if(R=!0,h)for(var C=h.length-1;0<=C;C--){var j=c.g=h[C];R=ht(j,p,!0,c)&&R}if(j=c.g=o,R=ht(j,p,!0,c)&&R,R=ht(j,p,!1,c)&&R,h)for(C=0;C<h.length;C++)j=c.g=h[C],R=ht(j,p,!1,c)&&R}Z.prototype.N=function(){if(Z.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var h=o.g[c],p=0;p<h.length;p++)De(h[p]);delete o.g[c],o.h--}}this.F=null},Z.prototype.K=function(o,c,h,p){return this.i.add(String(o),c,!1,h,p)},Z.prototype.L=function(o,c,h,p){return this.i.add(String(o),c,!0,h,p)};function ht(o,c,h,p){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var R=!0,C=0;C<c.length;++C){var j=c[C];if(j&&!j.da&&j.capture==h){var Tt=j.listener,Qt=j.ha||j.src;j.fa&&v(o.i,j),R=Tt.call(Qt,p)!==!1&&R}}return R&&!p.defaultPrevented}function Kt(o,c,h){if(typeof o=="function")h&&(o=y(o,h));else if(o&&typeof o.handleEvent=="function")o=y(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function Wt(o){o.g=Kt(()=>{o.g=null,o.i&&(o.i=!1,Wt(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class Ee extends Bt{constructor(c,h){super(),this.m=c,this.l=h,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Wt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function te(o){Bt.call(this),this.h=o,this.g={}}V(te,Bt);var cn=[];function Hr(o){Et(o.g,function(c,h){this.g.hasOwnProperty(h)&&U(c)},o),o.g={}}te.prototype.N=function(){te.aa.N.call(this),Hr(this)},te.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gt=l.JSON.stringify,Te=l.JSON.parse,Xs=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function or(){}or.prototype.h=null;function Gl(o){return o.h||(o.h=o.i())}function Ql(){}var zr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Oo(){jt.call(this,"d")}V(Oo,jt);function ko(){jt.call(this,"c")}V(ko,jt);var Fn={},Xl=null;function Js(){return Xl=Xl||new Z}Fn.La="serverreachability";function Jl(o){jt.call(this,Fn.La,o)}V(Jl,jt);function Kr(o){const c=Js();ot(c,new Jl(c))}Fn.STAT_EVENT="statevent";function Yl(o,c){jt.call(this,Fn.STAT_EVENT,o),this.stat=c}V(Yl,jt);function he(o){const c=Js();ot(c,new Yl(c,o))}Fn.Ma="timingevent";function Zl(o,c){jt.call(this,Fn.Ma,o),this.size=c}V(Zl,jt);function Wr(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function Gr(){this.g=!0}Gr.prototype.xa=function(){this.g=!1};function Lp(o,c,h,p,R,C){o.info(function(){if(o.g)if(C)for(var j="",Tt=C.split("&"),Qt=0;Qt<Tt.length;Qt++){var mt=Tt[Qt].split("=");if(1<mt.length){var ee=mt[0];mt=mt[1];var ne=ee.split("_");j=2<=ne.length&&ne[1]=="type"?j+(ee+"="+mt+"&"):j+(ee+"=redacted&")}}else j=null;else j=C;return"XMLHTTP REQ ("+p+") [attempt "+R+"]: "+c+`
`+h+`
`+j})}function Up(o,c,h,p,R,C,j){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+R+"]: "+c+`
`+h+`
`+C+" "+j})}function ar(o,c,h,p){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+jp(o,h)+(p?" "+p:"")})}function Bp(o,c){o.info(function(){return"TIMEOUT: "+c})}Gr.prototype.info=function(){};function jp(o,c){if(!o.g)return c;if(!c)return null;try{var h=JSON.parse(c);if(h){for(o=0;o<h.length;o++)if(Array.isArray(h[o])){var p=h[o];if(!(2>p.length)){var R=p[1];if(Array.isArray(R)&&!(1>R.length)){var C=R[0];if(C!="noop"&&C!="stop"&&C!="close")for(var j=1;j<R.length;j++)R[j]=""}}}}return Gt(h)}catch{return c}}var Ys={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},tc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Mo;function Zs(){}V(Zs,or),Zs.prototype.g=function(){return new XMLHttpRequest},Zs.prototype.i=function(){return{}},Mo=new Zs;function un(o,c,h,p){this.j=o,this.i=c,this.l=h,this.R=p||1,this.U=new te(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ec}function ec(){this.i=null,this.g="",this.h=!1}var nc={},Fo={};function Lo(o,c,h){o.L=1,o.v=ri(Ke(c)),o.m=h,o.P=!0,rc(o,null)}function rc(o,c){o.F=Date.now(),ti(o),o.A=Ke(o.v);var h=o.A,p=o.R;Array.isArray(p)||(p=[String(p)]),_c(h.i,"t",p),o.C=0,h=o.j.J,o.h=new ec,o.g=kc(o.j,h?c:null,!o.m),0<o.O&&(o.M=new Ee(y(o.Y,o,o.g),o.O)),c=o.U,h=o.g,p=o.ca;var R="readystatechange";Array.isArray(R)||(R&&(cn[0]=R.toString()),R=cn);for(var C=0;C<R.length;C++){var j=N(h,R[C],p||c.handleEvent,!1,c.h||c);if(!j)break;c.g[j.key]=j}c=o.H?g(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),Kr(),Lp(o.i,o.u,o.A,o.l,o.R,o.m)}un.prototype.ca=function(o){o=o.target;const c=this.M;c&&We(o)==3?c.j():this.Y(o)},un.prototype.Y=function(o){try{if(o==this.g)t:{const ne=We(this.g);var c=this.g.Ba();const ur=this.g.Z();if(!(3>ne)&&(ne!=3||this.g&&(this.h.h||this.g.oa()||Ac(this.g)))){this.J||ne!=4||c==7||(c==8||0>=ur?Kr(3):Kr(2)),Uo(this);var h=this.g.Z();this.X=h;e:if(sc(this)){var p=Ac(this.g);o="";var R=p.length,C=We(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ln(this),Qr(this);var j="";break e}this.h.i=new l.TextDecoder}for(c=0;c<R;c++)this.h.h=!0,o+=this.h.i.decode(p[c],{stream:!(C&&c==R-1)});p.length=0,this.h.g+=o,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=h==200,Up(this.i,this.u,this.A,this.l,this.R,ne,h),this.o){if(this.T&&!this.K){e:{if(this.g){var Tt,Qt=this.g;if((Tt=Qt.g?Qt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(Tt)){var mt=Tt;break e}}mt=null}if(h=mt)ar(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Bo(this,h);else{this.o=!1,this.s=3,he(12),Ln(this),Qr(this);break t}}if(this.P){h=!0;let Se;for(;!this.J&&this.C<j.length;)if(Se=$p(this,j),Se==Fo){ne==4&&(this.s=4,he(14),h=!1),ar(this.i,this.l,null,"[Incomplete Response]");break}else if(Se==nc){this.s=4,he(15),ar(this.i,this.l,j,"[Invalid Chunk]"),h=!1;break}else ar(this.i,this.l,Se,null),Bo(this,Se);if(sc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ne!=4||j.length!=0||this.h.h||(this.s=1,he(16),h=!1),this.o=this.o&&h,!h)ar(this.i,this.l,j,"[Invalid Chunked Response]"),Ln(this),Qr(this);else if(0<j.length&&!this.W){this.W=!0;var ee=this.j;ee.g==this&&ee.ba&&!ee.M&&(ee.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),Ko(ee),ee.M=!0,he(11))}}else ar(this.i,this.l,j,null),Bo(this,j);ne==4&&Ln(this),this.o&&!this.J&&(ne==4?Dc(this.j,this):(this.o=!1,ti(this)))}else im(this.g),h==400&&0<j.indexOf("Unknown SID")?(this.s=3,he(12)):(this.s=0,he(13)),Ln(this),Qr(this)}}}catch{}finally{}};function sc(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function $p(o,c){var h=o.C,p=c.indexOf(`
`,h);return p==-1?Fo:(h=Number(c.substring(h,p)),isNaN(h)?nc:(p+=1,p+h>c.length?Fo:(c=c.slice(p,p+h),o.C=p+h,c)))}un.prototype.cancel=function(){this.J=!0,Ln(this)};function ti(o){o.S=Date.now()+o.I,ic(o,o.I)}function ic(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Wr(y(o.ba,o),c)}function Uo(o){o.B&&(l.clearTimeout(o.B),o.B=null)}un.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(Bp(this.i,this.A),this.L!=2&&(Kr(),he(17)),Ln(this),this.s=2,Qr(this)):ic(this,this.S-o)};function Qr(o){o.j.G==0||o.J||Dc(o.j,o)}function Ln(o){Uo(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,Hr(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function Bo(o,c){try{var h=o.j;if(h.G!=0&&(h.g==o||jo(h.h,o))){if(!o.K&&jo(h.h,o)&&h.G==3){try{var p=h.Da.g.parse(c)}catch{p=null}if(Array.isArray(p)&&p.length==3){var R=p;if(R[0]==0){t:if(!h.u){if(h.g)if(h.g.F+3e3<o.F)ci(h),ai(h);else break t;zo(h),he(18)}}else h.za=R[1],0<h.za-h.T&&37500>R[2]&&h.F&&h.v==0&&!h.C&&(h.C=Wr(y(h.Za,h),6e3));if(1>=lc(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else Bn(h,11)}else if((o.K||h.g==o)&&ci(h),!W(c))for(R=h.Da.g.parse(c),c=0;c<R.length;c++){let mt=R[c];if(h.T=mt[0],mt=mt[1],h.G==2)if(mt[0]=="c"){h.K=mt[1],h.ia=mt[2];const ee=mt[3];ee!=null&&(h.la=ee,h.j.info("VER="+h.la));const ne=mt[4];ne!=null&&(h.Aa=ne,h.j.info("SVER="+h.Aa));const ur=mt[5];ur!=null&&typeof ur=="number"&&0<ur&&(p=1.5*ur,h.L=p,h.j.info("backChannelRequestTimeoutMs_="+p)),p=h;const Se=o.g;if(Se){const hi=Se.g?Se.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hi){var C=p.h;C.g||hi.indexOf("spdy")==-1&&hi.indexOf("quic")==-1&&hi.indexOf("h2")==-1||(C.j=C.l,C.g=new Set,C.h&&($o(C,C.h),C.h=null))}if(p.D){const Wo=Se.g?Se.g.getResponseHeader("X-HTTP-Session-Id"):null;Wo&&(p.ya=Wo,bt(p.I,p.D,Wo))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-o.F,h.j.info("Handshake RTT: "+h.R+"ms")),p=h;var j=o;if(p.qa=Oc(p,p.J?p.ia:null,p.W),j.K){cc(p.h,j);var Tt=j,Qt=p.L;Qt&&(Tt.I=Qt),Tt.B&&(Uo(Tt),ti(Tt)),p.g=j}else Pc(p);0<h.i.length&&li(h)}else mt[0]!="stop"&&mt[0]!="close"||Bn(h,7);else h.G==3&&(mt[0]=="stop"||mt[0]=="close"?mt[0]=="stop"?Bn(h,7):Ho(h):mt[0]!="noop"&&h.l&&h.l.ta(mt),h.v=0)}}Kr(4)}catch{}}var qp=class{constructor(o,c){this.g=o,this.map=c}};function oc(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ac(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function lc(o){return o.h?1:o.g?o.g.size:0}function jo(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function $o(o,c){o.g?o.g.add(c):o.h=c}function cc(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}oc.prototype.cancel=function(){if(this.i=uc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function uc(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const h of o.g.values())c=c.concat(h.D);return c}return F(o.i)}function Hp(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],h=o.length,p=0;p<h;p++)c.push(o[p]);return c}c=[],h=0;for(p in o)c[h++]=o[p];return c}function zp(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var h=0;h<o;h++)c.push(h);return c}c=[],h=0;for(const p in o)c[h++]=p;return c}}}function hc(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var h=zp(o),p=Hp(o),R=p.length,C=0;C<R;C++)c.call(void 0,p[C],h&&h[C],o)}var fc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kp(o,c){if(o){o=o.split("&");for(var h=0;h<o.length;h++){var p=o[h].indexOf("="),R=null;if(0<=p){var C=o[h].substring(0,p);R=o[h].substring(p+1)}else C=o[h];c(C,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function Un(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Un){this.h=o.h,ei(this,o.j),this.o=o.o,this.g=o.g,ni(this,o.s),this.l=o.l;var c=o.i,h=new Yr;h.i=c.i,c.g&&(h.g=new Map(c.g),h.h=c.h),dc(this,h),this.m=o.m}else o&&(c=String(o).match(fc))?(this.h=!1,ei(this,c[1]||"",!0),this.o=Xr(c[2]||""),this.g=Xr(c[3]||"",!0),ni(this,c[4]),this.l=Xr(c[5]||"",!0),dc(this,c[6]||"",!0),this.m=Xr(c[7]||"")):(this.h=!1,this.i=new Yr(null,this.h))}Un.prototype.toString=function(){var o=[],c=this.j;c&&o.push(Jr(c,pc,!0),":");var h=this.g;return(h||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Jr(c,pc,!0),"@"),o.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&o.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&o.push("/"),o.push(Jr(h,h.charAt(0)=="/"?Qp:Gp,!0))),(h=this.i.toString())&&o.push("?",h),(h=this.m)&&o.push("#",Jr(h,Jp)),o.join("")};function Ke(o){return new Un(o)}function ei(o,c,h){o.j=h?Xr(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function ni(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function dc(o,c,h){c instanceof Yr?(o.i=c,Yp(o.i,o.h)):(h||(c=Jr(c,Xp)),o.i=new Yr(c,o.h))}function bt(o,c,h){o.i.set(c,h)}function ri(o){return bt(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Xr(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Jr(o,c,h){return typeof o=="string"?(o=encodeURI(o).replace(c,Wp),h&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Wp(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var pc=/[#\/\?@]/g,Gp=/[#\?:]/g,Qp=/[#\?]/g,Xp=/[#\?@]/g,Jp=/#/g;function Yr(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function hn(o){o.g||(o.g=new Map,o.h=0,o.i&&Kp(o.i,function(c,h){o.add(decodeURIComponent(c.replace(/\+/g," ")),h)}))}e=Yr.prototype,e.add=function(o,c){hn(this),this.i=null,o=lr(this,o);var h=this.g.get(o);return h||this.g.set(o,h=[]),h.push(c),this.h+=1,this};function mc(o,c){hn(o),c=lr(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function gc(o,c){return hn(o),c=lr(o,c),o.g.has(c)}e.forEach=function(o,c){hn(this),this.g.forEach(function(h,p){h.forEach(function(R){o.call(c,R,p,this)},this)},this)},e.na=function(){hn(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),h=[];for(let p=0;p<c.length;p++){const R=o[p];for(let C=0;C<R.length;C++)h.push(c[p])}return h},e.V=function(o){hn(this);let c=[];if(typeof o=="string")gc(this,o)&&(c=c.concat(this.g.get(lr(this,o))));else{o=Array.from(this.g.values());for(let h=0;h<o.length;h++)c=c.concat(o[h])}return c},e.set=function(o,c){return hn(this),this.i=null,o=lr(this,o),gc(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},e.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function _c(o,c,h){mc(o,c),0<h.length&&(o.i=null,o.g.set(lr(o,c),F(h)),o.h+=h.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var h=0;h<c.length;h++){var p=c[h];const C=encodeURIComponent(String(p)),j=this.V(p);for(p=0;p<j.length;p++){var R=C;j[p]!==""&&(R+="="+encodeURIComponent(String(j[p]))),o.push(R)}}return this.i=o.join("&")};function lr(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function Yp(o,c){c&&!o.j&&(hn(o),o.i=null,o.g.forEach(function(h,p){var R=p.toLowerCase();p!=R&&(mc(this,p),_c(this,R,h))},o)),o.j=c}function Zp(o,c){const h=new Gr;if(l.Image){const p=new Image;p.onload=b(fn,h,"TestLoadImage: loaded",!0,c,p),p.onerror=b(fn,h,"TestLoadImage: error",!1,c,p),p.onabort=b(fn,h,"TestLoadImage: abort",!1,c,p),p.ontimeout=b(fn,h,"TestLoadImage: timeout",!1,c,p),l.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else c(!1)}function tm(o,c){const h=new Gr,p=new AbortController,R=setTimeout(()=>{p.abort(),fn(h,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:p.signal}).then(C=>{clearTimeout(R),C.ok?fn(h,"TestPingServer: ok",!0,c):fn(h,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(R),fn(h,"TestPingServer: error",!1,c)})}function fn(o,c,h,p,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),p(h)}catch{}}function em(){this.g=new Xs}function nm(o,c,h){const p=h||"";try{hc(o,function(R,C){let j=R;f(R)&&(j=Gt(R)),c.push(p+C+"="+encodeURIComponent(j))})}catch(R){throw c.push(p+"type="+encodeURIComponent("_badmap")),R}}function si(o){this.l=o.Ub||null,this.j=o.eb||!1}V(si,or),si.prototype.g=function(){return new ii(this.l,this.j)},si.prototype.i=(function(o){return function(){return o}})({});function ii(o,c){Z.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(ii,Z),e=ii.prototype,e.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,ts(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Zr(this)),this.readyState=0},e.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,ts(this)),this.g&&(this.readyState=3,ts(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;yc(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function yc(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}e.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?Zr(this):ts(this),this.readyState==3&&yc(this)}},e.Ra=function(o){this.g&&(this.response=this.responseText=o,Zr(this))},e.Qa=function(o){this.g&&(this.response=o,Zr(this))},e.ga=function(){this.g&&Zr(this)};function Zr(o){o.readyState=4,o.l=null,o.j=null,o.v=null,ts(o)}e.setRequestHeader=function(o,c){this.u.append(o,c)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var h=c.next();!h.done;)h=h.value,o.push(h[0]+": "+h[1]),h=c.next();return o.join(`\r
`)};function ts(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(ii.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function vc(o){let c="";return Et(o,function(h,p){c+=p,c+=":",c+=h,c+=`\r
`}),c}function qo(o,c,h){t:{for(p in h){var p=!1;break t}p=!0}p||(h=vc(h),typeof o=="string"?h!=null&&encodeURIComponent(String(h)):bt(o,c,h))}function Dt(o){Z.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(Dt,Z);var rm=/^https?$/i,sm=["POST","PUT"];e=Dt.prototype,e.Ha=function(o){this.J=o},e.ea=function(o,c,h,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Mo.g(),this.v=this.o?Gl(this.o):Gl(Mo),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(C){Ec(this,C);return}if(o=h||"",h=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var R in p)h.set(R,p[R]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const C of p.keys())h.set(C,p.get(C));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(h.keys()).find(C=>C.toLowerCase()=="content-type"),R=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(sm,c,void 0))||p||R||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[C,j]of h)this.g.setRequestHeader(C,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{wc(this),this.u=!0,this.g.send(o),this.u=!1}catch(C){Ec(this,C)}};function Ec(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,Tc(o),oi(o)}function Tc(o){o.A||(o.A=!0,ot(o,"complete"),ot(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,ot(this,"complete"),ot(this,"abort"),oi(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),oi(this,!0)),Dt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Ic(this):this.bb())},e.bb=function(){Ic(this)};function Ic(o){if(o.h&&typeof a<"u"&&(!o.v[1]||We(o)!=4||o.Z()!=2)){if(o.u&&We(o)==4)Kt(o.Ea,0,o);else if(ot(o,"readystatechange"),We(o)==4){o.h=!1;try{const j=o.Z();t:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break t;default:c=!1}var h;if(!(h=c)){var p;if(p=j===0){var R=String(o.D).match(fc)[1]||null;!R&&l.self&&l.self.location&&(R=l.self.location.protocol.slice(0,-1)),p=!rm.test(R?R.toLowerCase():"")}h=p}if(h)ot(o,"complete"),ot(o,"success");else{o.m=6;try{var C=2<We(o)?o.g.statusText:""}catch{C=""}o.l=C+" ["+o.Z()+"]",Tc(o)}}finally{oi(o)}}}}function oi(o,c){if(o.g){wc(o);const h=o.g,p=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||ot(o,"ready");try{h.onreadystatechange=p}catch{}}}function wc(o){o.I&&(l.clearTimeout(o.I),o.I=null)}e.isActive=function(){return!!this.g};function We(o){return o.g?o.g.readyState:0}e.Z=function(){try{return 2<We(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),Te(c)}};function Ac(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function im(o){const c={};o=(o.g&&2<=We(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(W(o[p]))continue;var h=w(o[p]);const R=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();const C=c[R]||[];c[R]=C,C.push(h)}I(c,function(p){return p.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function es(o,c,h){return h&&h.internalChannelParams&&h.internalChannelParams[o]||c}function bc(o){this.Aa=0,this.i=[],this.j=new Gr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=es("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=es("baseRetryDelayMs",5e3,o),this.cb=es("retryDelaySeedMs",1e4,o),this.Wa=es("forwardChannelMaxRetries",2,o),this.wa=es("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new oc(o&&o.concurrentRequestLimit),this.Da=new em,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=bc.prototype,e.la=8,e.G=1,e.connect=function(o,c,h,p){he(0),this.W=o,this.H=c||{},h&&p!==void 0&&(this.H.OSID=h,this.H.OAID=p),this.F=this.X,this.I=Oc(this,null,this.W),li(this)};function Ho(o){if(Sc(o),o.G==3){var c=o.U++,h=Ke(o.I);if(bt(h,"SID",o.K),bt(h,"RID",c),bt(h,"TYPE","terminate"),ns(o,h),c=new un(o,o.j,c),c.L=2,c.v=ri(Ke(h)),h=!1,l.navigator&&l.navigator.sendBeacon)try{h=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!h&&l.Image&&(new Image().src=c.v,h=!0),h||(c.g=kc(c.j,null),c.g.ea(c.v)),c.F=Date.now(),ti(c)}Nc(o)}function ai(o){o.g&&(Ko(o),o.g.cancel(),o.g=null)}function Sc(o){ai(o),o.u&&(l.clearTimeout(o.u),o.u=null),ci(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function li(o){if(!ac(o.h)&&!o.s){o.s=!0;var c=o.Ga;it||On(),pt||(it(),pt=!0),be.add(c,o),o.B=0}}function om(o,c){return lc(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Wr(y(o.Ga,o,c),xc(o,o.B)),o.B++,!0)}e.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const R=new un(this,this.j,o);let C=this.o;if(this.S&&(C?(C=g(C),T(C,this.S)):C=this.S),this.m!==null||this.O||(R.H=C,C=null),this.P)t:{for(var c=0,h=0;h<this.i.length;h++){e:{var p=this.i[h];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break e}p=void 0}if(p===void 0)break;if(c+=p,4096<c){c=h;break t}if(c===4096||h===this.i.length-1){c=h+1;break t}}c=1e3}else c=1e3;c=Cc(this,R,c),h=Ke(this.I),bt(h,"RID",o),bt(h,"CVER",22),this.D&&bt(h,"X-HTTP-Session-Id",this.D),ns(this,h),C&&(this.O?c="headers="+encodeURIComponent(String(vc(C)))+"&"+c:this.m&&qo(h,this.m,C)),$o(this.h,R),this.Ua&&bt(h,"TYPE","init"),this.P?(bt(h,"$req",c),bt(h,"SID","null"),R.T=!0,Lo(R,h,null)):Lo(R,h,c),this.G=2}}else this.G==3&&(o?Rc(this,o):this.i.length==0||ac(this.h)||Rc(this))};function Rc(o,c){var h;c?h=c.l:h=o.U++;const p=Ke(o.I);bt(p,"SID",o.K),bt(p,"RID",h),bt(p,"AID",o.T),ns(o,p),o.m&&o.o&&qo(p,o.m,o.o),h=new un(o,o.j,h,o.B+1),o.m===null&&(h.H=o.o),c&&(o.i=c.D.concat(o.i)),c=Cc(o,h,1e3),h.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),$o(o.h,h),Lo(h,p,c)}function ns(o,c){o.H&&Et(o.H,function(h,p){bt(c,p,h)}),o.l&&hc({},function(h,p){bt(c,p,h)})}function Cc(o,c,h){h=Math.min(o.i.length,h);var p=o.l?y(o.l.Na,o.l,o):null;t:{var R=o.i;let C=-1;for(;;){const j=["count="+h];C==-1?0<h?(C=R[0].g,j.push("ofs="+C)):C=0:j.push("ofs="+C);let Tt=!0;for(let Qt=0;Qt<h;Qt++){let mt=R[Qt].g;const ee=R[Qt].map;if(mt-=C,0>mt)C=Math.max(0,R[Qt].g-100),Tt=!1;else try{nm(ee,j,"req"+mt+"_")}catch{p&&p(ee)}}if(Tt){p=j.join("&");break t}}}return o=o.i.splice(0,h),c.D=o,p}function Pc(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;it||On(),pt||(it(),pt=!0),be.add(c,o),o.v=0}}function zo(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Wr(y(o.Fa,o),xc(o,o.v)),o.v++,!0)}e.Fa=function(){if(this.u=null,Vc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Wr(y(this.ab,this),o)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,he(10),ai(this),Vc(this))};function Ko(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Vc(o){o.g=new un(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=Ke(o.qa);bt(c,"RID","rpc"),bt(c,"SID",o.K),bt(c,"AID",o.T),bt(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&bt(c,"TO",o.ja),bt(c,"TYPE","xmlhttp"),ns(o,c),o.m&&o.o&&qo(c,o.m,o.o),o.L&&(o.g.I=o.L);var h=o.g;o=o.ia,h.L=1,h.v=ri(Ke(c)),h.m=null,h.P=!0,rc(h,o)}e.Za=function(){this.C!=null&&(this.C=null,ai(this),zo(this),he(19))};function ci(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function Dc(o,c){var h=null;if(o.g==c){ci(o),Ko(o),o.g=null;var p=2}else if(jo(o.h,c))h=c.D,cc(o.h,c),p=1;else return;if(o.G!=0){if(c.o)if(p==1){h=c.m?c.m.length:0,c=Date.now()-c.F;var R=o.B;p=Js(),ot(p,new Zl(p,h)),li(o)}else Pc(o);else if(R=c.s,R==3||R==0&&0<c.X||!(p==1&&om(o,c)||p==2&&zo(o)))switch(h&&0<h.length&&(c=o.h,c.i=c.i.concat(h)),R){case 1:Bn(o,5);break;case 4:Bn(o,10);break;case 3:Bn(o,6);break;default:Bn(o,2)}}}function xc(o,c){let h=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(h*=2),h*c}function Bn(o,c){if(o.j.info("Error code "+c),c==2){var h=y(o.fb,o),p=o.Xa;const R=!p;p=new Un(p||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||ei(p,"https"),ri(p),R?Zp(p.toString(),h):tm(p.toString(),h)}else he(2);o.G=0,o.l&&o.l.sa(c),Nc(o),Sc(o)}e.fb=function(o){o?(this.j.info("Successfully pinged google.com"),he(2)):(this.j.info("Failed to ping google.com"),he(1))};function Nc(o){if(o.G=0,o.ka=[],o.l){const c=uc(o.h);(c.length!=0||o.i.length!=0)&&(L(o.ka,c),L(o.ka,o.i),o.h.i.length=0,F(o.i),o.i.length=0),o.l.ra()}}function Oc(o,c,h){var p=h instanceof Un?Ke(h):new Un(h);if(p.g!="")c&&(p.g=c+"."+p.g),ni(p,p.s);else{var R=l.location;p=R.protocol,c=c?c+"."+R.hostname:R.hostname,R=+R.port;var C=new Un(null);p&&ei(C,p),c&&(C.g=c),R&&ni(C,R),h&&(C.l=h),p=C}return h=o.D,c=o.ya,h&&c&&bt(p,h,c),bt(p,"VER",o.la),ns(o,p),p}function kc(o,c,h){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new Dt(new si({eb:h})):new Dt(o.pa),c.Ha(o.J),c}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mc(){}e=Mc.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function ui(){}ui.prototype.g=function(o,c){return new ge(o,c)};function ge(o,c){Z.call(this),this.g=new bc(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!W(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!W(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new cr(this)}V(ge,Z),ge.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ge.prototype.close=function(){Ho(this.g)},ge.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var h={};h.__data__=o,o=h}else this.u&&(h={},h.__data__=Gt(o),o=h);c.i.push(new qp(c.Ya++,o)),c.G==3&&li(c)},ge.prototype.N=function(){this.g.l=null,delete this.j,Ho(this.g),delete this.g,ge.aa.N.call(this)};function Fc(o){Oo.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){t:{for(const h in c){o=h;break t}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}V(Fc,Oo);function Lc(){ko.call(this),this.status=1}V(Lc,ko);function cr(o){this.g=o}V(cr,Mc),cr.prototype.ua=function(){ot(this.g,"a")},cr.prototype.ta=function(o){ot(this.g,new Fc(o))},cr.prototype.sa=function(o){ot(this.g,new Lc)},cr.prototype.ra=function(){ot(this.g,"b")},ui.prototype.createWebChannel=ui.prototype.g,ge.prototype.send=ge.prototype.o,ge.prototype.open=ge.prototype.m,ge.prototype.close=ge.prototype.close,hd=function(){return new ui},ud=function(){return Js()},cd=Fn,Va={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ys.NO_ERROR=0,Ys.TIMEOUT=8,Ys.HTTP_ERROR=6,Ri=Ys,tc.COMPLETE="complete",ld=tc,Ql.EventType=zr,zr.OPEN="a",zr.CLOSE="b",zr.ERROR="c",zr.MESSAGE="d",Z.prototype.listen=Z.prototype.K,ls=Ql,Dt.prototype.listenOnce=Dt.prototype.L,Dt.prototype.getLastError=Dt.prototype.Ka,Dt.prototype.getLastErrorCode=Dt.prototype.Ba,Dt.prototype.getStatus=Dt.prototype.Z,Dt.prototype.getResponseJson=Dt.prototype.Oa,Dt.prototype.getResponseText=Dt.prototype.oa,Dt.prototype.send=Dt.prototype.ea,Dt.prototype.setWithCredentials=Dt.prototype.Ha,ad=Dt}).apply(typeof gi<"u"?gi:typeof self<"u"?self:typeof window<"u"?window:{});const Ou="@firebase/firestore",ku="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ie.UNAUTHENTICATED=new ie(null),ie.GOOGLE_CREDENTIALS=new ie("google-credentials-uid"),ie.FIRST_PARTY=new ie("first-party-uid"),ie.MOCK_USER=new ie("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lr="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yn=new td("@firebase/firestore");function _r(){return Yn.logLevel}function H(e,...t){if(Yn.logLevel<=dt.DEBUG){const n=t.map(gl);Yn.debug(`Firestore (${Lr}): ${e}`,...n)}}function on(e,...t){if(Yn.logLevel<=dt.ERROR){const n=t.map(gl);Yn.error(`Firestore (${Lr}): ${e}`,...n)}}function Rn(e,...t){if(Yn.logLevel<=dt.WARN){const n=t.map(gl);Yn.warn(`Firestore (${Lr}): ${e}`,...n)}}function gl(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,fd(e,r,n)}function fd(e,t,n){let r=`FIRESTORE (${Lr}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw on(r),new Error(r)}function yt(e,t,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,e||fd(t,s,r)}function st(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends Fr{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Nv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(ie.UNAUTHENTICATED)))}shutdown(){}}class Ov{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class kv{constructor(t){this.t=t,this.currentUser=ie.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){yt(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Ye;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Ye,t.enqueueRetryable((()=>s(this.currentUser)))};const a=()=>{const u=i;t.enqueueRetryable((async()=>{await u.promise,await s(this.currentUser)}))},l=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((u=>l(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Ye)}}),0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==t?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(yt(typeof r.accessToken=="string",31837,{l:r}),new dd(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return yt(t===null||typeof t=="string",2055,{h:t}),new ie(t)}}class Mv{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=ie.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Fv{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new Mv(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(ie.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Mu{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Lv{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yv(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){yt(this.o===void 0,3512);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,H("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable((()=>r(i)))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Mu(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(yt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Mu(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=Uv(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=t.charAt(s[i]%62))}return r}}function ct(e,t){return e<t?-1:e>t?1:0}function Da(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),s=t.codePointAt(n);if(r!==s){if(r<128&&s<128)return ct(r,s);{const i=pd(),a=Bv(i.encode(Fu(e,n)),i.encode(Fu(t,n)));return a!==0?a:ct(r,s)}}n+=r>65535?2:1}return ct(e.length,t.length)}function Fu(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function Bv(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return ct(e[n],t[n]);return ct(e.length,t.length)}function Vr(e,t,n){return e.length===t.length&&e.every(((r,s)=>n(r,t[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lu="__name__";class Oe{constructor(t,n,r){n===void 0?n=0:n>t.length&&tt(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&tt(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return Oe.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Oe?t.forEach((r=>{n.push(r)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let s=0;s<r;s++){const i=Oe.compareSegments(t.get(s),n.get(s));if(i!==0)return i}return ct(t.length,n.length)}static compareSegments(t,n){const r=Oe.isNumericId(t),s=Oe.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Oe.extractNumericId(t).compare(Oe.extractNumericId(n)):Da(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return wn.fromString(t.substring(4,t.length-2))}}class St extends Oe{construct(t,n,r){return new St(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new G(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new St(n)}static emptyPath(){return new St([])}}const jv=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yt extends Oe{construct(t,n,r){return new Yt(t,n,r)}static isValidIdentifier(t){return jv.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yt.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Lu}static keyField(){return new Yt([Lu])}static fromServerFormat(t){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new G(x.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<t.length;){const l=t[s];if(l==="\\"){if(s+1===t.length)throw new G(x.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new G(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new G(x.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Yt(n)}static emptyPath(){return new Yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(t){this.path=t}static fromPath(t){return new J(St.fromString(t))}static fromName(t){return new J(St.fromString(t).popFirst(5))}static empty(){return new J(St.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&St.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return St.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new J(new St(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function md(e,t,n){if(!n)throw new G(x.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function $v(e,t,n,r){if(t===!0&&r===!0)throw new G(x.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Uu(e){if(!J.isDocumentKey(e))throw new G(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Bu(e){if(J.isDocumentKey(e))throw new G(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function gd(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function yl(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":tt(12329,{type:typeof e})}function Ze(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new G(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=yl(e);throw new G(x.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(e,t){const n={typeString:e};return t&&(n.value=t),n}function $s(e,t){if(!gd(e))throw new G(x.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const s=t[r].typeString,i="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const a=e[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new G(x.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ju=-62135596800,$u=1e6;class Rt{static now(){return Rt.fromMillis(Date.now())}static fromDate(t){return Rt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*$u);return new Rt(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new G(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<ju)throw new G(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new G(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$u}_compareTo(t){return this.seconds===t.seconds?ct(this.nanoseconds,t.nanoseconds):ct(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Rt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if($s(t,Rt._jsonSchema))return new Rt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-ju;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Rt._jsonSchemaVersion="firestore/timestamp/1.0",Rt._jsonSchema={type:Lt("string",Rt._jsonSchemaVersion),seconds:Lt("number"),nanoseconds:Lt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{static fromTimestamp(t){return new rt(t)}static min(){return new rt(new Rt(0,0))}static max(){return new rt(new Rt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs=-1;function qv(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=rt.fromTimestamp(r===1e9?new Rt(n+1,0):new Rt(n,r));return new Cn(s,J.empty(),t)}function Hv(e){return new Cn(e.readTime,e.key,xs)}class Cn{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Cn(rt.min(),J.empty(),xs)}static max(){return new Cn(rt.max(),J.empty(),xs)}}function zv(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=J.comparator(e.documentKey,t.documentKey),n!==0?n:ct(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Wv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ur(e){if(e.code!==x.FAILED_PRECONDITION||e.message!==Kv)throw e;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&tt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new D(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof D?n:D.resolve(n)}catch(n){return D.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):D.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):D.reject(n)}static resolve(t){return new D(((n,r)=>{n(t)}))}static reject(t){return new D(((n,r)=>{r(t)}))}static waitFor(t){return new D(((n,r)=>{let s=0,i=0,a=!1;t.forEach((l=>{++s,l.next((()=>{++i,a&&i===s&&n()}),(u=>r(u)))})),a=!0,i===s&&n()}))}static or(t){let n=D.resolve(!1);for(const r of t)n=n.next((s=>s?D.resolve(s):r()));return n}static forEach(t,n){const r=[];return t.forEach(((s,i)=>{r.push(n.call(this,s,i))})),this.waitFor(r)}static mapArray(t,n){return new D(((r,s)=>{const i=t.length,a=new Array(i);let l=0;for(let u=0;u<i;u++){const f=u;n(t[f]).next((d=>{a[f]=d,++l,l===i&&r(a)}),(d=>s(d)))}}))}static doWhile(t,n){return new D(((r,s)=>{const i=()=>{t()===!0?n().next((()=>{i()}),s):r()};i()}))}}function Gv(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Br(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ae&&this.ae(t),t}}yo.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl=-1;function vo(e){return e==null}function Wi(e){return e===0&&1/e==-1/0}function Qv(e){return typeof e=="number"&&Number.isInteger(e)&&!Wi(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d="";function Xv(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=qu(t)),t=Jv(e.get(n),t);return qu(t)}function Jv(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const i=e.charAt(s);switch(i){case"\0":n+="";break;case _d:n+="";break;default:n+=i}}return n}function qu(e){return e+_d+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hu(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function nr(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function yd(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(t,n){this.comparator=t,this.root=n||Xt.EMPTY}insert(t,n){return new Vt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(t){return new Vt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,r)=>(t(n,r),!1)))}toString(){const t=[];return this.inorderTraversal(((n,r)=>(t.push(`${n}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new _i(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new _i(this.root,t,this.comparator,!1)}getReverseIterator(){return new _i(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new _i(this.root,t,this.comparator,!0)}}class _i{constructor(t,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=n?r(t.key,n):1,n&&s&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Xt{constructor(t,n,r,s,i){this.key=t,this.value=n,this.color=r??Xt.RED,this.left=s??Xt.EMPTY,this.right=i??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,s,i){return new Xt(t??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let s=this;const i=r(t,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(t,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return Xt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw tt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw tt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw tt(27949);return t+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw tt(57766)}get value(){throw tt(16141)}get color(){throw tt(16727)}get left(){throw tt(29726)}get right(){throw tt(36894)}copy(t,n,r,s,i){return this}insert(t,n,r){return new Xt(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(t){this.comparator=t,this.data=new Vt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,r)=>(t(n),!1)))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new zu(this.data.getIterator())}getIteratorFrom(t){return new zu(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((r=>{n=n.add(r)})),n}isEqual(t){if(!(t instanceof Ht)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new Ht(this.comparator);return n.data=t,n}}class zu{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(t){this.fields=t,t.sort(Yt.comparator)}static empty(){return new Re([])}unionWith(t){let n=new Ht(Yt.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Re(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Vr(this.fields,t.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new vd("Invalid base64 string: "+i):i}})(t);return new Zt(n)}static fromUint8Array(t){const n=(function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i})(t);return new Zt(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ct(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Zt.EMPTY_BYTE_STRING=new Zt("");const Yv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pn(e){if(yt(!!e,39018),typeof e=="string"){let t=0;const n=Yv.exec(e);if(yt(!!n,46558,{timestamp:e}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ot(e.seconds),nanos:Ot(e.nanos)}}function Ot(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Vn(e){return typeof e=="string"?Zt.fromBase64String(e):Zt.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed="server_timestamp",Td="__type__",Id="__previous_value__",wd="__local_write_time__";function El(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[Td])===null||n===void 0?void 0:n.stringValue)===Ed}function Eo(e){const t=e.mapValue.fields[Id];return El(t)?Eo(t):t}function Ns(e){const t=Pn(e.mapValue.fields[wd].timestampValue);return new Rt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(t,n,r,s,i,a,l,u,f,d){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=f,this.isUsingEmulator=d}}const Gi="(default)";class Os{constructor(t,n){this.projectId=t,this.database=n||Gi}static empty(){return new Os("","")}get isDefaultDatabase(){return this.database===Gi}isEqual(t){return t instanceof Os&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad="__type__",tE="__max__",yi={mapValue:{}},bd="__vector__",Qi="value";function Dn(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?El(e)?4:nE(e)?9007199254740991:eE(e)?10:11:tt(28295,{value:e})}function $e(e,t){if(e===t)return!0;const n=Dn(e);if(n!==Dn(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ns(e).isEqual(Ns(t));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Pn(s.timestampValue),l=Pn(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos})(e,t);case 5:return e.stringValue===t.stringValue;case 6:return(function(s,i){return Vn(s.bytesValue).isEqual(Vn(i.bytesValue))})(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return(function(s,i){return Ot(s.geoPointValue.latitude)===Ot(i.geoPointValue.latitude)&&Ot(s.geoPointValue.longitude)===Ot(i.geoPointValue.longitude)})(e,t);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return Ot(s.integerValue)===Ot(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Ot(s.doubleValue),l=Ot(i.doubleValue);return a===l?Wi(a)===Wi(l):isNaN(a)&&isNaN(l)}return!1})(e,t);case 9:return Vr(e.arrayValue.values||[],t.arrayValue.values||[],$e);case 10:case 11:return(function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Hu(a)!==Hu(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!$e(a[u],l[u])))return!1;return!0})(e,t);default:return tt(52216,{left:e})}}function ks(e,t){return(e.values||[]).find((n=>$e(n,t)))!==void 0}function Dr(e,t){if(e===t)return 0;const n=Dn(e),r=Dn(t);if(n!==r)return ct(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ct(e.booleanValue,t.booleanValue);case 2:return(function(i,a){const l=Ot(i.integerValue||i.doubleValue),u=Ot(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1})(e,t);case 3:return Ku(e.timestampValue,t.timestampValue);case 4:return Ku(Ns(e),Ns(t));case 5:return Da(e.stringValue,t.stringValue);case 6:return(function(i,a){const l=Vn(i),u=Vn(a);return l.compareTo(u)})(e.bytesValue,t.bytesValue);case 7:return(function(i,a){const l=i.split("/"),u=a.split("/");for(let f=0;f<l.length&&f<u.length;f++){const d=ct(l[f],u[f]);if(d!==0)return d}return ct(l.length,u.length)})(e.referenceValue,t.referenceValue);case 8:return(function(i,a){const l=ct(Ot(i.latitude),Ot(a.latitude));return l!==0?l:ct(Ot(i.longitude),Ot(a.longitude))})(e.geoPointValue,t.geoPointValue);case 9:return Wu(e.arrayValue,t.arrayValue);case 10:return(function(i,a){var l,u,f,d;const m=i.fields||{},y=a.fields||{},b=(l=m[Qi])===null||l===void 0?void 0:l.arrayValue,V=(u=y[Qi])===null||u===void 0?void 0:u.arrayValue,F=ct(((f=b==null?void 0:b.values)===null||f===void 0?void 0:f.length)||0,((d=V==null?void 0:V.values)===null||d===void 0?void 0:d.length)||0);return F!==0?F:Wu(b,V)})(e.mapValue,t.mapValue);case 11:return(function(i,a){if(i===yi.mapValue&&a===yi.mapValue)return 0;if(i===yi.mapValue)return 1;if(a===yi.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),f=a.fields||{},d=Object.keys(f);u.sort(),d.sort();for(let m=0;m<u.length&&m<d.length;++m){const y=Da(u[m],d[m]);if(y!==0)return y;const b=Dr(l[u[m]],f[d[m]]);if(b!==0)return b}return ct(u.length,d.length)})(e.mapValue,t.mapValue);default:throw tt(23264,{le:n})}}function Ku(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ct(e,t);const n=Pn(e),r=Pn(t),s=ct(n.seconds,r.seconds);return s!==0?s:ct(n.nanos,r.nanos)}function Wu(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Dr(n[s],r[s]);if(i)return i}return ct(n.length,r.length)}function xr(e){return xa(e)}function xa(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(function(n){const r=Pn(n);return`time(${r.seconds},${r.nanos})`})(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?(function(n){return Vn(n).toBase64()})(e.bytesValue):"referenceValue"in e?(function(n){return J.fromName(n).toString()})(e.referenceValue):"geoPointValue"in e?(function(n){return`geo(${n.latitude},${n.longitude})`})(e.geoPointValue):"arrayValue"in e?(function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=xa(i);return r+"]"})(e.arrayValue):"mapValue"in e?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${xa(n.fields[a])}`;return s+"}"})(e.mapValue):tt(61005,{value:e})}function Ci(e){switch(Dn(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Eo(e);return t?16+Ci(t):16;case 5:return 2*e.stringValue.length;case 6:return Vn(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+Ci(i)),0)})(e.arrayValue);case 10:case 11:return(function(r){let s=0;return nr(r.fields,((i,a)=>{s+=i.length+Ci(a)})),s})(e.mapValue);default:throw tt(13486,{value:e})}}function Na(e){return!!e&&"integerValue"in e}function Tl(e){return!!e&&"arrayValue"in e}function Gu(e){return!!e&&"nullValue"in e}function Qu(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Pi(e){return!!e&&"mapValue"in e}function eE(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[Ad])===null||n===void 0?void 0:n.stringValue)===bd}function Ts(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return nr(e.mapValue.fields,((n,r)=>t.mapValue.fields[n]=Ts(r))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ts(e.arrayValue.values[n]);return t}return Object.assign({},e)}function nE(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===tE}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(t){this.value=t}static empty(){return new Ie({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!Pi(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ts(n)}setAll(t){let n=Yt.emptyPath(),r={},s=[];t.forEach(((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=Ts(a):s.push(l.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(t){const n=this.field(t.popLast());Pi(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return $e(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let s=n.mapValue.fields[t.get(r)];Pi(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,r){nr(n,((s,i)=>t[s]=i));for(const s of r)delete t[s]}clone(){return new Ie(Ts(this.value))}}function Sd(e){const t=[];return nr(e.fields,((n,r)=>{const s=new Yt([n]);if(Pi(r)){const i=Sd(r.mapValue).fields;if(i.length===0)t.push(s);else for(const a of i)t.push(s.child(a))}else t.push(s)})),new Re(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(t,n,r,s,i,a,l){this.key=t,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(t){return new ae(t,0,rt.min(),rt.min(),rt.min(),Ie.empty(),0)}static newFoundDocument(t,n,r,s){return new ae(t,1,n,rt.min(),r,s,0)}static newNoDocument(t,n){return new ae(t,2,n,rt.min(),rt.min(),Ie.empty(),0)}static newUnknownDocument(t,n){return new ae(t,3,n,rt.min(),rt.min(),Ie.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(rt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ie.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ie.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=rt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ae&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ae(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(t,n){this.position=t,this.inclusive=n}}function Xu(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(i.field.isKeyField()?r=J.comparator(J.fromName(a.referenceValue),n.key):r=Dr(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ju(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!$e(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(t,n="asc"){this.field=t,this.dir=n}}function rE(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{}class $t extends Rd{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new iE(t,n,r):n==="array-contains"?new lE(t,r):n==="in"?new cE(t,r):n==="not-in"?new uE(t,r):n==="array-contains-any"?new hE(t,r):new $t(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new oE(t,r):new aE(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Dr(n,this.value)):n!==null&&Dn(this.value)===Dn(n)&&this.matchesComparison(Dr(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return tt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qe extends Rd{constructor(t,n){super(),this.filters=t,this.op=n,this.he=null}static create(t,n){return new qe(t,n)}matches(t){return Cd(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Cd(e){return e.op==="and"}function Pd(e){return sE(e)&&Cd(e)}function sE(e){for(const t of e.filters)if(t instanceof qe)return!1;return!0}function Oa(e){if(e instanceof $t)return e.field.canonicalString()+e.op.toString()+xr(e.value);if(Pd(e))return e.filters.map((t=>Oa(t))).join(",");{const t=e.filters.map((n=>Oa(n))).join(",");return`${e.op}(${t})`}}function Vd(e,t){return e instanceof $t?(function(r,s){return s instanceof $t&&r.op===s.op&&r.field.isEqual(s.field)&&$e(r.value,s.value)})(e,t):e instanceof qe?(function(r,s){return s instanceof qe&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,a,l)=>i&&Vd(a,s.filters[l])),!0):!1})(e,t):void tt(19439)}function Dd(e){return e instanceof $t?(function(n){return`${n.field.canonicalString()} ${n.op} ${xr(n.value)}`})(e):e instanceof qe?(function(n){return n.op.toString()+" {"+n.getFilters().map(Dd).join(" ,")+"}"})(e):"Filter"}class iE extends $t{constructor(t,n,r){super(t,n,r),this.key=J.fromName(r.referenceValue)}matches(t){const n=J.comparator(t.key,this.key);return this.matchesComparison(n)}}class oE extends $t{constructor(t,n){super(t,"in",n),this.keys=xd("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class aE extends $t{constructor(t,n){super(t,"not-in",n),this.keys=xd("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function xd(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((r=>J.fromName(r.referenceValue)))}class lE extends $t{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Tl(n)&&ks(n.arrayValue,this.value)}}class cE extends $t{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&ks(this.value.arrayValue,n)}}class uE extends $t{constructor(t,n){super(t,"not-in",n)}matches(t){if(ks(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ks(this.value.arrayValue,n)}}class hE extends $t{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Tl(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>ks(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(t,n=null,r=[],s=[],i=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Pe=null}}function Yu(e,t=null,n=[],r=[],s=null,i=null,a=null){return new fE(e,t,n,r,s,i,a)}function Il(e){const t=st(e);if(t.Pe===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((r=>Oa(r))).join(","),n+="|ob:",n+=t.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),vo(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((r=>xr(r))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((r=>xr(r))).join(",")),t.Pe=n}return t.Pe}function wl(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!rE(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Vd(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ju(e.startAt,t.startAt)&&Ju(e.endAt,t.endAt)}function ka(e){return J.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(t,n=null,r=[],s=[],i=null,a="F",l=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function dE(e,t,n,r,s,i,a,l){return new To(e,t,n,r,s,i,a,l)}function Io(e){return new To(e)}function Zu(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function pE(e){return e.collectionGroup!==null}function Is(e){const t=st(e);if(t.Te===null){t.Te=[];const n=new Set;for(const i of t.explicitOrderBy)t.Te.push(i),n.add(i.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Ht(Yt.comparator);return a.filters.forEach((u=>{u.getFlattenedFilters().forEach((f=>{f.isInequality()&&(l=l.add(f.field))}))})),l})(t).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||t.Te.push(new Ji(i,r))})),n.has(Yt.keyField().canonicalString())||t.Te.push(new Ji(Yt.keyField(),r))}return t.Te}function Fe(e){const t=st(e);return t.Ie||(t.Ie=mE(t,Is(e))),t.Ie}function mE(e,t){if(e.limitType==="F")return Yu(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new Ji(s.field,i)}));const n=e.endAt?new Xi(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Xi(e.startAt.position,e.startAt.inclusive):null;return Yu(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Ma(e,t,n){return new To(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function wo(e,t){return wl(Fe(e),Fe(t))&&e.limitType===t.limitType}function Nd(e){return`${Il(Fe(e))}|lt:${e.limitType}`}function yr(e){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>Dd(s))).join(", ")}]`),vo(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>xr(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>xr(s))).join(",")),`Target(${r})`})(Fe(e))}; limitType=${e.limitType})`}function Ao(e,t){return t.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):J.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(e,t)&&(function(r,s){for(const i of Is(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(e,t)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(e,t)&&(function(r,s){return!(r.startAt&&!(function(a,l,u){const f=Xu(a,l,u);return a.inclusive?f<=0:f<0})(r.startAt,Is(r),s)||r.endAt&&!(function(a,l,u){const f=Xu(a,l,u);return a.inclusive?f>=0:f>0})(r.endAt,Is(r),s))})(e,t)}function gE(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Od(e){return(t,n)=>{let r=!1;for(const s of Is(e)){const i=_E(s,t,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function _E(e,t,n){const r=e.field.isKeyField()?J.comparator(t.key,n.key):(function(i,a,l){const u=a.data.field(i),f=l.data.field(i);return u!==null&&f!==null?Dr(u,f):tt(42886)})(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return tt(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,t))return i}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return void(s[i]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(t){nr(this.inner,((n,r)=>{for(const[s,i]of r)t(s,i)}))}isEmpty(){return yd(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE=new Vt(J.comparator);function an(){return yE}const kd=new Vt(J.comparator);function cs(...e){let t=kd;for(const n of e)t=t.insert(n.key,n);return t}function Md(e){let t=kd;return e.forEach(((n,r)=>t=t.insert(n,r.overlayedDocument))),t}function Wn(){return ws()}function Fd(){return ws()}function ws(){return new rr((e=>e.toString()),((e,t)=>e.isEqual(t)))}const vE=new Vt(J.comparator),EE=new Ht(J.comparator);function ut(...e){let t=EE;for(const n of e)t=t.add(n);return t}const TE=new Ht(ct);function IE(){return TE}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Al(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wi(t)?"-0":t}}function Ld(e){return{integerValue:""+e}}function wE(e,t){return Qv(t)?Ld(t):Al(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(){this._=void 0}}function AE(e,t,n){return e instanceof Yi?(function(s,i){const a={fields:{[Td]:{stringValue:Ed},[wd]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&El(i)&&(i=Eo(i)),i&&(a.fields[Id]=i),{mapValue:a}})(n,t):e instanceof Ms?Bd(e,t):e instanceof Fs?jd(e,t):(function(s,i){const a=Ud(s,i),l=th(a)+th(s.Ee);return Na(a)&&Na(s.Ee)?Ld(l):Al(s.serializer,l)})(e,t)}function bE(e,t,n){return e instanceof Ms?Bd(e,t):e instanceof Fs?jd(e,t):n}function Ud(e,t){return e instanceof Zi?(function(r){return Na(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(t)?t:{integerValue:0}:null}class Yi extends bo{}class Ms extends bo{constructor(t){super(),this.elements=t}}function Bd(e,t){const n=$d(t);for(const r of e.elements)n.some((s=>$e(s,r)))||n.push(r);return{arrayValue:{values:n}}}class Fs extends bo{constructor(t){super(),this.elements=t}}function jd(e,t){let n=$d(t);for(const r of e.elements)n=n.filter((s=>!$e(s,r)));return{arrayValue:{values:n}}}class Zi extends bo{constructor(t,n){super(),this.serializer=t,this.Ee=n}}function th(e){return Ot(e.integerValue||e.doubleValue)}function $d(e){return Tl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function SE(e,t){return e.field.isEqual(t.field)&&(function(r,s){return r instanceof Ms&&s instanceof Ms||r instanceof Fs&&s instanceof Fs?Vr(r.elements,s.elements,$e):r instanceof Zi&&s instanceof Zi?$e(r.Ee,s.Ee):r instanceof Yi&&s instanceof Yi})(e.transform,t.transform)}class RE{constructor(t,n){this.version=t,this.transformResults=n}}class tn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new tn}static exists(t){return new tn(void 0,t)}static updateTime(t){return new tn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Vi(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class So{}function qd(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new zd(e.key,tn.none()):new qs(e.key,e.data,tn.none());{const n=e.data,r=Ie.empty();let s=new Ht(Yt.comparator);for(let i of t.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new sr(e.key,r,new Re(s.toArray()),tn.none())}}function CE(e,t,n){e instanceof qs?(function(s,i,a){const l=s.value.clone(),u=nh(s.fieldTransforms,i,a.transformResults);l.setAll(u),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(e,t,n):e instanceof sr?(function(s,i,a){if(!Vi(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=nh(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(Hd(s)),u.setAll(l),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()})(e,t,n):(function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()})(0,t,n)}function As(e,t,n,r){return e instanceof qs?(function(i,a,l,u){if(!Vi(i.precondition,a))return l;const f=i.value.clone(),d=rh(i.fieldTransforms,u,a);return f.setAll(d),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null})(e,t,n,r):e instanceof sr?(function(i,a,l,u){if(!Vi(i.precondition,a))return l;const f=rh(i.fieldTransforms,u,a),d=a.data;return d.setAll(Hd(i)),d.setAll(f),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((m=>m.field)))})(e,t,n,r):(function(i,a,l){return Vi(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l})(e,t,n)}function PE(e,t){let n=null;for(const r of e.fieldTransforms){const s=t.data.field(r.field),i=Ud(r.transform,s||null);i!=null&&(n===null&&(n=Ie.empty()),n.set(r.field,i))}return n||null}function eh(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Vr(r,s,((i,a)=>SE(i,a)))})(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class qs extends So{constructor(t,n,r,s=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class sr extends So{constructor(t,n,r,s,i=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Hd(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function nh(e,t,n){const r=new Map;yt(e.length===n.length,32656,{Ae:n.length,Re:e.length});for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,l=t.data.field(i.field);r.set(i.field,bE(a,l,n[s]))}return r}function rh(e,t,n){const r=new Map;for(const s of e){const i=s.transform,a=n.data.field(s.field);r.set(s.field,AE(i,a,t))}return r}class zd extends So{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class VE extends So{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(t,n,r,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(t.key)&&CE(i,t,r[s])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=As(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=As(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=Fd();return this.mutations.forEach((s=>{const i=t.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const u=qd(a,l);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(rt.min())})),r}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),ut())}isEqual(t){return this.batchId===t.batchId&&Vr(this.mutations,t.mutations,((n,r)=>eh(n,r)))&&Vr(this.baseMutations,t.baseMutations,((n,r)=>eh(n,r)))}}class bl{constructor(t,n,r,s){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(t,n,r){yt(t.mutations.length===r.length,58842,{Ve:t.mutations.length,me:r.length});let s=(function(){return vE})();const i=t.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new bl(t,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft,ft;function OE(e){switch(e){case x.OK:return tt(64938);case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0;default:return tt(15467,{code:e})}}function Kd(e){if(e===void 0)return on("GRPC error has no .code"),x.UNKNOWN;switch(e){case Ft.OK:return x.OK;case Ft.CANCELLED:return x.CANCELLED;case Ft.UNKNOWN:return x.UNKNOWN;case Ft.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case Ft.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case Ft.INTERNAL:return x.INTERNAL;case Ft.UNAVAILABLE:return x.UNAVAILABLE;case Ft.UNAUTHENTICATED:return x.UNAUTHENTICATED;case Ft.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case Ft.NOT_FOUND:return x.NOT_FOUND;case Ft.ALREADY_EXISTS:return x.ALREADY_EXISTS;case Ft.PERMISSION_DENIED:return x.PERMISSION_DENIED;case Ft.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case Ft.ABORTED:return x.ABORTED;case Ft.OUT_OF_RANGE:return x.OUT_OF_RANGE;case Ft.UNIMPLEMENTED:return x.UNIMPLEMENTED;case Ft.DATA_LOSS:return x.DATA_LOSS;default:return tt(39323,{code:e})}}(ft=Ft||(Ft={}))[ft.OK=0]="OK",ft[ft.CANCELLED=1]="CANCELLED",ft[ft.UNKNOWN=2]="UNKNOWN",ft[ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ft[ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ft[ft.NOT_FOUND=5]="NOT_FOUND",ft[ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",ft[ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",ft[ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",ft[ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ft[ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ft[ft.ABORTED=10]="ABORTED",ft[ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",ft[ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",ft[ft.INTERNAL=13]="INTERNAL",ft[ft.UNAVAILABLE=14]="UNAVAILABLE",ft[ft.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE=new wn([4294967295,4294967295],0);function sh(e){const t=pd().encode(e),n=new od;return n.update(t),new Uint8Array(n.digest())}function ih(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new wn([n,r],0),new wn([s,i],0)]}class Sl{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new us(`Invalid padding: ${n}`);if(r<0)throw new us(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new us(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new us(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*t.length-n,this.ge=wn.fromNumber(this.fe)}pe(t,n,r){let s=t.add(n.multiply(wn.fromNumber(r)));return s.compare(kE)===1&&(s=new wn([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.fe===0)return!1;const n=sh(t),[r,s]=ih(n);for(let i=0;i<this.hashCount;i++){const a=this.pe(r,s,i);if(!this.ye(a))return!1}return!0}static create(t,n,r){const s=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),a=new Sl(i,s,n);return r.forEach((l=>a.insert(l))),a}insert(t){if(this.fe===0)return;const n=sh(t),[r,s]=ih(n);for(let i=0;i<this.hashCount;i++){const a=this.pe(r,s,i);this.we(a)}}we(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class us extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(t,n,r,s,i){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const s=new Map;return s.set(t,Hs.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Ro(rt.min(),s,new Vt(ct),an(),ut())}}class Hs{constructor(t,n,r,s,i){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new Hs(r,n,ut(),ut(),ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(t,n,r,s){this.Se=t,this.removedTargetIds=n,this.key=r,this.be=s}}class Wd{constructor(t,n){this.targetId=t,this.De=n}}class Gd{constructor(t,n,r=Zt.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=s}}class oh{constructor(){this.ve=0,this.Ce=ah(),this.Fe=Zt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(t){t.approximateByteSize()>0&&(this.xe=!0,this.Fe=t)}Le(){let t=ut(),n=ut(),r=ut();return this.Ce.forEach(((s,i)=>{switch(i){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:tt(38017,{changeType:i})}})),new Hs(this.Fe,this.Me,t,n,r)}ke(){this.xe=!1,this.Ce=ah()}qe(t,n){this.xe=!0,this.Ce=this.Ce.insert(t,n)}Qe(t){this.xe=!0,this.Ce=this.Ce.remove(t)}$e(){this.ve+=1}Ue(){this.ve-=1,yt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class ME{constructor(t){this.We=t,this.Ge=new Map,this.ze=an(),this.je=vi(),this.Je=vi(),this.He=new Vt(ct)}Ye(t){for(const n of t.Se)t.be&&t.be.isFoundDocument()?this.Ze(n,t.be):this.Xe(n,t.key,t.be);for(const n of t.removedTargetIds)this.Xe(n,t.key,t.be)}et(t){this.forEachTarget(t,(n=>{const r=this.tt(n);switch(t.state){case 0:this.nt(n)&&r.Be(t.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(t.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(t.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(t.resumeToken));break;default:tt(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Ge.forEach(((r,s)=>{this.nt(s)&&n(s)}))}it(t){const n=t.targetId,r=t.De.count,s=this.st(n);if(s){const i=s.target;if(ka(i))if(r===0){const a=new J(i.path);this.Xe(n,a,ae.newNoDocument(a,rt.min()))}else yt(r===1,20013,{expectedCount:r});else{const a=this.ot(n);if(a!==r){const l=this._t(t),u=l?this.ut(l,t,a):1;if(u!==0){this.rt(n);const f=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,f)}}}}}_t(t){const n=t.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=Vn(r).toUint8Array()}catch(u){if(u instanceof vd)return Rn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Sl(a,s,i)}catch(u){return Rn(u instanceof us?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.fe===0?null:l}ut(t,n,r){return n.De.count===r-this.ht(t,n.targetId)?0:2}ht(t,n){const r=this.We.getRemoteKeysForTarget(n);let s=0;return r.forEach((i=>{const a=this.We.lt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;t.mightContain(l)||(this.Xe(n,i,null),s++)})),s}Pt(t){const n=new Map;this.Ge.forEach(((i,a)=>{const l=this.st(a);if(l){if(i.current&&ka(l.target)){const u=new J(l.target.path);this.Tt(u).has(a)||this.It(a,u)||this.Xe(a,u,ae.newNoDocument(u,t))}i.Ne&&(n.set(a,i.Le()),i.ke())}}));let r=ut();this.Je.forEach(((i,a)=>{let l=!0;a.forEachWhile((u=>{const f=this.st(u);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(r=r.add(i))})),this.ze.forEach(((i,a)=>a.setReadTime(t)));const s=new Ro(t,n,this.He,this.ze,r);return this.ze=an(),this.je=vi(),this.Je=vi(),this.He=new Vt(ct),s}Ze(t,n){if(!this.nt(t))return;const r=this.It(t,n.key)?2:0;this.tt(t).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(t)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(t))}Xe(t,n,r){if(!this.nt(t))return;const s=this.tt(t);this.It(t,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(t)),this.Je=this.Je.insert(n,this.dt(n).add(t)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(t){this.Ge.delete(t)}ot(t){const n=this.tt(t).Le();return this.We.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}$e(t){this.tt(t).$e()}tt(t){let n=this.Ge.get(t);return n||(n=new oh,this.Ge.set(t,n)),n}dt(t){let n=this.Je.get(t);return n||(n=new Ht(ct),this.Je=this.Je.insert(t,n)),n}Tt(t){let n=this.je.get(t);return n||(n=new Ht(ct),this.je=this.je.insert(t,n)),n}nt(t){const n=this.st(t)!==null;return n||H("WatchChangeAggregator","Detected inactive target",t),n}st(t){const n=this.Ge.get(t);return n&&n.Oe?null:this.We.Et(t)}rt(t){this.Ge.set(t,new oh),this.We.getRemoteKeysForTarget(t).forEach((n=>{this.Xe(t,n,null)}))}It(t,n){return this.We.getRemoteKeysForTarget(t).has(n)}}function vi(){return new Vt(J.comparator)}function ah(){return new Vt(J.comparator)}const FE={asc:"ASCENDING",desc:"DESCENDING"},LE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},UE={and:"AND",or:"OR"};class BE{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Fa(e,t){return e.useProto3Json||vo(t)?t:{value:t}}function to(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Qd(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function jE(e,t){return to(e,t.toTimestamp())}function Le(e){return yt(!!e,49232),rt.fromTimestamp((function(n){const r=Pn(n);return new Rt(r.seconds,r.nanos)})(e))}function Rl(e,t){return La(e,t).canonicalString()}function La(e,t){const n=(function(s){return new St(["projects",s.projectId,"databases",s.database])})(e).child("documents");return t===void 0?n:n.child(t)}function Xd(e){const t=St.fromString(e);return yt(ep(t),10190,{key:t.toString()}),t}function Ua(e,t){return Rl(e.databaseId,t.path)}function ca(e,t){const n=Xd(t);if(n.get(1)!==e.databaseId.projectId)throw new G(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new G(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new J(Yd(n))}function Jd(e,t){return Rl(e.databaseId,t)}function $E(e){const t=Xd(e);return t.length===4?St.emptyPath():Yd(t)}function Ba(e){return new St(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Yd(e){return yt(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function lh(e,t,n){return{name:Ua(e,t),fields:n.value.mapValue.fields}}function qE(e,t){let n;if("targetChange"in t){t.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:tt(39313,{state:f})})(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=(function(f,d){return f.useProto3Json?(yt(d===void 0||typeof d=="string",58123),Zt.fromBase64String(d||"")):(yt(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Zt.fromUint8Array(d||new Uint8Array))})(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&(function(f){const d=f.code===void 0?x.UNKNOWN:Kd(f.code);return new G(d,f.message||"")})(a);n=new Gd(r,s,i,l||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=ca(e,r.document.name),i=Le(r.document.updateTime),a=r.document.createTime?Le(r.document.createTime):rt.min(),l=new Ie({mapValue:{fields:r.document.fields}}),u=ae.newFoundDocument(s,i,a,l),f=r.targetIds||[],d=r.removedTargetIds||[];n=new Di(f,d,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=ca(e,r.document),i=r.readTime?Le(r.readTime):rt.min(),a=ae.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Di([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=ca(e,r.document),i=r.removedTargetIds||[];n=new Di([],i,s,null)}else{if(!("filter"in t))return tt(11601,{At:t});{t.filter;const r=t.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new NE(s,i),l=r.targetId;n=new Wd(l,a)}}return n}function HE(e,t){let n;if(t instanceof qs)n={update:lh(e,t.key,t.value)};else if(t instanceof zd)n={delete:Ua(e,t.key)};else if(t instanceof sr)n={update:lh(e,t.key,t.data),updateMask:ZE(t.fieldMask)};else{if(!(t instanceof VE))return tt(16599,{Rt:t.type});n={verify:Ua(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((r=>(function(i,a){const l=a.transform;if(l instanceof Yi)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ms)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Fs)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Zi)return{fieldPath:a.field.canonicalString(),increment:l.Ee};throw tt(20930,{transform:a.transform})})(0,r)))),t.precondition.isNone||(n.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:jE(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:tt(27497)})(e,t.precondition)),n}function zE(e,t){return e&&e.length>0?(yt(t!==void 0,14353),e.map((n=>(function(s,i){let a=s.updateTime?Le(s.updateTime):Le(i);return a.isEqual(rt.min())&&(a=Le(i)),new RE(a,s.transformResults||[])})(n,t)))):[]}function KE(e,t){return{documents:[Jd(e,t.path)]}}function WE(e,t){const n={structuredQuery:{}},r=t.path;let s;t.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Jd(e,s);const i=(function(f){if(f.length!==0)return tp(qe.create(f,"and"))})(t.filters);i&&(n.structuredQuery.where=i);const a=(function(f){if(f.length!==0)return f.map((d=>(function(y){return{field:vr(y.field),direction:XE(y.dir)}})(d)))})(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Fa(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(t.endAt)),{Vt:n,parent:s}}function GE(e){let t=$E(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){yt(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:t=t.child(d.collectionId)}let i=[];n.where&&(i=(function(m){const y=Zd(m);return y instanceof qe&&Pd(y)?y.getFilters():[y]})(n.where));let a=[];n.orderBy&&(a=(function(m){return m.map((y=>(function(V){return new Ji(Er(V.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(y)))})(n.orderBy));let l=null;n.limit&&(l=(function(m){let y;return y=typeof m=="object"?m.value:m,vo(y)?null:y})(n.limit));let u=null;n.startAt&&(u=(function(m){const y=!!m.before,b=m.values||[];return new Xi(b,y)})(n.startAt));let f=null;return n.endAt&&(f=(function(m){const y=!m.before,b=m.values||[];return new Xi(b,y)})(n.endAt)),dE(t,s,a,i,l,"F",u,f)}function QE(e,t){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return tt(28987,{purpose:s})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Zd(e){return e.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Er(n.unaryFilter.field);return $t.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Er(n.unaryFilter.field);return $t.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Er(n.unaryFilter.field);return $t.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Er(n.unaryFilter.field);return $t.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return tt(61313);default:return tt(60726)}})(e):e.fieldFilter!==void 0?(function(n){return $t.create(Er(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return tt(58110);default:return tt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(e):e.compositeFilter!==void 0?(function(n){return qe.create(n.compositeFilter.filters.map((r=>Zd(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return tt(1026)}})(n.compositeFilter.op))})(e):tt(30097,{filter:e})}function XE(e){return FE[e]}function JE(e){return LE[e]}function YE(e){return UE[e]}function vr(e){return{fieldPath:e.canonicalString()}}function Er(e){return Yt.fromServerFormat(e.fieldPath)}function tp(e){return e instanceof $t?(function(n){if(n.op==="=="){if(Qu(n.value))return{unaryFilter:{field:vr(n.field),op:"IS_NAN"}};if(Gu(n.value))return{unaryFilter:{field:vr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Qu(n.value))return{unaryFilter:{field:vr(n.field),op:"IS_NOT_NAN"}};if(Gu(n.value))return{unaryFilter:{field:vr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vr(n.field),op:JE(n.op),value:n.value}}})(e):e instanceof qe?(function(n){const r=n.getFilters().map((s=>tp(s)));return r.length===1?r[0]:{compositeFilter:{op:YE(n.op),filters:r}}})(e):tt(54877,{filter:e})}function ZE(e){const t=[];return e.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function ep(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(t,n,r,s,i=rt.min(),a=rt.min(),l=Zt.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new yn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new yn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new yn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new yn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(t){this.gt=t}}function eT(e){const t=GE({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Ma(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(){this.Dn=new rT}addToCollectionParentIndex(t,n){return this.Dn.add(n),D.resolve()}getCollectionParents(t,n){return D.resolve(this.Dn.getEntries(n))}addFieldIndex(t,n){return D.resolve()}deleteFieldIndex(t,n){return D.resolve()}deleteAllFieldIndexes(t){return D.resolve()}createTargetIndexes(t,n){return D.resolve()}getDocumentsMatchingTarget(t,n){return D.resolve(null)}getIndexType(t,n){return D.resolve(0)}getFieldIndexes(t,n){return D.resolve([])}getNextCollectionGroupToUpdate(t){return D.resolve(null)}getMinOffset(t,n){return D.resolve(Cn.min())}getMinOffsetFromCollectionGroup(t,n){return D.resolve(Cn.min())}updateCollectionGroup(t,n,r){return D.resolve()}updateIndexEntries(t,n){return D.resolve()}}class rT{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n]||new Ht(St.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(t){return(this.index[t]||new Ht(St.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},np=41943040;class me{static withCacheSize(t){return new me(t,me.DEFAULT_COLLECTION_PERCENTILE,me.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */me.DEFAULT_COLLECTION_PERCENTILE=10,me.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,me.DEFAULT=new me(np,me.DEFAULT_COLLECTION_PERCENTILE,me.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),me.DISABLED=new me(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(t){this._r=t}next(){return this._r+=2,this._r}static ar(){return new Nr(0)}static ur(){return new Nr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh="LruGarbageCollector",sT=1048576;function hh([e,t],[n,r]){const s=ct(e,n);return s===0?ct(t,r):s}class iT{constructor(t){this.Tr=t,this.buffer=new Ht(hh),this.Ir=0}dr(){return++this.Ir}Er(t){const n=[t,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();hh(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class oT{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(t){H(uh,`Garbage collection scheduled in ${t}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Br(n)?H(uh,"Ignoring IndexedDB error during garbage collection: ",n):await Ur(n)}await this.Rr(3e5)}))}}class aT{constructor(t,n){this.Vr=t,this.params=n}calculateTargetCount(t,n){return this.Vr.mr(t).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(t,n){if(n===0)return D.resolve(yo.ue);const r=new iT(n);return this.Vr.forEachTarget(t,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.gr(t,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(t,n,r){return this.Vr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.Vr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),D.resolve(ch)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ch):this.pr(t,n)))}getCacheSize(t){return this.Vr.getCacheSize(t)}pr(t,n){let r,s,i,a,l,u,f;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((m=>(m>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,a=Date.now(),this.nthSequenceNumber(t,s)))).next((m=>(r=m,l=Date.now(),this.removeTargets(t,r,n)))).next((m=>(i=m,u=Date.now(),this.removeOrphanedDocuments(t,r)))).next((m=>(f=Date.now(),_r()<=dt.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${m} documents in `+(f-u)+`ms
Total Duration: ${f-d}ms`),D.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m}))))}}function lT(e,t){return new aT(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(){this.changes=new rr((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ae.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?D.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(t,n,r,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(t,n)))).next((s=>(r!==null&&As(r.mutation,s,Re.empty(),Rt.now()),s)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.getLocalViewOfDocuments(t,r,ut()).next((()=>r))))}getLocalViewOfDocuments(t,n,r=ut()){const s=Wn();return this.populateOverlays(t,s,n).next((()=>this.computeViews(t,n,s,r).next((i=>{let a=cs();return i.forEach(((l,u)=>{a=a.insert(l,u.overlayedDocument)})),a}))))}getOverlayedDocuments(t,n){const r=Wn();return this.populateOverlays(t,r,n).next((()=>this.computeViews(t,n,r,ut())))}populateOverlays(t,n,r){const s=[];return r.forEach((i=>{n.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(t,s).next((i=>{i.forEach(((a,l)=>{n.set(a,l)}))}))}computeViews(t,n,r,s){let i=an();const a=ws(),l=(function(){return ws()})();return n.forEach(((u,f)=>{const d=r.get(f.key);s.has(f.key)&&(d===void 0||d.mutation instanceof sr)?i=i.insert(f.key,f):d!==void 0?(a.set(f.key,d.mutation.getFieldMask()),As(d.mutation,f,d.mutation.getFieldMask(),Rt.now())):a.set(f.key,Re.empty())})),this.recalculateAndSaveOverlays(t,i).next((u=>(u.forEach(((f,d)=>a.set(f,d))),n.forEach(((f,d)=>{var m;return l.set(f,new uT(d,(m=a.get(f))!==null&&m!==void 0?m:null))})),l)))}recalculateAndSaveOverlays(t,n){const r=ws();let s=new Vt(((a,l)=>a-l)),i=ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((a=>{for(const l of a)l.keys().forEach((u=>{const f=n.get(u);if(f===null)return;let d=r.get(u)||Re.empty();d=l.applyToLocalView(f,d),r.set(u,d);const m=(s.get(l.batchId)||ut()).add(u);s=s.insert(l.batchId,m)}))})).next((()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),f=u.key,d=u.value,m=Fd();d.forEach((y=>{if(!i.has(y)){const b=qd(n.get(y),r.get(y));b!==null&&m.set(y,b),i=i.add(y)}})),a.push(this.documentOverlayCache.saveOverlays(t,f,m))}return D.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,n,r,s){return(function(a){return J.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):pE(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,s):this.getDocumentsMatchingCollectionQuery(t,n,r,s)}getNextDocuments(t,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,s).next((i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,s-i.size):D.resolve(Wn());let l=xs,u=i;return a.next((f=>D.forEach(f,((d,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(d)?D.resolve():this.remoteDocumentCache.getEntry(t,d).next((y=>{u=u.insert(d,y)}))))).next((()=>this.populateOverlays(t,f,i))).next((()=>this.computeViews(t,u,f,ut()))).next((d=>({batchId:l,changes:Md(d)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new J(n)).next((r=>{let s=cs();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(t,n,r,s){const i=n.collectionGroup;let a=cs();return this.indexManager.getCollectionParents(t,i).next((l=>D.forEach(l,(u=>{const f=(function(m,y){return new To(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)})(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(t,f,r,s).next((d=>{d.forEach(((m,y)=>{a=a.insert(m,y)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(t,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,i,s)))).next((a=>{i.forEach(((u,f)=>{const d=f.getKey();a.get(d)===null&&(a=a.insert(d,ae.newInvalidDocument(d)))}));let l=cs();return a.forEach(((u,f)=>{const d=i.get(u);d!==void 0&&As(d.mutation,f,Re.empty(),Rt.now()),Ao(n,f)&&(l=l.insert(u,f))})),l}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(t){this.serializer=t,this.Br=new Map,this.Lr=new Map}getBundleMetadata(t,n){return D.resolve(this.Br.get(n))}saveBundleMetadata(t,n){return this.Br.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:Le(s.createTime)}})(n)),D.resolve()}getNamedQuery(t,n){return D.resolve(this.Lr.get(n))}saveNamedQuery(t,n){return this.Lr.set(n.name,(function(s){return{name:s.name,query:eT(s.bundledQuery),readTime:Le(s.readTime)}})(n)),D.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(){this.overlays=new Vt(J.comparator),this.kr=new Map}getOverlay(t,n){return D.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Wn();return D.forEach(n,(s=>this.getOverlay(t,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(t,n,r){return r.forEach(((s,i)=>{this.wt(t,n,i)})),D.resolve()}removeOverlaysForBatchId(t,n,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.kr.delete(r)),D.resolve()}getOverlaysForCollection(t,n,r){const s=Wn(),i=n.length+1,a=new J(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,f=u.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return D.resolve(s)}getOverlaysForCollectionGroup(t,n,r,s){let i=new Vt(((f,d)=>f-d));const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let d=i.get(f.largestBatchId);d===null&&(d=Wn(),i=i.insert(f.largestBatchId,d)),d.set(f.getKey(),f)}}const l=Wn(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((f,d)=>l.set(f,d))),!(l.size()>=s)););return D.resolve(l)}wt(t,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new xE(n,r));let i=this.kr.get(n);i===void 0&&(i=ut(),this.kr.set(n,i)),this.kr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(){this.sessionToken=Zt.EMPTY_BYTE_STRING}getSessionToken(t){return D.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,D.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(){this.qr=new Ht(zt.Qr),this.$r=new Ht(zt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(t,n){const r=new zt(t,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(t,n){t.forEach((r=>this.addReference(r,n)))}removeReference(t,n){this.Wr(new zt(t,n))}Gr(t,n){t.forEach((r=>this.removeReference(r,n)))}zr(t){const n=new J(new St([])),r=new zt(n,t),s=new zt(n,t+1),i=[];return this.$r.forEachInRange([r,s],(a=>{this.Wr(a),i.push(a.key)})),i}jr(){this.qr.forEach((t=>this.Wr(t)))}Wr(t){this.qr=this.qr.delete(t),this.$r=this.$r.delete(t)}Jr(t){const n=new J(new St([])),r=new zt(n,t),s=new zt(n,t+1);let i=ut();return this.$r.forEachInRange([r,s],(a=>{i=i.add(a.key)})),i}containsKey(t){const n=new zt(t,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class zt{constructor(t,n){this.key=t,this.Hr=n}static Qr(t,n){return J.comparator(t.key,n.key)||ct(t.Hr,n.Hr)}static Ur(t,n){return ct(t.Hr,n.Hr)||J.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Ht(zt.Qr)}checkEmpty(t){return D.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,s){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new DE(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Yr=this.Yr.add(new zt(l.key,i)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return D.resolve(a)}lookupMutationBatch(t,n){return D.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return D.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return D.resolve(this.mutationQueue.length===0?vl:this.er-1)}getAllMutationBatches(t){return D.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new zt(n,0),s=new zt(n,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([r,s],(a=>{const l=this.Zr(a.Hr);i.push(l)})),D.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Ht(ct);return n.forEach((s=>{const i=new zt(s,0),a=new zt(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([i,a],(l=>{r=r.add(l.Hr)}))})),D.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,s=r.length+1;let i=r;J.isDocumentKey(i)||(i=i.child(""));const a=new zt(new J(i),0);let l=new Ht(ct);return this.Yr.forEachWhile((u=>{const f=u.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(l=l.add(u.Hr)),!0)}),a),D.resolve(this.ei(l))}ei(t){const n=[];return t.forEach((r=>{const s=this.Zr(r);s!==null&&n.push(s)})),n}removeMutationBatch(t,n){yt(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return D.forEach(n.mutations,(s=>{const i=new zt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)})).next((()=>{this.Yr=r}))}rr(t){}containsKey(t,n){const r=new zt(n,0),s=this.Yr.firstAfterOrEqual(r);return D.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,D.resolve()}ti(t,n){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const n=this.Xr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(t){this.ni=t,this.docs=(function(){return new Vt(J.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return D.resolve(r?r.document.mutableCopy():ae.newInvalidDocument(n))}getEntries(t,n){let r=an();return n.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ae.newInvalidDocument(s))})),D.resolve(r)}getDocumentsMatchingQuery(t,n,r,s){let i=an();const a=n.path,l=new J(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:f,value:{document:d}}=u.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||zv(Hv(d),r)<=0||(s.has(d.key)||Ao(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return D.resolve(i)}getAllFromCollectionGroup(t,n,r,s){tt(9500)}ri(t,n){return D.forEach(this.docs,(r=>n(r)))}newChangeBuffer(t){return new _T(this)}getSize(t){return D.resolve(this.size)}}class _T extends cT{constructor(t){super(),this.Or=t}applyChanges(t){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(t,s)):this.Or.removeEntry(r)})),D.waitFor(n)}getFromCache(t,n){return this.Or.getEntry(t,n)}getAllFromCache(t,n){return this.Or.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(t){this.persistence=t,this.ii=new rr((n=>Il(n)),wl),this.lastRemoteSnapshotVersion=rt.min(),this.highestTargetId=0,this.si=0,this.oi=new Cl,this.targetCount=0,this._i=Nr.ar()}forEachTarget(t,n){return this.ii.forEach(((r,s)=>n(s))),D.resolve()}getLastRemoteSnapshotVersion(t){return D.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return D.resolve(this.si)}allocateTargetId(t){return this.highestTargetId=this._i.next(),D.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),D.resolve()}hr(t){this.ii.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this._i=new Nr(n),this.highestTargetId=n),t.sequenceNumber>this.si&&(this.si=t.sequenceNumber)}addTargetData(t,n){return this.hr(n),this.targetCount+=1,D.resolve()}updateTargetData(t,n){return this.hr(n),D.resolve()}removeTargetData(t,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,D.resolve()}removeTargets(t,n,r){let s=0;const i=[];return this.ii.forEach(((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ii.delete(a),i.push(this.removeMatchingKeysForTargetId(t,l.targetId)),s++)})),D.waitFor(i).next((()=>s))}getTargetCount(t){return D.resolve(this.targetCount)}getTargetData(t,n){const r=this.ii.get(n)||null;return D.resolve(r)}addMatchingKeys(t,n,r){return this.oi.Kr(n,r),D.resolve()}removeMatchingKeys(t,n,r){this.oi.Gr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach((a=>{i.push(s.markPotentiallyOrphaned(t,a))})),D.waitFor(i)}removeMatchingKeysForTargetId(t,n){return this.oi.zr(n),D.resolve()}getMatchingKeysForTargetId(t,n){const r=this.oi.Jr(n);return D.resolve(r)}containsKey(t,n){return D.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(t,n){this.ai={},this.overlays={},this.ui=new yo(0),this.ci=!1,this.ci=!0,this.li=new pT,this.referenceDelegate=t(this),this.hi=new yT(this),this.indexManager=new nT,this.remoteDocumentCache=(function(s){return new gT(s)})((r=>this.referenceDelegate.Pi(r))),this.serializer=new tT(n),this.Ti=new fT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new dT,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ai[t.toKey()];return r||(r=new mT(n,this.referenceDelegate),this.ai[t.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(t,n,r){H("MemoryPersistence","Starting transaction:",t);const s=new vT(this.ui.next());return this.referenceDelegate.Ii(),r(s).next((i=>this.referenceDelegate.di(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ei(t,n){return D.or(Object.values(this.ai).map((r=>()=>r.containsKey(t,n))))}}class vT extends Wv{constructor(t){super(),this.currentSequenceNumber=t}}class Pl{constructor(t){this.persistence=t,this.Ai=new Cl,this.Ri=null}static Vi(t){return new Pl(t)}get mi(){if(this.Ri)return this.Ri;throw tt(60996)}addReference(t,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),D.resolve()}removeReference(t,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),D.resolve()}markPotentiallyOrphaned(t,n){return this.mi.add(n.toString()),D.resolve()}removeTarget(t,n){this.Ai.zr(n.targetId).forEach((s=>this.mi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next((s=>{s.forEach((i=>this.mi.add(i.toString())))})).next((()=>r.removeTargetData(t,n)))}Ii(){this.Ri=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return D.forEach(this.mi,(r=>{const s=J.fromPath(r);return this.fi(t,s).next((i=>{i||n.removeEntry(s,rt.min())}))})).next((()=>(this.Ri=null,n.apply(t))))}updateLimboDocument(t,n){return this.fi(t,n).next((r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())}))}Pi(t){return 0}fi(t,n){return D.or([()=>D.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ei(t,n)])}}class eo{constructor(t,n){this.persistence=t,this.gi=new rr((r=>Xv(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=lT(this,n)}static Vi(t,n){return new eo(t,n)}Ii(){}di(t){return D.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}mr(t){const n=this.yr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>n.next((s=>r+s))))}yr(t){let n=0;return this.gr(t,(r=>{n++})).next((()=>n))}gr(t,n){return D.forEach(this.gi,((r,s)=>this.Sr(t,r,s).next((i=>i?D.resolve():n(s)))))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ri(t,(a=>this.Sr(t,a,n).next((l=>{l||(r++,i.removeEntry(a,rt.min()))})))).next((()=>i.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,n){return this.gi.set(n,t.currentSequenceNumber),D.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.gi.set(r,t.currentSequenceNumber),D.resolve()}removeReference(t,n,r){return this.gi.set(r,t.currentSequenceNumber),D.resolve()}updateLimboDocument(t,n){return this.gi.set(n,t.currentSequenceNumber),D.resolve()}Pi(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Ci(t.data.value)),n}Sr(t,n,r){return D.or([()=>this.persistence.Ei(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const s=this.gi.get(n);return D.resolve(s!==void 0&&s>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(t,n,r,s){this.targetId=t,this.fromCache=n,this.Is=r,this.ds=s}static Es(t,n){let r=ut(),s=ut();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Vl(t,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return my()?8:Gv(dy())>0?6:4})()}initialize(t,n){this.gs=t,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(t,n,r,s){const i={result:null};return this.ps(t,n).next((a=>{i.result=a})).next((()=>{if(!i.result)return this.ys(t,n,s,r).next((a=>{i.result=a}))})).next((()=>{if(i.result)return;const a=new ET;return this.ws(t,n,a).next((l=>{if(i.result=l,this.Rs)return this.Ss(t,n,a,l.size)}))})).next((()=>i.result))}Ss(t,n,r,s){return r.documentReadCount<this.Vs?(_r()<=dt.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",yr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),D.resolve()):(_r()<=dt.DEBUG&&H("QueryEngine","Query:",yr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(_r()<=dt.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",yr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Fe(n))):D.resolve())}ps(t,n){if(Zu(n))return D.resolve(null);let r=Fe(n);return this.indexManager.getIndexType(t,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=Ma(n,null,"F"),r=Fe(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next((i=>{const a=ut(...i);return this.gs.getDocuments(t,a).next((l=>this.indexManager.getMinOffset(t,r).next((u=>{const f=this.bs(n,l);return this.Ds(n,f,a,u.readTime)?this.ps(t,Ma(n,null,"F")):this.vs(t,f,n,u)}))))})))))}ys(t,n,r,s){return Zu(n)||s.isEqual(rt.min())?D.resolve(null):this.gs.getDocuments(t,r).next((i=>{const a=this.bs(n,i);return this.Ds(n,a,r,s)?D.resolve(null):(_r()<=dt.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),yr(n)),this.vs(t,a,n,qv(s,xs)).next((l=>l)))}))}bs(t,n){let r=new Ht(Od(t));return n.forEach(((s,i)=>{Ao(t,i)&&(r=r.add(i))})),r}Ds(t,n,r,s){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const i=t.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ws(t,n,r){return _r()<=dt.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",yr(n)),this.gs.getDocumentsMatchingQuery(t,n,Cn.min(),r)}vs(t,n,r,s){return this.gs.getDocumentsMatchingQuery(t,r,s).next((i=>(n.forEach((a=>{i=i.insert(a.key,a)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl="LocalStore",IT=3e8;class wT{constructor(t,n,r,s){this.persistence=t,this.Cs=n,this.serializer=s,this.Fs=new Vt(ct),this.Ms=new rr((i=>Il(i)),wl),this.xs=new Map,this.Os=t.getRemoteDocumentCache(),this.hi=t.getTargetCache(),this.Ti=t.getBundleCache(),this.Ns(r)}Ns(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new hT(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Fs)))}}function AT(e,t,n,r){return new wT(e,t,n,r)}async function sp(e,t){const n=st(e);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,n.Ns(t),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const a=[],l=[];let u=ut();for(const f of s){a.push(f.batchId);for(const d of f.mutations)u=u.add(d.key)}for(const f of i){l.push(f.batchId);for(const d of f.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next((f=>({Bs:f,removedBatchIds:a,addedBatchIds:l})))}))}))}function bT(e,t){const n=st(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=t.batch.keys(),i=n.Os.newChangeBuffer({trackRemovals:!0});return(function(l,u,f,d){const m=f.batch,y=m.keys();let b=D.resolve();return y.forEach((V=>{b=b.next((()=>d.getEntry(u,V))).next((F=>{const L=f.docVersions.get(V);yt(L!==null,48541),F.version.compareTo(L)<0&&(m.applyToRemoteDocument(F,f),F.isValidDocument()&&(F.setReadTime(f.commitVersion),d.addEntry(F)))}))})),b.next((()=>l.mutationQueue.removeMutationBatch(u,m)))})(n,r,t,i).next((()=>i.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(l){let u=ut();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(u=u.add(l.batch.mutations[f].key));return u})(t)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function ip(e){const t=st(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.hi.getLastRemoteSnapshotVersion(n)))}function ST(e,t){const n=st(e),r=t.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const a=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const l=[];t.targetChanges.forEach(((d,m)=>{const y=s.get(m);if(!y)return;l.push(n.hi.removeMatchingKeys(i,d.removedDocuments,m).next((()=>n.hi.addMatchingKeys(i,d.addedDocuments,m))));let b=y.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(m)!==null?b=b.withResumeToken(Zt.EMPTY_BYTE_STRING,rt.min()).withLastLimboFreeSnapshotVersion(rt.min()):d.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(d.resumeToken,r)),s=s.insert(m,b),(function(F,L,K){return F.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=IT?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0})(y,b,d)&&l.push(n.hi.updateTargetData(i,b))}));let u=an(),f=ut();if(t.documentUpdates.forEach((d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))})),l.push(RT(i,a,t.documentUpdates).next((d=>{u=d.Ls,f=d.ks}))),!r.isEqual(rt.min())){const d=n.hi.getLastRemoteSnapshotVersion(i).next((m=>n.hi.setTargetsMetadata(i,i.currentSequenceNumber,r)));l.push(d)}return D.waitFor(l).next((()=>a.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,u,f))).next((()=>u))})).then((i=>(n.Fs=s,i)))}function RT(e,t,n){let r=ut(),s=ut();return n.forEach((i=>r=r.add(i))),t.getEntries(e,r).next((i=>{let a=an();return n.forEach(((l,u)=>{const f=i.get(l);u.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(rt.min())?(t.removeEntry(l,u.readTime),a=a.insert(l,u)):!f.isValidDocument()||u.version.compareTo(f.version)>0||u.version.compareTo(f.version)===0&&f.hasPendingWrites?(t.addEntry(u),a=a.insert(l,u)):H(Dl,"Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",u.version)})),{Ls:a,ks:s}}))}function CT(e,t){const n=st(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=vl),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function PT(e,t){const n=st(e);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.hi.getTargetData(r,t).next((i=>i?(s=i,D.resolve(s)):n.hi.allocateTargetId(r).next((a=>(s=new yn(t,a,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(t,r.targetId)),r}))}async function ja(e,t,n){const r=st(e),s=r.Fs.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(a=>r.persistence.referenceDelegate.removeTarget(a,s)))}catch(a){if(!Br(a))throw a;H(Dl,`Failed to update sequence numbers for target ${t}: ${a}`)}r.Fs=r.Fs.remove(t),r.Ms.delete(s.target)}function fh(e,t,n){const r=st(e);let s=rt.min(),i=ut();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(u,f,d){const m=st(u),y=m.Ms.get(d);return y!==void 0?D.resolve(m.Fs.get(y)):m.hi.getTargetData(f,d)})(r,a,Fe(t)).next((l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(a,l.targetId).next((u=>{i=u}))})).next((()=>r.Cs.getDocumentsMatchingQuery(a,t,n?s:rt.min(),n?i:ut()))).next((l=>(VT(r,gE(t),l),{documents:l,qs:i})))))}function VT(e,t,n){let r=e.xs.get(t)||rt.min();n.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),e.xs.set(t,r)}class dh{constructor(){this.activeTargetIds=IE()}Gs(t){this.activeTargetIds=this.activeTargetIds.add(t)}zs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class DT{constructor(){this.Fo=new dh,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.Fo.Gs(t),this.Mo[t]||"not-current"}updateQueryState(t,n,r){this.Mo[t]=n}removeLocalQueryTarget(t){this.Fo.zs(t)}isLocalQueryTarget(t){return this.Fo.activeTargetIds.has(t)}clearQueryState(t){delete this.Mo[t]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(t){return this.Fo.activeTargetIds.has(t)}start(){return this.Fo=new dh,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{xo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph="ConnectivityMonitor";class mh{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(t){this.ko.push(t)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){H(ph,"Network connectivity changed: AVAILABLE");for(const t of this.ko)t(0)}Lo(){H(ph,"Network connectivity changed: UNAVAILABLE");for(const t of this.ko)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ei=null;function $a(){return Ei===null?Ei=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ei++,"0x"+Ei.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua="RestConnection",NT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class OT{get Qo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+t.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===Gi?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(t,n,r,s,i){const a=$a(),l=this.Go(t,n.toUriEncodedString());H(ua,`Sending RPC '${t}' ${a}:`,l,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,s,i);const{host:f}=new URL(l),d=pl(f);return this.jo(t,l,u,r,d).then((m=>(H(ua,`Received RPC '${t}' ${a}: `,m),m)),(m=>{throw Rn(ua,`RPC '${t}' ${a} failed with error: `,m,"url: ",l,"request:",r),m}))}Jo(t,n,r,s,i,a){return this.Wo(t,n,r,s,i)}zo(t,n,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Lr})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,i)=>t[i]=s)),r&&r.headers.forEach(((s,i)=>t[i]=s))}Go(t,n){const r=NT[t];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(t){this.Ho=t.Ho,this.Yo=t.Yo}Zo(t){this.Xo=t}e_(t){this.t_=t}n_(t){this.r_=t}onMessage(t){this.i_=t}close(){this.Yo()}send(t){this.Ho(t)}s_(){this.Xo()}o_(){this.t_()}__(t){this.r_(t)}a_(t){this.i_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re="WebChannelConnection";class MT extends OT{constructor(t){super(t),this.u_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}jo(t,n,r,s,i){const a=$a();return new Promise(((l,u)=>{const f=new ad;f.setWithCredentials(!0),f.listenOnce(ld.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Ri.NO_ERROR:const m=f.getResponseJson();H(re,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(m)),l(m);break;case Ri.TIMEOUT:H(re,`RPC '${t}' ${a} timed out`),u(new G(x.DEADLINE_EXCEEDED,"Request time out"));break;case Ri.HTTP_ERROR:const y=f.getStatus();if(H(re,`RPC '${t}' ${a} failed with status:`,y,"response text:",f.getResponseText()),y>0){let b=f.getResponseJson();Array.isArray(b)&&(b=b[0]);const V=b==null?void 0:b.error;if(V&&V.status&&V.message){const F=(function(K){const W=K.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(W)>=0?W:x.UNKNOWN})(V.status);u(new G(F,V.message))}else u(new G(x.UNKNOWN,"Server responded with status "+f.getStatus()))}else u(new G(x.UNAVAILABLE,"Connection failed."));break;default:tt(9055,{c_:t,streamId:a,l_:f.getLastErrorCode(),h_:f.getLastError()})}}finally{H(re,`RPC '${t}' ${a} completed.`)}}));const d=JSON.stringify(s);H(re,`RPC '${t}' ${a} sending request:`,s),f.send(n,"POST",d,r,15)}))}P_(t,n,r){const s=$a(),i=[this.$o,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=hd(),l=ud(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const d=i.join("");H(re,`Creating RPC '${t}' stream ${s}: ${d}`,u);const m=a.createWebChannel(d,u);this.T_(m);let y=!1,b=!1;const V=new kT({Ho:L=>{b?H(re,`Not sending because RPC '${t}' stream ${s} is closed:`,L):(y||(H(re,`Opening RPC '${t}' stream ${s} transport.`),m.open(),y=!0),H(re,`RPC '${t}' stream ${s} sending:`,L),m.send(L))},Yo:()=>m.close()}),F=(L,K,W)=>{L.listen(K,(Q=>{try{W(Q)}catch(z){setTimeout((()=>{throw z}),0)}}))};return F(m,ls.EventType.OPEN,(()=>{b||(H(re,`RPC '${t}' stream ${s} transport opened.`),V.s_())})),F(m,ls.EventType.CLOSE,(()=>{b||(b=!0,H(re,`RPC '${t}' stream ${s} transport closed`),V.__(),this.I_(m))})),F(m,ls.EventType.ERROR,(L=>{b||(b=!0,Rn(re,`RPC '${t}' stream ${s} transport errored. Name:`,L.name,"Message:",L.message),V.__(new G(x.UNAVAILABLE,"The operation could not be completed")))})),F(m,ls.EventType.MESSAGE,(L=>{var K;if(!b){const W=L.data[0];yt(!!W,16349);const Q=W,z=(Q==null?void 0:Q.error)||((K=Q[0])===null||K===void 0?void 0:K.error);if(z){H(re,`RPC '${t}' stream ${s} received error:`,z);const lt=z.status;let Et=(function(_){const T=Ft[_];if(T!==void 0)return Kd(T)})(lt),I=z.message;Et===void 0&&(Et=x.INTERNAL,I="Unknown error status: "+lt+" with message "+z.message),b=!0,V.__(new G(Et,I)),m.close()}else H(re,`RPC '${t}' stream ${s} received:`,W),V.a_(W)}})),F(l,cd.STAT_EVENT,(L=>{L.stat===Va.PROXY?H(re,`RPC '${t}' stream ${s} detected buffering proxy`):L.stat===Va.NOPROXY&&H(re,`RPC '${t}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{V.o_()}),0),V}terminate(){this.u_.forEach((t=>t.close())),this.u_=[]}T_(t){this.u_.push(t)}I_(t){this.u_=this.u_.filter((n=>n===t))}}function ha(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Co(e){return new BE(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(t,n,r=1e3,s=1.5,i=6e4){this.Fi=t,this.timerId=n,this.d_=r,this.E_=s,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(t){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,(()=>(this.m_=Date.now(),t()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh="PersistentStream";class ap{constructor(t,n,r,s,i,a,l,u){this.Fi=t,this.w_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new op(t,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(t){this.q_(),this.stream.send(t)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,t!==4?this.F_.reset():n&&n.code===x.RESOURCE_EXHAUSTED?(on(n.toString()),on("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.n_(n)}U_(){}auth(){this.state=1;const t=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.b_===n&&this.W_(r,s)}),(r=>{t((()=>{const s=new G(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)}))}))}W_(t,n){const r=this.K_(this.b_);this.stream=this.z_(t,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.e_((()=>{r((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((s=>{r((()=>this.G_(s)))})),this.stream.onMessage((s=>{r((()=>++this.C_==1?this.j_(s):this.onNext(s)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(t){return H(gh,`close with error: ${t}`),this.stream=null,this.close(4,t)}K_(t){return n=>{this.Fi.enqueueAndForget((()=>this.b_===t?n():(H(gh,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class FT extends ap{constructor(t,n,r,s,i,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}z_(t,n){return this.connection.P_("Listen",t,n)}j_(t){return this.onNext(t)}onNext(t){this.F_.reset();const n=qE(this.serializer,t),r=(function(i){if(!("targetChange"in i))return rt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?rt.min():a.readTime?Le(a.readTime):rt.min()})(t);return this.listener.J_(n,r)}H_(t){const n={};n.database=Ba(this.serializer),n.addTarget=(function(i,a){let l;const u=a.target;if(l=ka(u)?{documents:KE(i,u)}:{query:WE(i,u).Vt},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=Qd(i,a.resumeToken);const f=Fa(i,a.expectedCount);f!==null&&(l.expectedCount=f)}else if(a.snapshotVersion.compareTo(rt.min())>0){l.readTime=to(i,a.snapshotVersion.toTimestamp());const f=Fa(i,a.expectedCount);f!==null&&(l.expectedCount=f)}return l})(this.serializer,t);const r=QE(this.serializer,t);r&&(n.labels=r),this.k_(n)}Y_(t){const n={};n.database=Ba(this.serializer),n.removeTarget=t,this.k_(n)}}class LT extends ap{constructor(t,n,r,s,i,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(t,n){return this.connection.P_("Write",t,n)}j_(t){return yt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,yt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ea()}onNext(t){yt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.F_.reset();const n=zE(t.writeResults,t.commitTime),r=Le(t.commitTime);return this.listener.ta(r,n)}na(){const t={};t.database=Ba(this.serializer),this.k_(t)}X_(t){const n={streamToken:this.lastStreamToken,writes:t.map((r=>HE(this.serializer,r)))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{}class BT extends UT{constructor(t,n,r,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new G(x.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Wo(t,La(n,r),s,i,a))).catch((i=>{throw i.name==="FirebaseError"?(i.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new G(x.UNKNOWN,i.toString())}))}Jo(t,n,r,s,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Jo(t,La(n,r),s,a,l,i))).catch((a=>{throw a.name==="FirebaseError"?(a.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new G(x.UNKNOWN,a.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class jT{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(t){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ua("Offline")))}set(t){this.ha(),this.sa=0,t==="Online"&&(this._a=!1),this.ua(t)}ua(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ca(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(on(n),this._a=!1):H("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zn="RemoteStore";class $T{constructor(t,n,r,s,i){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo((a=>{r.enqueueAndForget((async()=>{ir(this)&&(H(Zn,"Restarting streams for network reachability change."),await(async function(u){const f=st(u);f.Ia.add(4),await zs(f),f.Aa.set("Unknown"),f.Ia.delete(4),await Po(f)})(this))}))})),this.Aa=new jT(r,s)}}async function Po(e){if(ir(e))for(const t of e.da)await t(!0)}async function zs(e){for(const t of e.da)await t(!1)}function lp(e,t){const n=st(e);n.Ta.has(t.targetId)||(n.Ta.set(t.targetId,t),kl(n)?Ol(n):jr(n).x_()&&Nl(n,t))}function xl(e,t){const n=st(e),r=jr(n);n.Ta.delete(t),r.x_()&&cp(n,t),n.Ta.size===0&&(r.x_()?r.B_():ir(n)&&n.Aa.set("Unknown"))}function Nl(e,t){if(e.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(rt.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}jr(e).H_(t)}function cp(e,t){e.Ra.$e(t),jr(e).Y_(t)}function Ol(e){e.Ra=new ME({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.Ta.get(t)||null,lt:()=>e.datastore.serializer.databaseId}),jr(e).start(),e.Aa.aa()}function kl(e){return ir(e)&&!jr(e).M_()&&e.Ta.size>0}function ir(e){return st(e).Ia.size===0}function up(e){e.Ra=void 0}async function qT(e){e.Aa.set("Online")}async function HT(e){e.Ta.forEach(((t,n)=>{Nl(e,t)}))}async function zT(e,t){up(e),kl(e)?(e.Aa.la(t),Ol(e)):e.Aa.set("Unknown")}async function KT(e,t,n){if(e.Aa.set("Online"),t instanceof Gd&&t.state===2&&t.cause)try{await(async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ta.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ta.delete(l),s.Ra.removeTarget(l))})(e,t)}catch(r){H(Zn,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await no(e,r)}else if(t instanceof Di?e.Ra.Ye(t):t instanceof Wd?e.Ra.it(t):e.Ra.et(t),!n.isEqual(rt.min()))try{const r=await ip(e.localStore);n.compareTo(r)>=0&&await(function(i,a){const l=i.Ra.Pt(a);return l.targetChanges.forEach(((u,f)=>{if(u.resumeToken.approximateByteSize()>0){const d=i.Ta.get(f);d&&i.Ta.set(f,d.withResumeToken(u.resumeToken,a))}})),l.targetMismatches.forEach(((u,f)=>{const d=i.Ta.get(u);if(!d)return;i.Ta.set(u,d.withResumeToken(Zt.EMPTY_BYTE_STRING,d.snapshotVersion)),cp(i,u);const m=new yn(d.target,u,f,d.sequenceNumber);Nl(i,m)})),i.remoteSyncer.applyRemoteEvent(l)})(e,n)}catch(r){H(Zn,"Failed to raise snapshot:",r),await no(e,r)}}async function no(e,t,n){if(!Br(t))throw t;e.Ia.add(1),await zs(e),e.Aa.set("Offline"),n||(n=()=>ip(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{H(Zn,"Retrying IndexedDB access"),await n(),e.Ia.delete(1),await Po(e)}))}function hp(e,t){return t().catch((n=>no(e,n,t)))}async function Vo(e){const t=st(e),n=xn(t);let r=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:vl;for(;WT(t);)try{const s=await CT(t.localStore,r);if(s===null){t.Pa.length===0&&n.B_();break}r=s.batchId,GT(t,s)}catch(s){await no(t,s)}fp(t)&&dp(t)}function WT(e){return ir(e)&&e.Pa.length<10}function GT(e,t){e.Pa.push(t);const n=xn(e);n.x_()&&n.Z_&&n.X_(t.mutations)}function fp(e){return ir(e)&&!xn(e).M_()&&e.Pa.length>0}function dp(e){xn(e).start()}async function QT(e){xn(e).na()}async function XT(e){const t=xn(e);for(const n of e.Pa)t.X_(n.mutations)}async function JT(e,t,n){const r=e.Pa.shift(),s=bl.from(r,t,n);await hp(e,(()=>e.remoteSyncer.applySuccessfulWrite(s))),await Vo(e)}async function YT(e,t){t&&xn(e).Z_&&await(async function(r,s){if((function(a){return OE(a)&&a!==x.ABORTED})(s.code)){const i=r.Pa.shift();xn(r).N_(),await hp(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await Vo(r)}})(e,t),fp(e)&&dp(e)}async function _h(e,t){const n=st(e);n.asyncQueue.verifyOperationInProgress(),H(Zn,"RemoteStore received new credentials");const r=ir(n);n.Ia.add(3),await zs(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ia.delete(3),await Po(n)}async function ZT(e,t){const n=st(e);t?(n.Ia.delete(2),await Po(n)):t||(n.Ia.add(2),await zs(n),n.Aa.set("Unknown"))}function jr(e){return e.Va||(e.Va=(function(n,r,s){const i=st(n);return i.ia(),new FT(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(e.datastore,e.asyncQueue,{Zo:qT.bind(null,e),e_:HT.bind(null,e),n_:zT.bind(null,e),J_:KT.bind(null,e)}),e.da.push((async t=>{t?(e.Va.N_(),kl(e)?Ol(e):e.Aa.set("Unknown")):(await e.Va.stop(),up(e))}))),e.Va}function xn(e){return e.ma||(e.ma=(function(n,r,s){const i=st(n);return i.ia(),new LT(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(e.datastore,e.asyncQueue,{Zo:()=>Promise.resolve(),e_:QT.bind(null,e),n_:YT.bind(null,e),ea:XT.bind(null,e),ta:JT.bind(null,e)}),e.da.push((async t=>{t?(e.ma.N_(),await Vo(e)):(await e.ma.stop(),e.Pa.length>0&&(H(Zn,`Stopping write stream with ${e.Pa.length} pending writes`),e.Pa=[]))}))),e.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(t,n,r,s,i){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Ye,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,s,i){const a=Date.now()+r,l=new Ml(t,n,a,s,i);return l.start(r),l}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(x.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fl(e,t){if(on("AsyncQueue",`${t}: ${e}`),Br(e))return new G(x.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{static emptySet(t){return new Rr(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=cs(),this.sortedSet=new Vt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,r)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Rr)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Rr;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(){this.fa=new Vt(J.comparator)}track(t){const n=t.doc.key,r=this.fa.get(n);r?t.type!==0&&r.type===3?this.fa=this.fa.insert(n,t):t.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.fa=this.fa.remove(n):t.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:t.doc}):tt(63341,{At:t,ga:r}):this.fa=this.fa.insert(n,t)}pa(){const t=[];return this.fa.inorderTraversal(((n,r)=>{t.push(r)})),t}}class Or{constructor(t,n,r,s,i,a,l,u,f){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=f}static fromInitialDocuments(t,n,r,s,i){const a=[];return n.forEach((l=>{a.push({type:0,doc:l})})),new Or(t,n,Rr.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&wo(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((t=>t.ba()))}}class eI{constructor(){this.queries=vh(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const s=st(n),i=s.queries;s.queries=vh(),i.forEach(((a,l)=>{for(const u of l.wa)u.onError(r)}))})(this,new G(x.ABORTED,"Firestore shutting down"))}}function vh(){return new rr((e=>Nd(e)),wo)}async function Ll(e,t){const n=st(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.Sa()&&t.ba()&&(r=2):(i=new tI,r=t.ba()?0:1);try{switch(r){case 0:i.ya=await n.onListen(s,!0);break;case 1:i.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=Fl(a,`Initialization of query '${yr(t.query)}' failed`);return void t.onError(l)}n.queries.set(s,i),i.wa.push(t),t.va(n.onlineState),i.ya&&t.Ca(i.ya)&&Bl(n)}async function Ul(e,t){const n=st(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const a=i.wa.indexOf(t);a>=0&&(i.wa.splice(a,1),i.wa.length===0?s=t.ba()?0:1:!i.Sa()&&t.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function nI(e,t){const n=st(e);let r=!1;for(const s of t){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.wa)l.Ca(s)&&(r=!0);a.ya=s}}r&&Bl(n)}function rI(e,t,n){const r=st(e),s=r.queries.get(t);if(s)for(const i of s.wa)i.onError(n);r.queries.delete(t)}function Bl(e){e.Da.forEach((t=>{t.next()}))}var qa,Eh;(Eh=qa||(qa={})).Fa="default",Eh.Cache="cache";class jl{constructor(t,n,r){this.query=t,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(t){if(!this.options.includeMetadataChanges){const r=[];for(const s of t.docChanges)s.type!==3&&r.push(s);t=new Or(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.xa?this.Na(t)&&(this.Ma.next(t),n=!0):this.Ba(t,this.onlineState)&&(this.La(t),n=!0),this.Oa=t,n}onError(t){this.Ma.error(t)}va(t){this.onlineState=t;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,t)&&(this.La(this.Oa),n=!0),n}Ba(t,n){if(!t.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Na(t){if(t.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(t){t=Or.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.xa=!0,this.Ma.next(t)}ba(){return this.options.source!==qa.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(t){this.key=t}}class mp{constructor(t){this.key=t}}class sI{constructor(t,n){this.query=t,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ut(),this.mutatedKeys=ut(),this.Xa=Od(t),this.eu=new Rr(this.Xa)}get tu(){return this.Ha}nu(t,n){const r=n?n.ru:new yh,s=n?n.eu:this.eu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal(((d,m)=>{const y=s.get(d),b=Ao(this.query,m)?m:null,V=!!y&&this.mutatedKeys.has(y.key),F=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let L=!1;y&&b?y.data.isEqual(b.data)?V!==F&&(r.track({type:3,doc:b}),L=!0):this.iu(y,b)||(r.track({type:2,doc:b}),L=!0,(u&&this.Xa(b,u)>0||f&&this.Xa(b,f)<0)&&(l=!0)):!y&&b?(r.track({type:0,doc:b}),L=!0):y&&!b&&(r.track({type:1,doc:y}),L=!0,(u||f)&&(l=!0)),L&&(b?(a=a.add(b),i=F?i.add(d):i.delete(d)):(a=a.delete(d),i=i.delete(d)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{eu:a,ru:r,Ds:l,mutatedKeys:i}}iu(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,s){const i=this.eu;this.eu=t.eu,this.mutatedKeys=t.mutatedKeys;const a=t.ru.pa();a.sort(((d,m)=>(function(b,V){const F=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt(20277,{At:L})}};return F(b)-F(V)})(d.type,m.type)||this.Xa(d.doc,m.doc))),this.su(r),s=s!=null&&s;const l=n&&!s?this.ou():[],u=this.Za.size===0&&this.current&&!s?1:0,f=u!==this.Ya;return this.Ya=u,a.length!==0||f?{snapshot:new Or(this.query,t.eu,i,a,t.mutatedKeys,u===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:l}:{_u:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new yh,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(t){return!this.Ha.has(t)&&!!this.eu.has(t)&&!this.eu.get(t).hasLocalMutations}su(t){t&&(t.addedDocuments.forEach((n=>this.Ha=this.Ha.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ha=this.Ha.delete(n))),this.current=t.current)}ou(){if(!this.current)return[];const t=this.Za;this.Za=ut(),this.eu.forEach((r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))}));const n=[];return t.forEach((r=>{this.Za.has(r)||n.push(new mp(r))})),this.Za.forEach((r=>{t.has(r)||n.push(new pp(r))})),n}uu(t){this.Ha=t.qs,this.Za=ut();const n=this.nu(t.documents);return this.applyChanges(n,!0)}cu(){return Or.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const $l="SyncEngine";class iI{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class oI{constructor(t){this.key=t,this.lu=!1}}class aI{constructor(t,n,r,s,i,a){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.hu={},this.Pu=new rr((l=>Nd(l)),wo),this.Tu=new Map,this.Iu=new Set,this.du=new Vt(J.comparator),this.Eu=new Map,this.Au=new Cl,this.Ru={},this.Vu=new Map,this.mu=Nr.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function lI(e,t,n=!0){const r=Tp(e);let s;const i=r.Pu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await gp(r,t,n,!0),s}async function cI(e,t){const n=Tp(e);await gp(n,t,!0,!1)}async function gp(e,t,n,r){const s=await PT(e.localStore,Fe(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await uI(e,t,i,a==="current",s.resumeToken)),e.isPrimaryClient&&n&&lp(e.remoteStore,s),l}async function uI(e,t,n,r,s){e.gu=(m,y,b)=>(async function(F,L,K,W){let Q=L.view.nu(K);Q.Ds&&(Q=await fh(F.localStore,L.query,!1).then((({documents:I})=>L.view.nu(I,Q))));const z=W&&W.targetChanges.get(L.targetId),lt=W&&W.targetMismatches.get(L.targetId)!=null,Et=L.view.applyChanges(Q,F.isPrimaryClient,z,lt);return Ih(F,L.targetId,Et._u),Et.snapshot})(e,m,y,b);const i=await fh(e.localStore,t,!0),a=new sI(t,i.qs),l=a.nu(i.documents),u=Hs.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",s),f=a.applyChanges(l,e.isPrimaryClient,u);Ih(e,n,f._u);const d=new iI(t,n,a);return e.Pu.set(t,d),e.Tu.has(n)?e.Tu.get(n).push(t):e.Tu.set(n,[t]),f.snapshot}async function hI(e,t,n){const r=st(e),s=r.Pu.get(t),i=r.Tu.get(s.targetId);if(i.length>1)return r.Tu.set(s.targetId,i.filter((a=>!wo(a,t)))),void r.Pu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await ja(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&xl(r.remoteStore,s.targetId),Ha(r,s.targetId)})).catch(Ur)):(Ha(r,s.targetId),await ja(r.localStore,s.targetId,!0))}async function fI(e,t){const n=st(e),r=n.Pu.get(t),s=n.Tu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),xl(n.remoteStore,r.targetId))}async function dI(e,t,n){const r=EI(e);try{const s=await(function(a,l){const u=st(a),f=Rt.now(),d=l.reduce(((b,V)=>b.add(V.key)),ut());let m,y;return u.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let V=an(),F=ut();return u.Os.getEntries(b,d).next((L=>{V=L,V.forEach(((K,W)=>{W.isValidDocument()||(F=F.add(K))}))})).next((()=>u.localDocuments.getOverlayedDocuments(b,V))).next((L=>{m=L;const K=[];for(const W of l){const Q=PE(W,m.get(W.key).overlayedDocument);Q!=null&&K.push(new sr(W.key,Q,Sd(Q.value.mapValue),tn.exists(!0)))}return u.mutationQueue.addMutationBatch(b,f,K,l)})).next((L=>{y=L;const K=L.applyToLocalDocumentSet(m,F);return u.documentOverlayCache.saveOverlays(b,L.batchId,K)}))})).then((()=>({batchId:y.batchId,changes:Md(m)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(s.batchId),(function(a,l,u){let f=a.Ru[a.currentUser.toKey()];f||(f=new Vt(ct)),f=f.insert(l,u),a.Ru[a.currentUser.toKey()]=f})(r,s.batchId,n),await Ks(r,s.changes),await Vo(r.remoteStore)}catch(s){const i=Fl(s,"Failed to persist write");n.reject(i)}}async function _p(e,t){const n=st(e);try{const r=await ST(n.localStore,t);t.targetChanges.forEach(((s,i)=>{const a=n.Eu.get(i);a&&(yt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.lu=!0:s.modifiedDocuments.size>0?yt(a.lu,14607):s.removedDocuments.size>0&&(yt(a.lu,42227),a.lu=!1))})),await Ks(n,r,t)}catch(r){await Ur(r)}}function Th(e,t,n){const r=st(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Pu.forEach(((i,a)=>{const l=a.view.va(t);l.snapshot&&s.push(l.snapshot)})),(function(a,l){const u=st(a);u.onlineState=l;let f=!1;u.queries.forEach(((d,m)=>{for(const y of m.wa)y.va(l)&&(f=!0)})),f&&Bl(u)})(r.eventManager,t),s.length&&r.hu.J_(s),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function pI(e,t,n){const r=st(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Eu.get(t),i=s&&s.key;if(i){let a=new Vt(J.comparator);a=a.insert(i,ae.newNoDocument(i,rt.min()));const l=ut().add(i),u=new Ro(rt.min(),new Map,new Vt(ct),a,l);await _p(r,u),r.du=r.du.remove(i),r.Eu.delete(t),ql(r)}else await ja(r.localStore,t,!1).then((()=>Ha(r,t,n))).catch(Ur)}async function mI(e,t){const n=st(e),r=t.batch.batchId;try{const s=await bT(n.localStore,t);vp(n,r,null),yp(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ks(n,s)}catch(s){await Ur(s)}}async function gI(e,t,n){const r=st(e);try{const s=await(function(a,l){const u=st(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let d;return u.mutationQueue.lookupMutationBatch(f,l).next((m=>(yt(m!==null,37113),d=m.keys(),u.mutationQueue.removeMutationBatch(f,m)))).next((()=>u.mutationQueue.performConsistencyCheck(f))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(f,d,l))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,d))).next((()=>u.localDocuments.getDocuments(f,d)))}))})(r.localStore,t);vp(r,t,n),yp(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Ks(r,s)}catch(s){await Ur(s)}}function yp(e,t){(e.Vu.get(t)||[]).forEach((n=>{n.resolve()})),e.Vu.delete(t)}function vp(e,t,n){const r=st(e);let s=r.Ru[r.currentUser.toKey()];if(s){const i=s.get(t);i&&(n?i.reject(n):i.resolve(),s=s.remove(t)),r.Ru[r.currentUser.toKey()]=s}}function Ha(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Tu.get(t))e.Pu.delete(r),n&&e.hu.pu(r,n);e.Tu.delete(t),e.isPrimaryClient&&e.Au.zr(t).forEach((r=>{e.Au.containsKey(r)||Ep(e,r)}))}function Ep(e,t){e.Iu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(xl(e.remoteStore,n),e.du=e.du.remove(t),e.Eu.delete(n),ql(e))}function Ih(e,t,n){for(const r of n)r instanceof pp?(e.Au.addReference(r.key,t),_I(e,r)):r instanceof mp?(H($l,"Document no longer in limbo: "+r.key),e.Au.removeReference(r.key,t),e.Au.containsKey(r.key)||Ep(e,r.key)):tt(19791,{yu:r})}function _I(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Iu.has(r)||(H($l,"New document in limbo: "+n),e.Iu.add(r),ql(e))}function ql(e){for(;e.Iu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Iu.values().next().value;e.Iu.delete(t);const n=new J(St.fromString(t)),r=e.mu.next();e.Eu.set(r,new oI(n)),e.du=e.du.insert(n,r),lp(e.remoteStore,new yn(Fe(Io(n.path)),r,"TargetPurposeLimboResolution",yo.ue))}}async function Ks(e,t,n){const r=st(e),s=[],i=[],a=[];r.Pu.isEmpty()||(r.Pu.forEach(((l,u)=>{a.push(r.gu(u,t,n).then((f=>{var d;if((f||n)&&r.isPrimaryClient){const m=f?!f.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(f){s.push(f);const m=Vl.Es(u.targetId,f);i.push(m)}})))})),await Promise.all(a),r.hu.J_(s),await(async function(u,f){const d=st(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",(m=>D.forEach(f,(y=>D.forEach(y.Is,(b=>d.persistence.referenceDelegate.addReference(m,y.targetId,b))).next((()=>D.forEach(y.ds,(b=>d.persistence.referenceDelegate.removeReference(m,y.targetId,b)))))))))}catch(m){if(!Br(m))throw m;H(Dl,"Failed to update sequence numbers: "+m)}for(const m of f){const y=m.targetId;if(!m.fromCache){const b=d.Fs.get(y),V=b.snapshotVersion,F=b.withLastLimboFreeSnapshotVersion(V);d.Fs=d.Fs.insert(y,F)}}})(r.localStore,i))}async function yI(e,t){const n=st(e);if(!n.currentUser.isEqual(t)){H($l,"User change. New user:",t.toKey());const r=await sp(n.localStore,t);n.currentUser=t,(function(i,a){i.Vu.forEach((l=>{l.forEach((u=>{u.reject(new G(x.CANCELLED,a))}))})),i.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Ks(n,r.Bs)}}function vI(e,t){const n=st(e),r=n.Eu.get(t);if(r&&r.lu)return ut().add(r.key);{let s=ut();const i=n.Tu.get(t);if(!i)return s;for(const a of i){const l=n.Pu.get(a);s=s.unionWith(l.view.tu)}return s}}function Tp(e){const t=st(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=_p.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=vI.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=pI.bind(null,t),t.hu.J_=nI.bind(null,t.eventManager),t.hu.pu=rI.bind(null,t.eventManager),t}function EI(e){const t=st(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=mI.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=gI.bind(null,t),t}class ro{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Co(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,n){return null}Fu(t,n){return null}vu(t){return AT(this.persistence,new TT,t.initialUser,this.serializer)}Du(t){return new rp(Pl.Vi,this.serializer)}bu(t){return new DT}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ro.provider={build:()=>new ro};class TI extends ro{constructor(t){super(),this.cacheSizeBytes=t}Cu(t,n){yt(this.persistence.referenceDelegate instanceof eo,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new oT(r,t.asyncQueue,n)}Du(t){const n=this.cacheSizeBytes!==void 0?me.withCacheSize(this.cacheSizeBytes):me.DEFAULT;return new rp((r=>eo.Vi(r,n)),this.serializer)}}class za{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Th(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=yI.bind(null,this.syncEngine),await ZT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new eI})()}createDatastore(t){const n=Co(t.databaseInfo.databaseId),r=(function(i){return new MT(i)})(t.databaseInfo);return(function(i,a,l,u){return new BT(i,a,l,u)})(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return(function(r,s,i,a,l){return new $T(r,s,i,a,l)})(this.localStore,this.datastore,t.asyncQueue,(n=>Th(this.syncEngine,n,0)),(function(){return mh.C()?new mh:new xT})())}createSyncEngine(t,n){return(function(s,i,a,l,u,f,d){const m=new aI(s,i,a,l,u,f);return d&&(m.fu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await(async function(s){const i=st(s);H(Zn,"RemoteStore shutting down."),i.Ia.add(5),await zs(i),i.Ea.shutdown(),i.Aa.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}za.provider={build:()=>new za};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.xu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.xu(this.observer.error,t):on("Uncaught Error in snapshot listener:",t.toString()))}Ou(){this.muted=!0}xu(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn="FirestoreClient";class II{constructor(t,n,r,s,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ie.UNAUTHENTICATED,this.clientId=_l.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async a=>{H(Nn,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(H(Nn,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ye;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=Fl(n,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function fa(e,t){e.asyncQueue.verifyOperationInProgress(),H(Nn,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async s=>{r.isEqual(s)||(await sp(t.localStore,s),r=s)})),t.persistence.setDatabaseDeletedListener((()=>{Rn("Terminating Firestore due to IndexedDb database deletion"),e.terminate().then((()=>{H("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((s=>{Rn("Terminating Firestore due to IndexedDb database deletion failed",s)}))})),e._offlineComponents=t}async function wh(e,t){e.asyncQueue.verifyOperationInProgress();const n=await wI(e);H(Nn,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((r=>_h(t.remoteStore,r))),e.setAppCheckTokenChangeListener(((r,s)=>_h(t.remoteStore,s))),e._onlineComponents=t}async function wI(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){H(Nn,"Using user provided OfflineComponentProvider");try{await fa(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(s){return s.name==="FirebaseError"?s.code===x.FAILED_PRECONDITION||s.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;Rn("Error using user provided cache. Falling back to memory cache: "+n),await fa(e,new ro)}}else H(Nn,"Using default OfflineComponentProvider"),await fa(e,new TI(void 0));return e._offlineComponents}async function Ip(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(H(Nn,"Using user provided OnlineComponentProvider"),await wh(e,e._uninitializedComponentsProvider._online)):(H(Nn,"Using default OnlineComponentProvider"),await wh(e,new za))),e._onlineComponents}function AI(e){return Ip(e).then((t=>t.syncEngine))}async function so(e){const t=await Ip(e),n=t.eventManager;return n.onListen=lI.bind(null,t.syncEngine),n.onUnlisten=hI.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=cI.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=fI.bind(null,t.syncEngine),n}function bI(e,t,n={}){const r=new Ye;return e.asyncQueue.enqueueAndForget((async()=>(function(i,a,l,u,f){const d=new Hl({next:y=>{d.Ou(),a.enqueueAndForget((()=>Ul(i,m)));const b=y.docs.has(l);!b&&y.fromCache?f.reject(new G(x.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&y.fromCache&&u&&u.source==="server"?f.reject(new G(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(y)},error:y=>f.reject(y)}),m=new jl(Io(l.path),d,{includeMetadataChanges:!0,ka:!0});return Ll(i,m)})(await so(e),e.asyncQueue,t,n,r))),r.promise}function SI(e,t,n={}){const r=new Ye;return e.asyncQueue.enqueueAndForget((async()=>(function(i,a,l,u,f){const d=new Hl({next:y=>{d.Ou(),a.enqueueAndForget((()=>Ul(i,m))),y.fromCache&&u.source==="server"?f.reject(new G(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(y)},error:y=>f.reject(y)}),m=new jl(l,d,{includeMetadataChanges:!0,ka:!0});return Ll(i,m)})(await so(e),e.asyncQueue,t,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ah=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap="firestore.googleapis.com",bh=!0;class Sh{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new G(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ap,this.ssl=bh}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:bh;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=np;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<sT)throw new G(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}$v("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wp((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new G(x.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new G(x.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new G(x.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Do{constructor(t,n,r,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sh({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new G(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sh(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Nv;switch(r.type){case"firstParty":return new Fv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=Ah.get(n);r&&(H("ComponentProvider","Removing Datastore"),Ah.delete(n),r.terminate())})(this),Promise.resolve()}}function RI(e,t,n,r={}){var s;e=Ze(e,Do);const i=pl(t),a=e._getSettings(),l=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),u=`${t}:${n}`;i&&(ly(`https://${u}`),fy("Firestore",!0)),a.host!==Ap&&a.host!==u&&Rn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},a),{host:u,ssl:i,emulatorOptions:r});if(!Hi(f,l)&&(e._setSettings(f),r.mockUserToken)){let d,m;if(typeof r.mockUserToken=="string")d=r.mockUserToken,m=ie.MOCK_USER;else{d=cy(r.mockUserToken,(s=e._app)===null||s===void 0?void 0:s.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new G(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new ie(y)}e._authCredentials=new Ov(new dd(d,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Ws(this.firestore,t,this._query)}}class qt{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new An(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new qt(this.firestore,t,this._key)}toJSON(){return{type:qt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if($s(n,qt._jsonSchema))return new qt(t,r||null,new J(St.fromString(n.referencePath)))}}qt._jsonSchemaVersion="firestore/documentReference/1.0",qt._jsonSchema={type:Lt("string",qt._jsonSchemaVersion),referencePath:Lt("string")};class An extends Ws{constructor(t,n,r){super(t,n,Io(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new qt(this.firestore,null,new J(t))}withConverter(t){return new An(this.firestore,t,this._path)}}function dr(e,t,...n){if(e=Pr(e),md("collection","path",t),e instanceof Do){const r=St.fromString(t,...n);return Bu(r),new An(e,null,r)}{if(!(e instanceof qt||e instanceof An))throw new G(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(St.fromString(t,...n));return Bu(r),new An(e.firestore,null,r)}}function bp(e,t,...n){if(e=Pr(e),arguments.length===1&&(t=_l.newId()),md("doc","path",t),e instanceof Do){const r=St.fromString(t,...n);return Uu(r),new qt(e,null,new J(r))}{if(!(e instanceof qt||e instanceof An))throw new G(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(St.fromString(t,...n));return Uu(r),new qt(e.firestore,e instanceof An?e.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rh="AsyncQueue";class Ch{constructor(t=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new op(this,"async_queue_retry"),this.oc=()=>{const r=ha();r&&H(Rh,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=t;const n=ha();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ac(),this.uc(t)}enterRestrictedMode(t){if(!this.Xu){this.Xu=!0,this.rc=t||!1;const n=ha();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(t){if(this.ac(),this.Xu)return new Promise((()=>{}));const n=new Ye;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Zu.push(t),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(t){if(!Br(t))throw t;H(Rh,"Operation failed with retryable error: "+t)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(t){const n=this._c.then((()=>(this.nc=!0,t().catch((r=>{throw this.tc=r,this.nc=!1,on("INTERNAL UNHANDLED ERROR: ",Ph(r)),r})).then((r=>(this.nc=!1,r))))));return this._c=n,n}enqueueAfterDelay(t,n,r){this.ac(),this.sc.indexOf(t)>-1&&(n=0);const s=Ml.createAndSchedule(this,t,n,r,(i=>this.lc(i)));return this.ec.push(s),s}ac(){this.tc&&tt(47125,{hc:Ph(this.tc)})}verifyOperationInProgress(){}async Pc(){let t;do t=this._c,await t;while(t!==this._c)}Tc(t){for(const n of this.ec)if(n.timerId===t)return!0;return!1}Ic(t){return this.Pc().then((()=>{this.ec.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.ec)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Pc()}))}dc(t){this.sc.push(t)}lc(t){const n=this.ec.indexOf(t);this.ec.splice(n,1)}}function Ph(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vh(e){return(function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1})(e,["next","error","complete"])}class kr extends Do{constructor(t,n,r,s){super(t,n,r,s),this.type="firestore",this._queue=new Ch,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Ch(t),this._firestoreClient=void 0,await t}}}function CI(e,t){const n=typeof e=="object"?e:Iv(),r=typeof e=="string"?e:Gi,s=_v(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=oy("firestore");i&&RI(s,...i)}return s}function xo(e){if(e._terminated)throw new G(x.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||PI(e),e._firestoreClient}function PI(e){var t,n,r;const s=e._freezeSettings(),i=(function(l,u,f,d){return new Zv(l,u,f,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,wp(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new II(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&(function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}})(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(t){this._byteString=t}static fromBase64String(t){try{return new we(Zt.fromBase64String(t))}catch(n){throw new G(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new we(Zt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:we._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if($s(t,we._jsonSchema))return we.fromBase64String(t.bytes)}}we._jsonSchemaVersion="firestore/bytes/1.0",we._jsonSchema={type:Lt("string",we._jsonSchemaVersion),bytes:Lt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new G(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new G(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new G(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return ct(this._lat,t._lat)||ct(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ue._jsonSchemaVersion}}static fromJSON(t){if($s(t,Ue._jsonSchema))return new Ue(t.latitude,t.longitude)}}Ue._jsonSchemaVersion="firestore/geoPoint/1.0",Ue._jsonSchema={type:Lt("string",Ue._jsonSchemaVersion),latitude:Lt("number"),longitude:Lt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Be._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if($s(t,Be._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new Be(t.vectorValues);throw new G(x.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Be._jsonSchemaVersion="firestore/vectorValue/1.0",Be._jsonSchema={type:Lt("string",Be._jsonSchemaVersion),vectorValues:Lt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI=/^__.*__$/;class DI{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new sr(t,this.data,this.fieldMask,n,this.fieldTransforms):new qs(t,this.data,n,this.fieldTransforms)}}function Rp(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt(40011,{Ec:e})}}class Kl{constructor(t,n,r,s,i,a){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(t){return new Kl(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.Rc({path:r,mc:!1});return s.fc(t),s}gc(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(t){return this.Rc({path:void 0,mc:!0})}wc(t){return io(t,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Ac(){if(this.path)for(let t=0;t<this.path.length;t++)this.fc(this.path.get(t))}fc(t){if(t.length===0)throw this.wc("Document fields must not be empty");if(Rp(this.Ec)&&VI.test(t))throw this.wc('Document fields cannot begin and end with "__"')}}class xI{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Co(t)}Dc(t,n,r,s=!1){return new Kl({Ec:t,methodName:n,bc:r,path:Yt.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function NI(e){const t=e._freezeSettings(),n=Co(e._databaseId);return new xI(e._databaseId,!!t.ignoreUndefinedProperties,n)}function OI(e,t,n,r,s,i={}){const a=e.Dc(i.merge||i.mergeFields?2:0,t,n,s);Dp("Data must be an object, but it was:",a,r);const l=Pp(r,a);let u,f;if(i.merge)u=new Re(a.fieldMask),f=a.fieldTransforms;else if(i.mergeFields){const d=[];for(const m of i.mergeFields){const y=kI(t,m,n);if(!a.contains(y))throw new G(x.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);FI(d,y)||d.push(y)}u=new Re(d),f=a.fieldTransforms.filter((m=>u.covers(m.field)))}else u=null,f=a.fieldTransforms;return new DI(new Ie(l),u,f)}function Cp(e,t){if(Vp(e=Pr(e)))return Dp("Unsupported field value:",t,e),Pp(e,t);if(e instanceof Sp)return(function(r,s){if(!Rp(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.mc&&t.Ec!==4)throw t.wc("Nested arrays are not supported");return(function(r,s){const i=[];let a=0;for(const l of r){let u=Cp(l,s.yc(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}})(e,t)}return(function(r,s){if((r=Pr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return wE(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Rt.fromDate(r);return{timestampValue:to(s.serializer,i)}}if(r instanceof Rt){const i=new Rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:to(s.serializer,i)}}if(r instanceof Ue)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof we)return{bytesValue:Qd(s.serializer,r._byteString)};if(r instanceof qt){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.wc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Rl(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Be)return(function(a,l){return{mapValue:{fields:{[Ad]:{stringValue:bd},[Qi]:{arrayValue:{values:a.toArray().map((f=>{if(typeof f!="number")throw l.wc("VectorValues must only contain numeric values.");return Al(l.serializer,f)}))}}}}}})(r,s);throw s.wc(`Unsupported field value: ${yl(r)}`)})(e,t)}function Pp(e,t){const n={};return yd(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):nr(e,((r,s)=>{const i=Cp(s,t.Vc(r));i!=null&&(n[r]=i)})),{mapValue:{fields:n}}}function Vp(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Rt||e instanceof Ue||e instanceof we||e instanceof qt||e instanceof Sp||e instanceof Be)}function Dp(e,t,n){if(!Vp(n)||!gd(n)){const r=yl(n);throw r==="an object"?t.wc(e+" a custom object"):t.wc(e+" "+r)}}function kI(e,t,n){if((t=Pr(t))instanceof zl)return t._internalPath;if(typeof t=="string")return xp(e,t);throw io("Field path arguments must be of type string or ",e,!1,void 0,n)}const MI=new RegExp("[~\\*/\\[\\]]");function xp(e,t,n){if(t.search(MI)>=0)throw io(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new zl(...t.split("."))._internalPath}catch{throw io(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function io(e,t,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new G(x.INVALID_ARGUMENT,l+e+u)}function FI(e,t){return e.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(t,n,r,s,i){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new LI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Op("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class LI extends Np{data(){return super.data()}}function Op(e,t){return typeof t=="string"?xp(e,t):t instanceof zl?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new G(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class UI{convertValue(t,n="none"){switch(Dn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ot(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Vn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw tt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return nr(t,((s,i)=>{r[s]=this.convertValue(i,n)})),r}convertVectorValue(t){var n,r,s;const i=(s=(r=(n=t.fields)===null||n===void 0?void 0:n[Qi].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map((a=>Ot(a.doubleValue)));return new Be(i)}convertGeoPoint(t){return new Ue(Ot(t.latitude),Ot(t.longitude))}convertArray(t,n){return(t.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const r=Eo(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ns(t));default:return null}}convertTimestamp(t){const n=Pn(t);return new Rt(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=St.fromString(t);yt(ep(r),9688,{name:t});const s=new Os(r.get(1),r.get(3)),i=new J(r.popFirst(5));return s.isEqual(n)||on(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(e,t,n){let r;return r=e?e.toFirestore(t):t,r}class hs{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Xn extends Np{constructor(t,n,r,s,i,a){super(t,n,r,s,a),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new xi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(Op("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new G(x.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Xn._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Xn._jsonSchemaVersion="firestore/documentSnapshot/1.0",Xn._jsonSchema={type:Lt("string",Xn._jsonSchemaVersion),bundleSource:Lt("string","DocumentSnapshot"),bundleName:Lt("string"),bundle:Lt("string")};class xi extends Xn{data(t={}){return super.data(t)}}class Jn{constructor(t,n,r,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new hs(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((r=>{t.call(n,new xi(this._firestore,this._userDataWriter,r.key,r,new hs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map((l=>{const u=new xi(s._firestore,s._userDataWriter,l.doc.key,l.doc,new hs(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}}))}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((l=>i||l.type!==3)).map((l=>{const u=new xi(s._firestore,s._userDataWriter,l.doc.key,l.doc,new hs(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,d=-1;return l.type!==0&&(f=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:jI(l.type),doc:u,oldIndex:f,newIndex:d}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new G(x.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Jn._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=_l.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function jI(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(e){e=Ze(e,qt);const t=Ze(e.firestore,kr);return bI(xo(t),e._key).then((n=>Mp(t,e,n)))}Jn._jsonSchemaVersion="firestore/querySnapshot/1.0",Jn._jsonSchema={type:Lt("string",Jn._jsonSchemaVersion),bundleSource:Lt("string","QuerySnapshot"),bundleName:Lt("string"),bundle:Lt("string")};class Wl extends UI{constructor(t){super(),this.firestore=t}convertBytes(t){return new we(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new qt(this.firestore,null,n)}}function Ti(e){e=Ze(e,Ws);const t=Ze(e.firestore,kr),n=xo(t),r=new Wl(t);return kp(e._query),SI(n,e._query).then((s=>new Jn(t,r,e,s)))}function qI(e,t){const n=Ze(e.firestore,kr),r=bp(e),s=BI(e.converter,t);return zI(n,[OI(NI(e.firestore),"addDoc",r._key,s,e.converter!==null,{}).toMutation(r._key,tn.exists(!1))]).then((()=>r))}function HI(e,...t){var n,r,s;e=Pr(e);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof t[a]!="object"||Vh(t[a])||(i=t[a++]);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Vh(t[a])){const m=t[a];t[a]=(n=m.next)===null||n===void 0?void 0:n.bind(m),t[a+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),t[a+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let u,f,d;if(e instanceof qt)f=Ze(e.firestore,kr),d=Io(e._key.path),u={next:m=>{t[a]&&t[a](Mp(f,e,m))},error:t[a+1],complete:t[a+2]};else{const m=Ze(e,Ws);f=Ze(m.firestore,kr),d=m._query;const y=new Wl(f);u={next:b=>{t[a]&&t[a](new Jn(f,y,m,b))},error:t[a+1],complete:t[a+2]},kp(e._query)}return(function(y,b,V,F){const L=new Hl(F),K=new jl(b,L,V);return y.asyncQueue.enqueueAndForget((async()=>Ll(await so(y),K))),()=>{L.Ou(),y.asyncQueue.enqueueAndForget((async()=>Ul(await so(y),K)))}})(xo(f),d,l,u)}function zI(e,t){return(function(r,s){const i=new Ye;return r.asyncQueue.enqueueAndForget((async()=>dI(await AI(r),s,i))),i.promise})(xo(e),t)}function Mp(e,t,n){const r=n.docs.get(t._key),s=new Wl(e);return new Xn(e,s,t._key,r,new hs(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(s){Lr=s})(Tv),Ki(new Vs("firestore",((r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new kr(new kv(r.getProvider("auth-internal")),new Lv(a,r.getProvider("app-check-internal")),(function(f,d){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new G(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Os(f.options.projectId,d)})(a,s),a);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l}),"PUBLIC").setMultipleInstances(!0)),Sr(Ou,ku,t),Sr(Ou,ku,"esm2017")})();var KI="firebase",WI="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sr(KI,WI,"app");const GI={apiKey:"AIzaSyBma9lxcHlrc8Hc_f1bxQBgobX2H8IdFCs",authDomain:"cis371-3e86f.firebaseapp.com",databaseURL:"https://CIS371.firebaseio.com",projectId:"cis371-3e86f",storageBucket:"cis371-3e86f.firebasestorage.app",messagingSenderId:"838184893406",appId:"1:838184893406:web:fba4d5dafe550c1ef83b4f"},QI=rd(GI),qn=CI(QI),Gs=M_("BeverageStore",{state:()=>({temps:Tu,currentTemp:Tu[0],bases:[],currentBase:null,syrups:[],currentSyrup:null,creamers:[],currentCreamer:null,beverages:[],currentBeverage:null,currentName:""}),actions:{async init(){const e=await Ti(dr(qn,"bases"));this.bases=e.docs.map(s=>({id:s.id,...s.data()}));const t=await Ti(dr(qn,"syrups"));this.syrups=t.docs.map(s=>({id:s.id,...s.data()}));const n=await Ti(dr(qn,"creamers"));this.creamers=n.docs.map(s=>({id:s.id,...s.data()}));const r=await Ti(dr(qn,"beverages"));this.beverages=r.docs.map(s=>({id:s.id,...s.data()})),this.currentBase=this.bases[0],this.currentSyrup=this.syrups[1],this.currentCreamer=this.creamers[1],this.currentBeverage=this.beverages[1]},async makeBeverage(){const e={name:this.currentName||"Custom Beverage",base:this.currentBase,syrup:this.currentSyrup,creamer:this.currentCreamer,temp:this.currentTemp};try{const t=await qI(dr(qn,"beverages"),e);console.log("Beverage stored with ID:",t.id)}catch(t){console.error("Error adding beverage:",t)}},async showBeverage(e){try{const t=bp(qn,"beverages",e),n=await $I(t);if(n.exists()){const r={id:n.id,...n.data()};this.currentTemp=r.temp,this.currentBase=r.base,this.currentCreamer=r.creamer,this.currentSyrup=r.syrup,console.log("Selected beverage:",r)}else console.error("No such beverage found!"),this.currentBeverage=null}catch(t){console.error("Error loading beverage:",t)}},listenToBeverages(){const e=dr(qn,"beverages");HI(e,t=>{this.beverages=t.docs.map(n=>({id:n.id,...n.data()})),console.log("Realtime beverages:",this.beverages)})}}}),XI=Bs({__name:"Syrup",setup(e){const t=Gs();return(n,r)=>{var s;return vt(),Nt("div",{class:"syrup",style:Mr({"--texture-color":(s=Ct(t).currentSyrup)==null?void 0:s.color})},null,4)}}}),JI=er(XI,[["__scopeId","data-v-969d30c3"]]),YI=Bs({__name:"Base",setup(e){const t=Gs();return(n,r)=>{var s;return vt(),Nt("div",{class:"baseBeverage",style:Mr({backgroundColor:(s=Ct(t).currentBase)==null?void 0:s.color})},null,4)}}}),ZI=er(YI,[["__scopeId","data-v-f853ce7d"]]),tw={class:"froth"},ew=Bs({__name:"Creamer",setup(e){const t=Gs();return(n,r)=>(vt(),Nt("div",tw,[(vt(),Nt(kt,null,gn(5,()=>{var s;return xt("div",{class:"foam",style:Mr({backgroundColor:(s=Ct(t).currentCreamer)==null?void 0:s.color})},null,4)}),64))]))}}),nw=er(ew,[["__scopeId","data-v-416a324e"]]),rw={},sw={id:"steam"},iw={class:"stream"};function ow(e,t){return vt(),Nt("div",sw,[(vt(),Nt(kt,null,gn(3,()=>xt("div",iw)),64))])}const aw=er(rw,[["render",ow]]),lw={},cw={id:"condensation"},uw={class:"flake"};function hw(e,t){return vt(),Nt("div",cw,[(vt(),Nt(kt,null,gn(3,()=>xt("div",uw)),64))])}const fw=er(lw,[["render",hw]]),dw=Bs({__name:"Beverage",props:{isIced:{type:Boolean}},setup(e){const t=Gs();return(n,r)=>(vt(),_n(Q_,null,{default:os(()=>[e.isIced?(vt(),_n(fw,{key:0})):(vt(),_n(aw,{key:1})),ve(z_,null,{top:os(()=>{var s;return[((s=Ct(t).currentCreamer)==null?void 0:s.color)!=="transparent"?(vt(),_n(nw,{key:0})):tu("",!0)]}),mid:os(()=>{var s;return[((s=Ct(t).currentSyrup)==null?void 0:s.color)!=="transparent"?(vt(),_n(JI,{key:0})):tu("",!0)]}),bottom:os(()=>[ve(ZI)]),_:1})]),_:1}))}}),pw=["id","value"],mw=["id","value"],gw=["id","value"],_w=["id","value"],yw={id:"beverage-container",style:{"margin-top":"20px"}},vw=["onClick","id","value"],Ew=Bs({__name:"App",setup(e){const t=Gs();return t.init(),gf(()=>{t.init(),t.listenToBeverages()}),(n,r)=>(vt(),Nt(kt,null,[xt("div",null,[ve(dw,{isIced:Ct(t).currentTemp==="Cold"},null,8,["isIced"]),xt("ul",null,[xt("li",null,[(vt(!0),Nt(kt,null,gn(Ct(t).temps,s=>(vt(),Nt("label",{key:s},[ss(xt("input",{type:"radio",name:"temperature",id:`r${s}`,value:s,"onUpdate:modelValue":r[0]||(r[0]=i=>Ct(t).currentTemp=i)},null,8,pw),[[mi,Ct(t).currentTemp]]),gr(" "+pr(s),1)]))),128))])]),xt("ul",null,[xt("li",null,[(vt(!0),Nt(kt,null,gn(Ct(t).bases,s=>(vt(),Nt("label",{key:s.id},[ss(xt("input",{type:"radio",name:"bases",id:`r${s.id}`,value:s,"onUpdate:modelValue":r[1]||(r[1]=i=>Ct(t).currentBase=i)},null,8,mw),[[mi,Ct(t).currentBase]]),gr(" "+pr(s.name),1)]))),128))])]),xt("ul",null,[xt("li",null,[(vt(!0),Nt(kt,null,gn(Ct(t).syrups,s=>(vt(),Nt("label",{key:s.id},[ss(xt("input",{type:"radio",name:"syrups",id:`r${s.id}`,value:s,"onUpdate:modelValue":r[2]||(r[2]=i=>Ct(t).currentSyrup=i)},null,8,gw),[[mi,Ct(t).currentSyrup]]),gr(" "+pr(s.name),1)]))),128))])]),xt("ul",null,[xt("li",null,[(vt(!0),Nt(kt,null,gn(Ct(t).creamers,s=>(vt(),Nt("label",{key:s.id},[ss(xt("input",{type:"radio",name:"creamers",id:`r${s.id}`,value:s,"onUpdate:modelValue":r[3]||(r[3]=i=>Ct(t).currentCreamer=i)},null,8,_w),[[mi,Ct(t).currentCreamer]]),gr(" "+pr(s.name),1)]))),128))])]),ss(xt("input",{type:"text",placeholder:"Beverage Name","onUpdate:modelValue":r[4]||(r[4]=s=>Ct(t).currentName=s)},null,512),[[w_,Ct(t).currentName]]),xt("button",{onClick:r[5]||(r[5]=s=>Ct(t).makeBeverage())}," Make Beverage")]),xt("div",yw,[(vt(!0),Nt(kt,null,gn(Ct(t).beverages,s=>(vt(),Nt("label",{key:s.id},[xt("input",{type:"radio",name:"drink",onClick:i=>Ct(t).showBeverage(s.id),id:`r${s.id}`,value:s.name},null,8,vw),gr(" "+pr(s.name),1)]))),128))])],64))}}),Fp=V_();Fp.use(j_);R_(Ew).use(Fp).mount("#app");
